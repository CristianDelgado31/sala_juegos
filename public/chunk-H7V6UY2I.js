import{$ as kr,A as Xe,Aa as dg,Ac as kg,B as el,Ba as mt,Bb as hl,Bc as me,C as ra,Ca as as,Cb as fl,Cc as xg,D as tl,Da as Ue,Db as Vr,Dc as ds,E as sg,Ea as oe,Ec as Ng,Fa as al,Fc as Mg,Ga as Ne,Gc as hs,H as ot,Ha as cl,Hc as ma,Ia as hg,J as Pr,Ja as oa,K as pn,Ka as fg,Kb as Tt,L as ia,La as pt,M as nl,Ma as cs,N as Ut,Na as us,Nb as ca,O as og,Oa as Nr,Ob as Fr,Pa as Mr,Q as rl,Qa as mg,Qc as Og,R as Gn,Ra as pg,Rc as Vg,S as gn,Sa as gg,Sc as pa,T as il,Ta as vg,Tc as Fg,U as ag,Ua as _g,Uc as ga,V as sl,Va as bg,Wa as yg,Xa as Hn,Y as sa,Z as ss,Za as Ig,_ as Ze,a as N,aa as we,ab as ls,ac as ct,b as ce,ba as he,bc as Lr,ca as Et,cb as G,d as fn,da as B,db as aa,e as b,ea as be,f as na,fa as cg,g as Hu,ga as q,h as wt,ha as ol,hb as wg,hc as Ur,i as Ku,ia as V,ib as Kn,ic as Cg,j as Qu,ja as O,jb as Eg,jc as ua,k as Ce,ka as We,kc as la,l as Ke,la as ug,lb as ul,lc as ml,ma as os,mb as Or,mc as da,n as ng,na as xr,nc as ha,o as rg,oa as ye,ob as He,oc as fa,p as mn,pa as le,pb as Qn,q as Yu,qa as ft,qb as Tg,qc as jr,r as Ju,ra as lg,rb as ll,rc as Sg,s as Xu,sa as Wn,sc as Qe,t as Re,ta as at,u as z,ua as jt,ub as dl,uc as Br,v as is,vb as vn,vc as zt,w as Zu,wc as Rg,x as ig,xc as Dg,y as J,yb as $t,yc as $r,z as Dr,za as Bt,zb as Ag,zc as Pg}from"./chunk-3EJBVJJG.js";var ms=class{},_a=class{},qt=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(c=>s.indexOf(c)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var gl=class{encodeKey(e){return Lg(e)}encodeValue(e){return Lg(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function cE(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,c]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],u=t.get(o)||[];u.push(c),t.set(o,u)}),t}var uE=/%(\d[a-f0-9])/gi,lE={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Lg(n){return encodeURIComponent(n).replace(uE,(e,t)=>lE[t]??e)}function va(n){return`${n}`}var bn=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new gl,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=cE(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(va):[va(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(va(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(va(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var vl=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function dE(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Ug(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function jg(n){return typeof Blob<"u"&&n instanceof Blob}function Bg(n){return typeof FormData<"u"&&n instanceof FormData}function hE(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var fs=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(dE(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new qt,this.context??=new vl,!this.params)this.params=new bn,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let c=t.indexOf("?"),u=c===-1?"?":c<t.length-1?"&":"";this.urlWithParams=t+u+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Ug(this.body)||jg(this.body)||Bg(this.body)||hE(this.body)?this.body:this.body instanceof bn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Bg(this.body)?null:jg(this.body)?this.body.type||null:Ug(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof bn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,c=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,d=e.headers||this.headers,f=e.params||this.params,p=e.context??this.context;return e.setHeaders!==void 0&&(d=Object.keys(e.setHeaders).reduce((w,C)=>w.set(C,e.setHeaders[C]),d)),e.setParams&&(f=Object.keys(e.setParams).reduce((w,C)=>w.set(C,e.setParams[C]),f)),new n(t,r,o,{params:f,headers:d,context:p,reportProgress:u,responseType:i,withCredentials:c,transferCache:s})}},yn=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(yn||{}),ps=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new qt,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},ba=class n extends ps{constructor(e={}){super(e),this.type=yn.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},gs=class n extends ps{constructor(e={}){super(e),this.type=yn.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},_n=class extends ps{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},Wg=200,fE=204;function pl(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var mE=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof fs)s=t;else{let u;i.headers instanceof qt?u=i.headers:u=new qt(i.headers);let d;i.params&&(i.params instanceof bn?d=i.params:d=new bn({fromObject:i.params})),s=new fs(t,r,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:d,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let o=z(s).pipe(pn(u=>this.handler.handle(u)));if(t instanceof fs||i.observe==="events")return o;let c=o.pipe(ot(u=>u instanceof gs));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(J(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return c.pipe(J(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return c.pipe(J(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return c.pipe(J(u=>u.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new bn().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,pl(i,r))}post(t,r,i={}){return this.request("POST",t,pl(i,r))}put(t,r,i={}){return this.request("PUT",t,pl(i,r))}static{this.\u0275fac=function(r){return new(r||n)(V(ms))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})(),pE=/^\)\]\}',?\n/,gE="X-Request-URL";function $g(n){if(n.url)return n.url;let e=gE.toLocaleLowerCase();return n.headers.get(e)}var vE=(()=>{class n{constructor(){this.fetchImpl=O(_l,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=O(oe)}handle(t){return new wt(r=>{let i=new AbortController;return this.doRequest(t,i.signal,r).then(bl,s=>r.error(new _n({error:s}))),()=>i.abort()})}doRequest(t,r,i){return b(this,null,function*(){let s=this.createRequestInit(t),o;try{let C=this.ngZone.runOutsideAngular(()=>this.fetchImpl(t.urlWithParams,N({signal:r},s)));_E(C),i.next({type:yn.Sent}),o=yield C}catch(C){i.error(new _n({error:C,status:C.status??0,statusText:C.statusText,url:t.urlWithParams,headers:C.headers}));return}let c=new qt(o.headers),u=o.statusText,d=$g(o)??t.urlWithParams,f=o.status,p=null;if(t.reportProgress&&i.next(new ba({headers:c,status:f,statusText:u,url:d})),o.body){let C=o.headers.get("content-length"),k=[],P=o.body.getReader(),R=0,j,W,U=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>b(this,null,function*(){for(;;){let{done:ge,value:te}=yield P.read();if(ge)break;if(k.push(te),R+=te.length,t.reportProgress){W=t.responseType==="text"?(W??"")+(j??=new TextDecoder).decode(te,{stream:!0}):void 0;let I=()=>i.next({type:yn.DownloadProgress,total:C?+C:void 0,loaded:R,partialText:W});U?U.run(I):I()}}}));let se=this.concatChunks(k,R);try{let ge=o.headers.get("Content-Type")??"";p=this.parseBody(t,se,ge)}catch(ge){i.error(new _n({error:ge,headers:new qt(o.headers),status:o.status,statusText:o.statusText,url:$g(o)??t.urlWithParams}));return}}f===0&&(f=p?Wg:0),f>=200&&f<300?(i.next(new gs({body:p,headers:c,status:f,statusText:u,url:d})),i.complete()):i.error(new _n({error:p,headers:c,status:f,statusText:u,url:d}))})}parseBody(t,r,i){switch(t.responseType){case"json":let s=new TextDecoder().decode(r).replace(pE,"");return s===""?null:JSON.parse(s);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(t){let r={},i=t.withCredentials?"include":void 0;if(t.headers.forEach((s,o)=>r[s]=o.join(",")),t.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){let s=t.detectContentTypeHeader();s!==null&&(r["Content-Type"]=s)}return{body:t.serializeBody(),method:t.method,headers:r,credentials:i}}concatChunks(t,r){let i=new Uint8Array(r),s=0;for(let o of t)i.set(o,s),s+=o.length;return i}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})(),_l=class{};function bl(){}function _E(n){n.then(bl,bl)}function Hg(n,e){return e(n)}function bE(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}function yE(n,e,t){return(r,i)=>at(t,()=>e(r,s=>n(s,i)))}var IE=new q(""),yl=new q(""),wE=new q(""),Kg=new q("",{providedIn:"root",factory:()=>!0});function EE(){let n=null;return(e,t)=>{n===null&&(n=(O(IE,{optional:!0})??[]).reduceRight(bE,Hg));let r=O(as);if(O(Kg)){let s=r.add();return n(e,t).pipe(Gn(()=>r.remove(s)))}else return n(e,t)}}var zg=(()=>{class n extends ms{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=O(as),this.contributeToStability=O(Kg)}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(yl),...this.injector.get(wE,[])]));this.chain=r.reduceRight((i,s)=>yE(i,s,this.injector),Hg)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Gn(()=>this.pendingTasks.remove(r)))}else return this.chain(t,r=>this.backend.handle(r))}static{this.\u0275fac=function(r){return new(r||n)(V(_a),V(Wn))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})();var TE=/^\)\]\}',?\n/;function AE(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var qg=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new he(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Re(r.\u0275loadImpl()):z(null)).pipe(Ze(()=>new wt(s=>{let o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((P,R)=>o.setRequestHeader(P,R.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let P=t.detectContentTypeHeader();P!==null&&o.setRequestHeader("Content-Type",P)}if(t.responseType){let P=t.responseType.toLowerCase();o.responseType=P!=="json"?P:"text"}let c=t.serializeBody(),u=null,d=()=>{if(u!==null)return u;let P=o.statusText||"OK",R=new qt(o.getAllResponseHeaders()),j=AE(o)||t.url;return u=new ba({headers:R,status:o.status,statusText:P,url:j}),u},f=()=>{let{headers:P,status:R,statusText:j,url:W}=d(),U=null;R!==fE&&(U=typeof o.response>"u"?o.responseText:o.response),R===0&&(R=U?Wg:0);let se=R>=200&&R<300;if(t.responseType==="json"&&typeof U=="string"){let ge=U;U=U.replace(TE,"");try{U=U!==""?JSON.parse(U):null}catch(te){U=ge,se&&(se=!1,U={error:te,text:U})}}se?(s.next(new gs({body:U,headers:P,status:R,statusText:j,url:W||void 0})),s.complete()):s.error(new _n({error:U,headers:P,status:R,statusText:j,url:W||void 0}))},p=P=>{let{url:R}=d(),j=new _n({error:P,status:o.status||0,statusText:o.statusText||"Unknown Error",url:R||void 0});s.error(j)},w=!1,C=P=>{w||(s.next(d()),w=!0);let R={type:yn.DownloadProgress,loaded:P.loaded};P.lengthComputable&&(R.total=P.total),t.responseType==="text"&&o.responseText&&(R.partialText=o.responseText),s.next(R)},k=P=>{let R={type:yn.UploadProgress,loaded:P.loaded};P.lengthComputable&&(R.total=P.total),s.next(R)};return o.addEventListener("load",f),o.addEventListener("error",p),o.addEventListener("timeout",p),o.addEventListener("abort",p),t.reportProgress&&(o.addEventListener("progress",C),c!==null&&o.upload&&o.upload.addEventListener("progress",k)),o.send(c),s.next({type:yn.Sent}),()=>{o.removeEventListener("error",p),o.removeEventListener("abort",p),o.removeEventListener("load",f),o.removeEventListener("timeout",p),t.reportProgress&&(o.removeEventListener("progress",C),c!==null&&o.upload&&o.upload.removeEventListener("progress",k)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(V(ga))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})(),Qg=new q(""),CE="XSRF-TOKEN",SE=new q("",{providedIn:"root",factory:()=>CE}),RE="X-XSRF-TOKEN",DE=new q("",{providedIn:"root",factory:()=>RE}),ya=class{},PE=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ma(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(V(me),V(pt),V(SE))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})();function kE(n,e){let t=n.url.toLowerCase();if(!O(Qg)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=O(ya).getToken(),i=O(DE);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var Yg=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Yg||{});function xE(n,e){return{\u0275kind:n,\u0275providers:e}}function NE(...n){let e=[mE,qg,zg,{provide:ms,useExisting:zg},{provide:_a,useFactory:()=>O(vE,{optional:!0})??O(qg)},{provide:yl,useValue:kE,multi:!0},{provide:Qg,useValue:!0},{provide:ya,useClass:PE}];for(let t of n)e.push(...t.\u0275providers);return ft(e)}var Gg=new q("");function ME(){return xE(Yg.LegacyInterceptors,[{provide:Gg,useFactory:EE},{provide:yl,useExisting:Gg,multi:!0}])}var aN=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ye({type:n})}static{this.\u0275inj=be({providers:[NE(ME())]})}}return n})();var El=class extends kg{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Tl=class n extends El{static makeCurrent(){Pg(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=VE();return t==null?null:FE(t)}resetBaseElement(){vs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ma(document.cookie,e)}},vs=null;function VE(){return vs=vs||document.querySelector("base"),vs?vs.getAttribute("href"):null}function FE(n){return new URL(n,document.baseURI).pathname}var LE=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})(),Al=new q(""),ev=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new he(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(V(Al),V(oe))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})(),Ia=class{constructor(e){this._doc=e}},Il="ng-app-id",tv=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=pa(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Il}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(Il),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(Il,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(V(me),V(oa),V(us,8),V(pt))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})(),wl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Sl=/%COMP%/g,nv="%COMP%",UE=`_nghost-${nv}`,jE=`_ngcontent-${nv}`,BE=!0,$E=new q("",{providedIn:"root",factory:()=>BE});function zE(n){return jE.replace(Sl,n)}function qE(n){return UE.replace(Sl,n)}function rv(n,e){return e.map(t=>t.replace(Sl,n))}var Jg=(()=>{class n{constructor(t,r,i,s,o,c,u,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=c,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=pa(c),this.defaultRenderer=new _s(t,o,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===os.ShadowDom&&(r=ce(N({},r),{encapsulation:os.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof wa?i.applyToHost(t):i instanceof bs&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,c=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case os.Emulated:s=new wa(u,d,r,this.appId,f,o,c,p);break;case os.ShadowDom:return new Cl(u,d,t,r,o,c,this.nonce,p);default:s=new bs(u,d,r,f,o,c,p);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(V(ev),V(tv),V(oa),V($E),V(me),V(pt),V(oe),V(us))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})(),_s=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(wl[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Xg(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Xg(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new he(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=wl[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=wl[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ls.DashCase|ls.Important)?e.style.setProperty(t,r,i&ls.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ls.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=$r().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function Xg(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Cl=class extends _s{constructor(e,t,r,i,s,o,c,u){super(e,s,o,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=rv(i.id,i.styles);for(let f of d){let p=document.createElement("style");c&&p.setAttribute("nonce",c),p.textContent=f,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},bs=class extends _s{constructor(e,t,r,i,s,o,c,u){super(e,s,o,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?rv(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},wa=class extends bs{constructor(e,t,r,i,s,o,c,u){let d=i+"-"+r.id;super(e,t,r,s,o,c,u,d),this.contentAttr=zE(d),this.hostAttr=qE(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},GE=(()=>{class n extends Ia{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(V(me))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})(),Zg=["alt","control","meta","shift"],WE={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},HE={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},KE=(()=>{class n extends Ia{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>$r().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),o="code."),Zg.forEach(d=>{let f=r.indexOf(d);f>-1&&(r.splice(f,1),o+=d+".")}),o+=s,r.length!=0||s.length===0)return null;let u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(t,r){let i=WE[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Zg.forEach(o=>{if(o!==i){let c=HE[o];c(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(V(me))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})();function kN(n,e){return Sg(N({rootComponent:n},QE(e)))}function QE(n){return{appProviders:[...eT,...n?.providers??[]],platformProviders:ZE}}function YE(){Tl.makeCurrent()}function JE(){return new al}function XE(){return hg(document),document}var ZE=[{provide:pt,useValue:Og},{provide:fg,useValue:YE,multi:!0},{provide:me,useFactory:XE,deps:[]}];var eT=[{provide:lg,useValue:"root"},{provide:al,useFactory:JE,deps:[]},{provide:Al,useClass:GE,multi:!0,deps:[me,oe,pt]},{provide:Al,useClass:KE,multi:!0,deps:[me]},Jg,tv,ev,{provide:wg,useExisting:Jg},{provide:ga,useClass:LE,deps:[]},[]];var iv=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(V(me))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var tT=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=V(nT),i},providedIn:"root"})}}return n})(),nT=(()=>{class n extends tT{constructor(t){super(),this._doc=t}sanitize(t,r){if(r==null)return null;switch(t){case Hn.NONE:return r;case Hn.HTML:return Mr(r,"HTML")?Nr(r):yg(this._doc,String(r)).toString();case Hn.STYLE:return Mr(r,"Style")?Nr(r):r;case Hn.SCRIPT:if(Mr(r,"Script"))return Nr(r);throw new he(5200,!1);case Hn.URL:return Mr(r,"URL")?Nr(r):bg(String(r));case Hn.RESOURCE_URL:if(Mr(r,"ResourceURL"))return Nr(r);throw new he(5201,!1);default:throw new he(5202,!1)}}bypassSecurityTrustHtml(t){return mg(t)}bypassSecurityTrustStyle(t){return pg(t)}bypassSecurityTrustScript(t){return gg(t)}bypassSecurityTrustUrl(t){return vg(t)}bypassSecurityTrustResourceUrl(t){return _g(t)}static{this.\u0275fac=function(r){return new(r||n)(V(me))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var pv=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(G(Kn),G(Ne))}}static{this.\u0275dir=le({type:n})}}return n})(),xa=(()=>{class n extends pv{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Bt(n)))(i||n)}})()}static{this.\u0275dir=le({type:n,features:[He]})}}return n})(),Hr=new q("");var iT={provide:Hr,useExisting:Et(()=>gv),multi:!0};function sT(){let n=$r()?$r().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var oT=new q(""),gv=(()=>{class n extends pv{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!sT())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(G(Kn),G(Ne),G(oT,8))}}static{this.\u0275dir=le({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Tt("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[ct([iT]),He]})}}return n})();function In(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function vv(n){return n!=null&&typeof n.length=="number"}var Cs=new q(""),Na=new q(""),aT=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,sv=class{static min(e){return cT(e)}static max(e){return uT(e)}static required(e){return _v(e)}static requiredTrue(e){return lT(e)}static email(e){return dT(e)}static minLength(e){return hT(e)}static maxLength(e){return fT(e)}static pattern(e){return mT(e)}static nullValidator(e){return Ta(e)}static compose(e){return Tv(e)}static composeAsync(e){return Av(e)}};function cT(n){return e=>{if(In(e.value)||In(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function uT(n){return e=>{if(In(e.value)||In(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function _v(n){return In(n.value)?{required:!0}:null}function lT(n){return n.value===!0?null:{required:!0}}function dT(n){return In(n.value)||aT.test(n.value)?null:{email:!0}}function hT(n){return e=>In(e.value)||!vv(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function fT(n){return e=>vv(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function mT(n){if(!n)return Ta;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(In(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function Ta(n){return null}function bv(n){return n!=null}function yv(n){return la(n)?Re(n):n}function Iv(n){let e={};return n.forEach(t=>{e=t!=null?N(N({},e),t):e}),Object.keys(e).length===0?null:e}function wv(n,e){return e.map(t=>t(n))}function pT(n){return!n.validate}function Ev(n){return n.map(e=>pT(e)?e:t=>e.validate(t))}function Tv(n){if(!n)return null;let e=n.filter(bv);return e.length==0?null:function(t){return Iv(wv(t,e))}}function Nl(n){return n!=null?Tv(Ev(n)):null}function Av(n){if(!n)return null;let e=n.filter(bv);return e.length==0?null:function(t){let r=wv(t,e).map(yv);return sg(r).pipe(J(Iv))}}function Ml(n){return n!=null?Av(Ev(n)):null}function ov(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Cv(n){return n._rawValidators}function Sv(n){return n._rawAsyncValidators}function Rl(n){return n?Array.isArray(n)?n:[n]:[]}function Aa(n,e){return Array.isArray(n)?n.includes(e):n===e}function av(n,e){let t=Rl(e);return Rl(n).forEach(i=>{Aa(t,i)||t.push(i)}),t}function cv(n,e){return Rl(e).filter(t=>!Aa(n,t))}var Ca=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Nl(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Ml(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Gt=class extends Ca{get formDirective(){return null}get path(){return null}},Yn=class extends Ca{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Sa=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},gT={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},KN=ce(N({},gT),{"[class.ng-submitted]":"isSubmitted"}),QN=(()=>{class n extends Sa{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(G(Yn,2))}}static{this.\u0275dir=le({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&$t("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[He]})}}return n})(),YN=(()=>{class n extends Sa{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(G(Gt,10))}}static{this.\u0275dir=le({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&$t("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[He]})}}return n})();var ys="VALID",Ea="INVALID",zr="PENDING",Is="DISABLED",wn=class{},Ra=class extends wn{constructor(e,t){super(),this.value=e,this.source=t}},Es=class extends wn{constructor(e,t){super(),this.pristine=e,this.source=t}},Ts=class extends wn{constructor(e,t){super(),this.touched=e,this.source=t}},qr=class extends wn{constructor(e,t){super(),this.status=e,this.source=t}},Dl=class extends wn{constructor(e){super(),this.source=e}},Pl=class extends wn{constructor(e){super(),this.source=e}};function Ol(n){return(Ma(n)?n.validators:n)||null}function vT(n){return Array.isArray(n)?Nl(n):n||null}function Vl(n,e){return(Ma(e)?e.asyncValidators:n)||null}function _T(n){return Array.isArray(n)?Ml(n):n||null}function Ma(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Rv(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new he(1e3,"");if(!r[t])throw new he(1001,"")}function Dv(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new he(1002,"")})}var Gr=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Br(()=>this.statusReactive()),this.statusReactive=Or(void 0),this._pristine=Br(()=>this.pristineReactive()),this.pristineReactive=Or(!0),this._touched=Br(()=>this.touchedReactive()),this.touchedReactive=Or(!1),this._events=new Ce,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return zt(this.statusReactive)}set status(e){zt(()=>this.statusReactive.set(e))}get valid(){return this.status===ys}get invalid(){return this.status===Ea}get pending(){return this.status==zr}get disabled(){return this.status===Is}get enabled(){return this.status!==Is}get pristine(){return zt(this.pristineReactive)}set pristine(e){zt(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return zt(this.touchedReactive)}set touched(e){zt(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(av(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(av(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(cv(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(cv(e,this._rawAsyncValidators))}hasValidator(e){return Aa(this._rawValidators,e)}hasAsyncValidator(e){return Aa(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ce(N({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ts(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ts(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ce(N({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Es(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Es(!0,r))}markAsPending(e={}){this.status=zr;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new qr(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ce(N({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Is,this.errors=null,this._forEachChild(i=>{i.disable(ce(N({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ra(this.value,r)),this._events.next(new qr(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ce(N({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ys,this._forEachChild(r=>{r.enable(ce(N({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ce(N({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ys||this.status===zr)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ra(this.value,t)),this._events.next(new qr(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ce(N({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Is:ys}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=zr,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=yv(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new qr(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ue,this.statusChanges=new Ue}_calculateStatus(){return this._allControlsDisabled()?Is:this.errors?Ea:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(zr)?zr:this._anyControlsHaveStatus(Ea)?Ea:ys}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Es(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Ts(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ma(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=vT(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=_T(this._rawAsyncValidators)}},Wr=class extends Gr{constructor(e,t,r){super(Ol(t),Vl(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Dv(this,!0,e),Object.keys(e).forEach(r=>{Rv(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var kl=class extends Wr{};var Ss=new q("CallSetDisabledState",{providedIn:"root",factory:()=>Oa}),Oa="always";function Pv(n,e){return[...e.path,n]}function Da(n,e,t=Oa){Fl(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),yT(n,e),wT(n,e),IT(n,e),bT(n,e)}function uv(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),ka(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Pa(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function bT(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Fl(n,e){let t=Cv(n);e.validator!==null?n.setValidators(ov(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=Sv(n);e.asyncValidator!==null?n.setAsyncValidators(ov(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Pa(e._rawValidators,i),Pa(e._rawAsyncValidators,i)}function ka(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=Cv(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(e.asyncValidator!==null){let i=Sv(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}let r=()=>{};return Pa(e._rawValidators,r),Pa(e._rawAsyncValidators,r),t}function yT(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&kv(n,e)})}function IT(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&kv(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function kv(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function wT(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function xv(n,e){n==null,Fl(n,e)}function ET(n,e){return ka(n,e)}function Nv(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function TT(n){return Object.getPrototypeOf(n.constructor)===xa}function Mv(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Ov(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===gv?t=s:TT(s)?r=s:i=s}),i||r||t||null}function AT(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var CT={provide:Gt,useExisting:Et(()=>ST)},ws=Promise.resolve(),ST=(()=>{class n extends Gt{get submitted(){return zt(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=Br(()=>this.submittedReactive()),this.submittedReactive=Or(!1),this._directives=new Set,this.ngSubmit=new Ue,this.form=new Wr({},Nl(t),Ml(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){ws.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Da(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){ws.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){ws.then(()=>{let r=this._findContainer(t.path),i=new Wr({});xv(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){ws.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){ws.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),Mv(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(G(Cs,10),G(Na,10),G(Ss,8))}}static{this.\u0275dir=le({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Tt("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ct([CT]),He]})}}return n})();function lv(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function dv(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var As=class extends Gr{constructor(e=null,t,r){super(Ol(t),Vl(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ma(t)&&(t.nonNullable||t.initialValueIsDefault)&&(dv(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){lv(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){lv(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){dv(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var RT=n=>n instanceof As;var DT={provide:Yn,useExisting:Et(()=>PT)},hv=Promise.resolve(),PT=(()=>{class n extends Yn{constructor(t,r,i,s,o,c){super(),this._changeDetectorRef=o,this.callSetDisabledState=c,this.control=new As,this._registered=!1,this.name="",this.update=new Ue,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Ov(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Nv(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Da(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){hv.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Qe(r);hv.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Pv(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(G(Gt,9),G(Cs,10),G(Na,10),G(Hr,10),G(jr,8),G(Ss,8))}}static{this.\u0275dir=le({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ct([DT]),He,jt]})}}return n})(),XN=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=le({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),kT={provide:Hr,useExisting:Et(()=>xT),multi:!0},xT=(()=>{class n extends xa{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Bt(n)))(i||n)}})()}static{this.\u0275dir=le({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Tt("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[ct([kT]),He]})}}return n})();var Vv=new q("");var NT={provide:Gt,useExisting:Et(()=>MT)},MT=(()=>{class n extends Gt{get submitted(){return zt(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=Br(()=>this._submittedReactive()),this._submittedReactive=Or(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Ue,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ka(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return Da(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){uv(t.control||null,t,!1),AT(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),Mv(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Dl(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new Pl(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(uv(r||null,t),RT(i)&&(Da(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);xv(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&ET(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Fl(this.form,this),this._oldForm&&ka(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(r){return new(r||n)(G(Cs,10),G(Na,10),G(Ss,8))}}static{this.\u0275dir=le({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&Tt("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ct([NT]),He,jt]})}}return n})();var OT={provide:Yn,useExisting:Et(()=>VT)},VT=(()=>{class n extends Yn{set isDisabled(t){}static{this._ngModelWarningSentOnce=!1}constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new Ue,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Ov(this,s)}ngOnChanges(t){this._added||this._setUpControl(),Nv(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Pv(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(r){return new(r||n)(G(Gt,13),G(Cs,10),G(Na,10),G(Hr,10),G(Vv,8))}}static{this.\u0275dir=le({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[ct([OT]),He,jt]})}}return n})(),FT={provide:Hr,useExisting:Et(()=>Lv),multi:!0};function Fv(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function LT(n){return n.split(":")[0]}var Lv=(()=>{class n extends xa{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=Fv(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=LT(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Bt(n)))(i||n)}})()}static{this.\u0275dir=le({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Tt("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[ct([FT]),He]})}}return n})(),ZN=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(Fv(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(G(Ne),G(Kn),G(Lv,9))}}static{this.\u0275dir=le({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),UT={provide:Hr,useExisting:Et(()=>Uv),multi:!0};function fv(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function jT(n){return n.split(":")[0]}var Uv=(()=>{class n extends xa{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let c=0;c<o.length;c++){let u=o[c],d=this._getOptionValue(u.value);i.push(d)}}else{let o=r.options;for(let c=0;c<o.length;c++){let u=o[c];if(u.selected){let d=this._getOptionValue(u.value);i.push(d)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=jT(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Bt(n)))(i||n)}})()}static{this.\u0275dir=le({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Tt("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[ct([UT]),He]})}}return n})(),eM=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(fv(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(fv(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(G(Ne),G(Kn),G(Uv,9))}}static{this.\u0275dir=le({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();var BT=(()=>{class n{constructor(){this._validator=Ta}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Ta,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=le({type:n,features:[jt]})}}return n})();var $T={provide:Cs,useExisting:Et(()=>zT),multi:!0};var zT=(()=>{class n extends BT{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Qe,this.createValidator=t=>_v}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Bt(n)))(i||n)}})()}static{this.\u0275dir=le({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&vn("required",i._enabled?"":null)},inputs:{required:"required"},features:[ct([$T]),He]})}}return n})();var jv=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ye({type:n})}static{this.\u0275inj=be({})}}return n})(),xl=class extends Gr{constructor(e,t,r){super(Ol(t),Vl(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Dv(this,!1,e),e.forEach((r,i)=>{Rv(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function mv(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var tM=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),s={};return mv(r)?s=r:r!==null&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new Wr(i,s)}record(t,r=null){let i=this._reduceControls(t);return new kl(i,r)}control(t,r,i){let s={};return this.useNonNullable?(mv(r)?s=r:(s.validators=r,s.asyncValidators=i),new As(t,ce(N({},s),{nonNullable:!0}))):new As(t,r,i)}array(t,r,i){let s=t.map(o=>this._createControl(o));return new xl(s,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof As)return t;if(t instanceof Gr)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,s=t.length>2?t[2]:null;return this.control(r,i,s)}else return this.control(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var nM=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Ss,useValue:t.callSetDisabledState??Oa}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ye({type:n})}static{this.\u0275inj=be({imports:[jv]})}}return n})(),rM=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Vv,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Ss,useValue:t.callSetDisabledState??Oa}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ye({type:n})}static{this.\u0275inj=be({imports:[jv]})}}return n})();var Ul;try{Ul=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Ul=!1}var et=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Vg(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Ul)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(r){return new(r||n)(V(pt))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Kr,Bv=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function dM(){if(Kr)return Kr;if(typeof document!="object"||!document)return Kr=new Set(Bv),Kr;let n=document.createElement("input");return Kr=new Set(Bv.filter(e=>(n.setAttribute("type",e),n.type===e))),Kr}var Rs;function qT(){if(Rs==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Rs=!0}))}finally{Rs=Rs||!1}return Rs}function Qr(n){return qT()?n:!!n.capture}var Jn;function hM(){if(Jn==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Jn=!1,Jn;if("scrollBehavior"in document.documentElement.style)Jn=!0;else{let n=Element.prototype.scrollTo;n?Jn=!/\{\s*\[native code\]\s*\}/.test(n.toString()):Jn=!1}}return Jn}var Ll;function GT(){if(Ll==null){let n=typeof document<"u"?document.head:null;Ll=!!(n&&(n.createShadowRoot||n.attachShadow))}return Ll}function $v(n){if(GT()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Wt(n){return n.composedPath?n.composedPath()[0]:n.target}function zv(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function qv(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function WT(n){return n!=null&&`${n}`!="false"}function jl(n){return Array.isArray(n)?n:[n]}function pM(n){return n==null?"":typeof n=="string"?n:`${n}px`}function Xn(n){return n instanceof Ne?n.nativeElement:n}var HT=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var vM=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ye({type:n})}static{this.\u0275inj=be({providers:[HT]})}}return n})();var Gv=new Set,Zn,KT=(()=>{class n{constructor(t,r){this._platform=t,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):YT}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&QT(t,this._nonce),this._matchMedia(t)}static{this.\u0275fac=function(r){return new(r||n)(V(et),V(us,8))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function QT(n,e){if(!Gv.has(n))try{Zn||(Zn=document.createElement("style"),e&&Zn.setAttribute("nonce",e),Zn.setAttribute("type","text/css"),document.head.appendChild(Zn)),Zn.sheet&&(Zn.sheet.insertRule(`@media ${n} {body{ }}`,0),Gv.add(n))}catch(t){console.error(t)}}function YT(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var Hv=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new Ce}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return Wv(jl(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let i=Wv(jl(t)).map(o=>this._registerQuery(o).observable),s=Dr(i);return s=ra(s.pipe(Ut(1)),s.pipe(sa(1),ia(0))),s.pipe(J(o=>{let c={matches:!1,breakpoints:{}};return o.forEach(({matches:u,query:d})=>{c.matches=c.matches||u,c.breakpoints[d]=u}),c}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);let r=this._mediaMatcher.matchMedia(t),s={observable:new wt(o=>{let c=u=>this._zone.run(()=>o.next(u));return r.addListener(c),()=>{r.removeListener(c)}}).pipe(ss(r),J(({matches:o})=>({query:t,matches:o})),kr(this._destroySubject)),mql:r};return this._queries.set(t,s),s}static{this.\u0275fac=function(r){return new(r||n)(V(KT),V(oe))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Wv(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}var SM={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};var p0=200,$l=class{constructor(e,t){this._letterKeyStream=new Ce,this._items=[],this._selectedItemIndex=-1,this._pressedLetters=[],this._selectedItem=new Ce,this.selectedItem=this._selectedItem;let r=typeof t?.debounceInterval=="number"?t.debounceInterval:p0;t?.skipPredicate&&(this._skipPredicateFn=t.skipPredicate),this.setItems(e),this._setupKeyHandler(r)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(e){this._selectedItemIndex=e}setItems(e){this._items=e}handleKey(e){let t=e.keyCode;e.key&&e.key.length===1?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(e){this._letterKeyStream.pipe(we(t=>this._pressedLetters.push(t)),ia(e),ot(()=>this._pressedLetters.length>0),J(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(t=>{for(let r=1;r<this._items.length+1;r++){let i=(this._selectedItemIndex+r)%this._items.length,s=this._items[i];if(!this._skipPredicateFn?.(s)&&s.getLabel?.().toLocaleUpperCase().trim().indexOf(t)===0){this._selectedItem.next(s);break}}this._pressedLetters=[]})}},zl=class{constructor(e,t){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._typeaheadSubscription=na.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=r=>r.disabled,this.tabOut=new Ce,this.change=new Ce,e instanceof cl?this._itemChangesSubscription=e.changes.subscribe(r=>this._itemsChanged(r.toArray())):ul(e)&&(this._effectRef=Rg(()=>this._itemsChanged(e()),{injector:t}))}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){this._typeaheadSubscription.unsubscribe();let t=this._getItemsArray();return this._typeahead=new $l(t,{debounceInterval:typeof e=="number"?e:void 0,skipPredicate:r=>this._skipPredicateFn(r)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(r=>{this.setActiveItem(r)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,t=10){return this._pageUpAndDown={enabled:e,delta:t},this}setActiveItem(e){let t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){let t=e.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:this.tabOut.next();return;case 40:if(this._vertical&&i){this.setNextItemActive();break}else return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&i){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&i){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&i){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&i){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&i){let s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&i){let s=this._activeItemIndex+this._pageUpAndDown.delta,o=this._getItemsArray().length;this._setActiveItemByIndex(s<o?s:o-1,-1);break}else return;default:(i||qv(e,"shiftKey"))&&this._typeahead?.handleKey(e);return}this._typeahead?.reset(),e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){let t=this._getItemsArray(),r=typeof e=="number"?e:t.indexOf(e),i=t[r];this._activeItem=i??null,this._activeItemIndex=r,this._typeahead?.setCurrentSelectedItemIndex(r)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){let t=this._getItemsArray();for(let r=1;r<=t.length;r++){let i=(this._activeItemIndex+e*r+t.length)%t.length,s=t[i];if(!this._skipPredicateFn(s)){this.setActiveItem(i);return}}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){let r=this._getItemsArray();if(r[e]){for(;this._skipPredicateFn(r[e]);)if(e+=t,!r[e])return;this.setActiveItem(e)}}_getItemsArray(){return ul(this._items)?this._items():this._items instanceof cl?this._items.toArray():this._items}_itemsChanged(e){if(this._typeahead?.setItems(e),this._activeItem){let t=e.indexOf(this._activeItem);t>-1&&t!==this._activeItemIndex&&(this._activeItemIndex=t,this._typeahead?.setCurrentSelectedItemIndex(t))}}};var Kv=class extends zl{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}};function ql(n){return n.buttons===0||n.detail===0}function Gl(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var g0=new q("cdk-input-modality-detector-options"),v0={ignoreKeys:[18,17,224,91,16]},Jv=650,Yr=Qr({passive:!0,capture:!0}),_0=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,r,i,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Ke(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(c=>c===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Wt(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<Jv||(this._modality.next(ql(o)?"keyboard":"mouse"),this._mostRecentTarget=Wt(o))},this._onTouchstart=o=>{if(Gl(o)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Wt(o)},this._options=N(N({},v0),s),this.modalityDetected=this._modality.pipe(sa(1)),this.modalityChanged=this.modalityDetected.pipe(rl()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,Yr),i.addEventListener("mousedown",this._onMousedown,Yr),i.addEventListener("touchstart",this._onTouchstart,Yr)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Yr),document.removeEventListener("mousedown",this._onMousedown,Yr),document.removeEventListener("touchstart",this._onTouchstart,Yr))}static{this.\u0275fac=function(r){return new(r||n)(V(et),V(oe),V(me),V(g0,8))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),b0=new q("liveAnnouncerElement",{providedIn:"root",factory:y0});function y0(){return null}var I0=new q("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),w0=0,GM=(()=>{class n{constructor(t,r,i,s){this._ngZone=r,this._defaultOptions=s,this._document=i,this._liveElement=t||this._createLiveElement()}announce(t,...r){let i=this._defaultOptions,s,o;return r.length===1&&typeof r[0]=="number"?o=r[0]:[s,o]=r,this.clear(),clearTimeout(this._previousTimeout),s||(s=i&&i.politeness?i.politeness:"polite"),o==null&&i&&(o=i.duration),this._liveElement.setAttribute("aria-live",s),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(c=>this._currentResolve=c)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,typeof o=="number"&&(this._previousTimeout=setTimeout(()=>this.clear(),o)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){let t="cdk-live-announcer-element",r=this._document.getElementsByClassName(t),i=this._document.createElement("div");for(let s=0;s<r.length;s++)r[s].remove();return i.classList.add(t),i.classList.add("cdk-visually-hidden"),i.setAttribute("aria-atomic","true"),i.setAttribute("aria-live","polite"),i.id=`cdk-live-announcer-${w0++}`,this._document.body.appendChild(i),i}_exposeAnnouncerToModals(t){let r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let i=0;i<r.length;i++){let s=r[i],o=s.getAttribute("aria-owns");o?o.indexOf(t)===-1&&s.setAttribute("aria-owns",o+" "+t):s.setAttribute("aria-owns",t)}}static{this.\u0275fac=function(r){return new(r||n)(V(b0,8),V(oe),V(me),V(I0,8))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var La=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(La||{}),E0=new q("cdk-focus-monitor-default-options"),Fa=Qr({passive:!0,capture:!0}),Xv=(()=>{class n{constructor(t,r,i,s,o){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Ce,this._rootNodeFocusAndBlurListener=c=>{let u=Wt(c);for(let d=u;d;d=d.parentElement)c.type==="focus"?this._onFocus(c,d):this._onBlur(c,d)},this._document=s,this._detectionMode=o?.detectionMode||La.IMMEDIATE}monitor(t,r=!1){let i=Xn(t);if(!this._platform.isBrowser||i.nodeType!==1)return z();let s=$v(i)||this._getDocument(),o=this._elementInfo.get(i);if(o)return r&&(o.checkChildren=!0),o.subject;let c={checkChildren:r,subject:new Ce,rootNode:s};return this._elementInfo.set(i,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(t){let r=Xn(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){let s=Xn(t),o=this._getDocument().activeElement;s===o?this._getClosestElementsInfo(s).forEach(([c,u])=>this._originChanged(c,r,u)):(this._setOrigin(r),typeof s.focus=="function"&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===La.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused",r==="touch"),t.classList.toggle("cdk-keyboard-focused",r==="keyboard"),t.classList.toggle("cdk-mouse-focused",r==="mouse"),t.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=t,this._originFromTouchInteraction=t==="touch"&&r,this._detectionMode===La.IMMEDIATE){clearTimeout(this._originTimeoutId);let i=this._originFromTouchInteraction?Jv:1;this._originTimeoutId=setTimeout(()=>this._origin=null,i)}})}_onFocus(t,r){let i=this._elementInfo.get(r),s=Wt(t);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(t,r){let i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;let r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,Fa),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,Fa)}),this._rootNodeFocusListenerCount.set(r,i+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(kr(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){let r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Fa),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Fa),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){let r=[];return this._elementInfo.forEach((i,s)=>{(s===t||i.checkChildren&&s.contains(t))&&r.push([s,i])}),r}_isLastInteractionFromInputLabel(t){let{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if(i!=="mouse"||!r||r===t||t.nodeName!=="INPUT"&&t.nodeName!=="TEXTAREA"||t.disabled)return!1;let s=t.labels;if(s){for(let o=0;o<s.length;o++)if(s[o].contains(r))return!0}return!1}static{this.\u0275fac=function(r){return new(r||n)(V(oe),V(et),V(_0),V(me,8),V(E0,8))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var er=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(er||{}),Qv="cdk-high-contrast-black-on-white",Yv="cdk-high-contrast-white-on-black",Bl="cdk-high-contrast-active",Zv=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=O(Hv).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return er.NONE;let t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);let r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return er.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return er.BLACK_ON_WHITE}return er.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let t=this._document.body.classList;t.remove(Bl,Qv,Yv),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===er.BLACK_ON_WHITE?t.add(Bl,Qv):r===er.WHITE_ON_BLACK&&t.add(Bl,Yv)}}static{this.\u0275fac=function(r){return new(r||n)(V(et),V(me))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var A0=new q("cdk-dir-doc",{providedIn:"root",factory:C0});function C0(){return O(me)}var S0=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function R0(n){let e=n?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?S0.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var nO=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new Ue,t){let r=t.body?t.body.dir:null,i=t.documentElement?t.documentElement.dir:null;this.value=R0(r||i||"ltr")}}ngOnDestroy(){this.change.complete()}static{this.\u0275fac=function(r){return new(r||n)(V(A0,8))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Wl=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ye({type:n})}static{this.\u0275inj=be({})}}return n})();var k0=["mat-internal-form-field",""],x0=["*"];function N0(){return!0}var M0=new q("mat-sanity-checks",{providedIn:"root",factory:N0}),Jr=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return zv()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[t]}static{this.\u0275fac=function(r){return new(r||n)(V(Zv),V(M0,8),V(me))}}static{this.\u0275mod=ye({type:n})}static{this.\u0275inj=be({imports:[Wl,Wl]})}}return n})();var e_=class{constructor(e,t,r,i,s){this._defaultMatcher=e,this.ngControl=t,this._parentFormGroup=r,this._parentForm=i,this._stateChanges=s,this.errorState=!1}updateErrorState(){let e=this.errorState,t=this._parentFormGroup||this._parentForm,r=this.matcher||this._defaultMatcher,i=this.ngControl?this.ngControl.control:null,s=r?.isErrorState(i,t)??!1;s!==e&&(this.errorState=s,this._stateChanges.next())}};var xO=(()=>{class n{isErrorState(t,r){return!!(t&&t.invalid&&(t.touched||r&&r.submitted))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ut=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(ut||{}),Ql=class{constructor(e,t,r,i=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=ut.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},t_=Qr({passive:!0,capture:!0}),Yl=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let t=Wt(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,r,i){let s=this._events.get(t);if(s){let o=s.get(r);o?o.add(i):s.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,t_)})}removeHandler(e,t,r){let i=this._events.get(e);if(!i)return;let s=i.get(t);s&&(s.delete(r),s.size===0&&i.delete(t),i.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,t_)))}},n_={enterDuration:225,exitDuration:150},O0=800,r_=Qr({passive:!0,capture:!0}),i_=["mousedown","touchstart"],s_=["mouseup","mouseleave","touchend","touchcancel"],Jl=class n{static{this._eventManager=new Yl}constructor(e,t,r,i){this._target=e,this._ngZone=t,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Xn(r))}fadeInRipple(e,t,r={}){let i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=N(N({},n_),r.animation);r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);let o=r.radius||V0(e,t,i),c=e-i.left,u=t-i.top,d=s.enterDuration,f=document.createElement("div");f.classList.add("mat-ripple-element"),f.style.left=`${c-o}px`,f.style.top=`${u-o}px`,f.style.height=`${o*2}px`,f.style.width=`${o*2}px`,r.color!=null&&(f.style.backgroundColor=r.color),f.style.transitionDuration=`${d}ms`,this._containerElement.appendChild(f);let p=window.getComputedStyle(f),w=p.transitionProperty,C=p.transitionDuration,k=w==="none"||C==="0s"||C==="0s, 0s"||i.width===0&&i.height===0,P=new Ql(this,f,r,k);f.style.transform="scale3d(1, 1, 1)",P.state=ut.FADING_IN,r.persistent||(this._mostRecentTransientRipple=P);let R=null;return!k&&(d||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let j=()=>{R&&(R.fallbackTimer=null),clearTimeout(U),this._finishRippleTransition(P)},W=()=>this._destroyRipple(P),U=setTimeout(W,d+100);f.addEventListener("transitionend",j),f.addEventListener("transitioncancel",W),R={onTransitionEnd:j,onTransitionCancel:W,fallbackTimer:U}}),this._activeRipples.set(P,R),(k||!d)&&this._finishRippleTransition(P),P}fadeOutRipple(e){if(e.state===ut.FADING_OUT||e.state===ut.HIDDEN)return;let t=e.element,r=N(N({},n_),e.config.animation);t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=ut.FADING_OUT,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let t=Xn(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,i_.forEach(r=>{n._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{s_.forEach(t=>{this._triggerElement.addEventListener(t,this,r_)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===ut.FADING_IN?this._startFadeOutTransition(e):e.state===ut.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=ut.VISIBLE,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=ut.HIDDEN,t!==null&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel),t.fallbackTimer!==null&&clearTimeout(t.fallbackTimer)),e.element.remove()}_onMousedown(e){let t=ql(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+O0;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!Gl(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let t=e.state===ut.VISIBLE||e.config.terminateOnPointerUp&&e.state===ut.FADING_IN;!e.config.persistent&&t&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(i_.forEach(t=>n._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(s_.forEach(t=>e.removeEventListener(t,this,r_)),this._pointerUpEventsRegistered=!1))}};function V0(n,e,t){let r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}var u_=new q("mat-ripple-global-options"),F0=(()=>{class n{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,r,i,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new Jl(this,r,t,i)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:N(N(N({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return typeof t=="number"?this._rippleRenderer.fadeInRipple(t,r,N(N({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,N(N({},this.rippleConfig),t))}static{this.\u0275fac=function(r){return new(r||n)(G(Ne),G(oe),G(et),G(u_,8),G(cs,8))}}static{this.\u0275dir=le({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,i){r&2&&$t("mat-ripple-unbounded",i.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0})}}return n})(),l_=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ye({type:n})}static{this.\u0275inj=be({imports:[Jr,Jr]})}}return n})();var NO=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ye({type:n})}static{this.\u0275inj=be({imports:[Jr]})}}return n})();var o_={capture:!0},a_=["focus","mousedown","mouseenter","touchstart"],Hl="mat-ripple-loader-uninitialized",Kl="mat-ripple-loader-class-name",c_="mat-ripple-loader-centered",Ua="mat-ripple-loader-disabled",d_=(()=>{class n{constructor(){this._document=O(me,{optional:!0}),this._animationMode=O(cs,{optional:!0}),this._globalRippleOptions=O(u_,{optional:!0}),this._platform=O(et),this._ngZone=O(oe),this._hosts=new Map,this._onInteraction=t=>{let r=Wt(t);if(r instanceof HTMLElement){let i=r.closest(`[${Hl}="${this._globalRippleOptions?.namespace??""}"]`);i&&this._createRipple(i)}},this._ngZone.runOutsideAngular(()=>{for(let t of a_)this._document?.addEventListener(t,this._onInteraction,o_)})}ngOnDestroy(){let t=this._hosts.keys();for(let r of t)this.destroyRipple(r);for(let r of a_)this._document?.removeEventListener(r,this._onInteraction,o_)}configureRipple(t,r){t.setAttribute(Hl,this._globalRippleOptions?.namespace??""),(r.className||!t.hasAttribute(Kl))&&t.setAttribute(Kl,r.className||""),r.centered&&t.setAttribute(c_,""),r.disabled&&t.setAttribute(Ua,"")}getRipple(t){return this._hosts.get(t)||this._createRipple(t)}setDisabled(t,r){let i=this._hosts.get(t);if(i){i.disabled=r;return}r?t.setAttribute(Ua,""):t.removeAttribute(Ua)}_createRipple(t){if(!this._document)return;let r=this._hosts.get(t);if(r)return r;t.querySelector(".mat-ripple")?.remove();let i=this._document.createElement("span");i.classList.add("mat-ripple",t.getAttribute(Kl)),t.append(i);let s=new F0(new Ne(i),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return s._isInitialized=!0,s.trigger=t,s.centered=t.hasAttribute(c_),s.disabled=t.hasAttribute(Ua),this.attachRipple(t,s),s}attachRipple(t,r){t.removeAttribute(Hl),this._hosts.set(t,r)}destroyRipple(t){let r=this._hosts.get(t);r&&(r.ngOnDestroy(),this._hosts.delete(t))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),MO=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=xr({type:n,selectors:[["div","mat-internal-form-field",""]],hostAttrs:[1,"mdc-form-field","mat-internal-form-field"],hostVars:2,hostBindings:function(r,i){r&2&&$t("mdc-form-field--align-end",i.labelPosition==="before")},inputs:{labelPosition:"labelPosition"},standalone:!0,features:[Lr],attrs:k0,ngContentSelectors:x0,decls:1,vars:0,template:function(r,i){r&1&&(ca(),Fr(0))},styles:[".mat-internal-form-field{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:inline-flex;align-items:center;vertical-align:middle}.mat-internal-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mat-internal-form-field>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end .mdc-form-field--align-end label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0}"],encapsulation:2,changeDetection:0})}}return n})();var L0=["mat-button",""],U0=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],j0=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var B0=new q("MAT_BUTTON_CONFIG");var $0=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],z0=(()=>{class n{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(t){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,t)}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=t,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._updateRippleDisabled()}constructor(t,r,i,s){this._elementRef=t,this._platform=r,this._ngZone=i,this._animationMode=s,this._focusMonitor=O(Xv),this._rippleLoader=O(d_),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let o=O(B0,{optional:!0}),c=t.nativeElement,u=c.classList;this.disabledInteractive=o?.disabledInteractive??!1,this.color=o?.color??null,this._rippleLoader?.configureRipple(c,{className:"mat-mdc-button-ripple"});for(let{attribute:d,mdcClasses:f}of $0)c.hasAttribute(d)&&u.add(...f)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(t="program",r){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static{this.\u0275fac=function(r){aa()}}static{this.\u0275dir=le({type:n,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",Qe],disabled:[2,"disabled","disabled",Qe],ariaDisabled:[2,"aria-disabled","ariaDisabled",Qe],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Qe]},features:[Qn]})}}return n})();var QO=(()=>{class n extends z0{constructor(t,r,i,s){super(t,r,i,s)}static{this.\u0275fac=function(r){return new(r||n)(G(Ne),G(et),G(oe),G(cs,8))}}static{this.\u0275cmp=xr({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(r,i){r&2&&(vn("disabled",i._getDisabledAttribute())("aria-disabled",i._getAriaDisabled()),Ag(i.color?"mat-"+i.color:""),$t("mat-mdc-button-disabled",i.disabled)("mat-mdc-button-disabled-interactive",i.disabledInteractive)("_mat-animation-noopable",i._animationMode==="NoopAnimations")("mat-unthemed",!i.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[He,Lr],attrs:L0,ngContentSelectors:j0,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,i){r&1&&(ca(U0),Vr(0,"span",0),Fr(1),hl(2,"span",1),Fr(3,1),fl(),Fr(4,2),Vr(5,"span",2)(6,"span",3)),r&2&&$t("mdc-button__ripple",!i._isFab)("mdc-fab__ripple",i._isFab)},styles:['.mat-mdc-button-base{text-decoration:none}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-text-button-horizontal-padding, 8px);height:var(--mdc-text-button-container-height);font-family:var(--mdc-text-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-text-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-text-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-text-button-label-text-transform);font-weight:var(--mdc-text-button-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color, var(--mat-app-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mat-app-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, var(--mat-app-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-filled-button-horizontal-padding, 16px);height:var(--mdc-filled-button-container-height);font-family:var(--mdc-filled-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-filled-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-filled-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-filled-button-label-text-transform);font-weight:var(--mdc-filled-button-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color, var(--mat-app-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, var(--mat-app-on-primary));background-color:var(--mdc-filled-button-container-color, var(--mat-app-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mat-app-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow, var(--mat-app-level1));height:var(--mdc-protected-button-container-height);font-family:var(--mdc-protected-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-protected-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-protected-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-protected-button-label-text-transform);font-weight:var(--mdc-protected-button-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color, var(--mat-app-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, var(--mat-app-primary));background-color:var(--mdc-protected-button-container-color, var(--mat-app-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mat-app-corner-full))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow, var(--mat-app-level2))}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow, var(--mat-app-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow, var(--mat-app-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow, var(--mat-app-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-outlined-button-horizontal-padding, 15px);height:var(--mdc-outlined-button-container-height);font-family:var(--mdc-outlined-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-outlined-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-outlined-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-outlined-button-label-text-transform);font-weight:var(--mdc-outlined-button-label-text-weight, var(--mat-app-label-large-weight));border-radius:var(--mdc-outlined-button-container-shape, var(--mat-app-corner-full));border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color, var(--mat-app-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, var(--mat-app-primary));border-color:var(--mdc-outlined-button-outline-color, var(--mat-app-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button .mdc-button__ripple{border-width:var(--mdc-outlined-button-outline-width);border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}}return n})();var YO=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ye({type:n})}static{this.\u0275inj=be({imports:[Jr,l_,Jr]})}}return n})();var X="primary",zs=Symbol("RouteTitle"),nd=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function ri(n){return new nd(n)}function q0(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],c=n[s];if(o[0]===":")i[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function G0(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!At(n[t],e[t]))return!1;return!0}function At(n,e){let t=n?rd(n):void 0,r=e?rd(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!w_(n[i],e[i]))return!1;return!0}function rd(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function w_(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function E_(n){return n.length>0?n[n.length-1]:null}function An(n){return Zu(n)?n:la(n)?Re(Promise.resolve(n)):z(n)}var W0={exact:A_,subset:C_},T_={exact:H0,subset:K0,ignored:()=>!0};function h_(n,e,t){return W0[t.paths](n.root,e.root,t.matrixParams)&&T_[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function H0(n,e){return At(n,e)}function A_(n,e,t){if(!nr(n.segments,e.segments)||!$a(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!A_(n.children[r],e.children[r],t))return!1;return!0}function K0(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>w_(n[t],e[t]))}function C_(n,e,t){return S_(n,e,e.segments,t)}function S_(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!nr(i,t)||e.hasChildren()||!$a(i,t,r))}else if(n.segments.length===t.length){if(!nr(n.segments,t)||!$a(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!C_(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!nr(n.segments,i)||!$a(n.segments,i,r)||!n.children[X]?!1:S_(n.children[X],e,s,r)}}function $a(n,e,t){return e.every((r,i)=>T_[t](n[i].parameters,r.parameters))}var Kt=class{constructor(e=new ae([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ri(this.queryParams),this._queryParamMap}toString(){return J0.serialize(this)}},ae=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return za(this)}},tr=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=ri(this.parameters),this._parameterMap}toString(){return D_(this)}};function Q0(n,e){return nr(n,e)&&n.every((t,r)=>At(t.parameters,e[r].parameters))}function nr(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function Y0(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===X&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==X&&(t=t.concat(e(i,r)))}),t}var qs=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:()=>new ii,providedIn:"root"})}}return n})(),ii=class{parse(e){let t=new sd(e);return new Kt(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Ds(e.root,!0)}`,r=eA(e.queryParams),i=typeof e.fragment=="string"?`#${X0(e.fragment)}`:"";return`${t}${r}${i}`}},J0=new ii;function za(n){return n.segments.map(e=>D_(e)).join("/")}function Ds(n,e){if(!n.hasChildren())return za(n);if(e){let t=n.children[X]?Ds(n.children[X],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==X&&r.push(`${i}:${Ds(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=Y0(n,(r,i)=>i===X?[Ds(n.children[X],!1)]:[`${i}:${Ds(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[X]!=null?`${za(n)}/${t[0]}`:`${za(n)}/(${t.join("//")})`}}function R_(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ja(n){return R_(n).replace(/%3B/gi,";")}function X0(n){return encodeURI(n)}function id(n){return R_(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function qa(n){return decodeURIComponent(n)}function f_(n){return qa(n.replace(/\+/g,"%20"))}function D_(n){return`${id(n.path)}${Z0(n.parameters)}`}function Z0(n){return Object.entries(n).map(([e,t])=>`;${id(e)}=${id(t)}`).join("")}function eA(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${ja(t)}=${ja(i)}`).join("&"):`${ja(t)}=${ja(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var tA=/^[^\/()?;#]+/;function Xl(n){let e=n.match(tA);return e?e[0]:""}var nA=/^[^\/()?;=#]+/;function rA(n){let e=n.match(nA);return e?e[0]:""}var iA=/^[^=?&#]+/;function sA(n){let e=n.match(iA);return e?e[0]:""}var oA=/^[^&#]+/;function aA(n){let e=n.match(oA);return e?e[0]:""}var sd=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ae([],{}):new ae([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[X]=new ae(e,t)),r}parseSegment(){let e=Xl(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new he(4009,!1);return this.capture(e),new tr(qa(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=rA(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Xl(this.remaining);i&&(r=i,this.capture(r))}e[qa(t)]=qa(r)}parseQueryParam(e){let t=sA(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=aA(this.remaining);o&&(r=o,this.capture(r))}let i=f_(t),s=f_(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Xl(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new he(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=X);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[X]:new ae([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new he(4011,!1)}};function P_(n){return n.segments.length>0?new ae([],{[X]:n}):n}function k_(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=k_(i);if(r===X&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))e[o]=c;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new ae(n.segments,e);return cA(t)}function cA(n){if(n.numberOfChildren===1&&n.children[X]){let e=n.children[X];return new ae(n.segments.concat(e.segments),e.children)}return n}function rr(n){return n instanceof Kt}function uA(n,e,t=null,r=null){let i=x_(n);return N_(i,e,t,r)}function x_(n){let e;function t(s){let o={};for(let u of s.children){let d=t(u);o[u.outlet]=d}let c=new ae(s.url,o);return s===n&&(e=c),c}let r=t(n.root),i=P_(r);return e??i}function N_(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Zl(i,i,i,t,r);let s=lA(e);if(s.toRoot())return Zl(i,i,new ae([],{}),t,r);let o=dA(s,i,n),c=o.processChildren?xs(o.segmentGroup,o.index,s.commands):O_(o.segmentGroup,o.index,s.commands);return Zl(i,o.segmentGroup,c,t,r)}function Ga(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Os(n){return typeof n=="object"&&n!=null&&n.outlets}function Zl(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([u,d])=>{s[u]=Array.isArray(d)?d.map(f=>`${f}`):`${d}`});let o;n===e?o=t:o=M_(n,e,t);let c=P_(k_(o));return new Kt(c,s,i)}function M_(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=M_(s,e,t)}),new ae(n.segments,r)}var Wa=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ga(r[0]))throw new he(4003,!1);let i=r.find(Os);if(i&&i!==E_(r))throw new he(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function lA(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Wa(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([u,d])=>{c[u]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:c}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?t=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,s]},[]);return new Wa(t,e,r)}var ei=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function dA(n,e,t){if(n.isAbsolute)return new ei(e,!0,0);if(!t)return new ei(e,!1,NaN);if(t.parent===null)return new ei(t,!0,0);let r=Ga(n.commands[0])?0:1,i=t.segments.length-1+r;return hA(t,i,n.numberOfDoubleDots)}function hA(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new he(4005,!1);i=r.segments.length}return new ei(r,!1,i-s)}function fA(n){return Os(n[0])?n[0].outlets:{[X]:n}}function O_(n,e,t){if(n??=new ae([],{}),n.segments.length===0&&n.hasChildren())return xs(n,e,t);let r=mA(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new ae(n.segments.slice(0,r.pathIndex),{});return s.children[X]=new ae(n.segments.slice(r.pathIndex),n.children),xs(s,0,i)}else return r.match&&i.length===0?new ae(n.segments,{}):r.match&&!n.hasChildren()?od(n,e,t):r.match?xs(n,0,i):od(n,e,t)}function xs(n,e,t){if(t.length===0)return new ae(n.segments,{});{let r=fA(t),i={};if(Object.keys(r).some(s=>s!==X)&&n.children[X]&&n.numberOfChildren===1&&n.children[X].segments.length===0){let s=xs(n.children[X],e,t);return new ae(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=O_(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new ae(n.segments,i)}}function mA(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],c=t[r];if(Os(c))break;let u=`${c}`,d=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&d&&typeof d=="object"&&d.outlets===void 0){if(!p_(u,d,o))return s;r+=2}else{if(!p_(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function od(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Os(s)){let u=pA(s.outlets);return new ae(r,u)}if(i===0&&Ga(t[0])){let u=n.segments[e];r.push(new tr(u.path,m_(t[0]))),i++;continue}let o=Os(s)?s.outlets[X]:`${s}`,c=i<t.length-1?t[i+1]:null;o&&c&&Ga(c)?(r.push(new tr(o,m_(c))),i+=2):(r.push(new tr(o,{})),i++)}return new ae(r,{})}function pA(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=od(new ae([],{}),0,r))}),e}function m_(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function p_(n,e,t){return n==t.path&&At(e,t.parameters)}var Ns="imperative",De=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(De||{}),lt=class{constructor(e,t){this.id=e,this.url=t}},si=class extends lt{constructor(e,t,r="imperative",i=null){super(e,t),this.type=De.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ct=class extends lt{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=De.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},nt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(nt||{}),Ha=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Ha||{}),Ht=class extends lt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=De.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},En=class extends lt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=De.NavigationSkipped}},Vs=class extends lt{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=De.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ka=class extends lt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=De.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ad=class extends lt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=De.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cd=class extends lt{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=De.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},ud=class extends lt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=De.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ld=class extends lt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=De.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dd=class{constructor(e){this.route=e,this.type=De.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},hd=class{constructor(e){this.route=e,this.type=De.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},fd=class{constructor(e){this.snapshot=e,this.type=De.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},md=class{constructor(e){this.snapshot=e,this.type=De.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pd=class{constructor(e){this.snapshot=e,this.type=De.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gd=class{constructor(e){this.snapshot=e,this.type=De.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qa=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=De.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Fs=class{},oi=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function gA(n,e){return n.providers&&!n._injector&&(n._injector=ll(n.providers,e,`Route: ${n.path}`)),n._injector??e}function vt(n){return n.outlet||X}function vA(n,e){let t=n.filter(r=>vt(r)===e);return t.push(...n.filter(r=>vt(r)!==e)),t}function Gs(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var vd=class{get injector(){return Gs(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Ws(this.rootInjector),this.attachRef=null}},Ws=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new vd(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(V(Wn))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ya=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=_d(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=_d(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=bd(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return bd(e,this._root).map(t=>t.value)}};function _d(n,e){if(n===e.value)return e;for(let t of e.children){let r=_d(n,t);if(r)return r}return null}function bd(n,e){if(n===e.value)return[e];for(let t of e.children){let r=bd(n,t);if(r.length)return r.unshift(e),r}return[]}var tt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Zr(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Ja=class extends Ya{constructor(e,t){super(e),this.snapshot=t,Rd(this,e)}toString(){return this.snapshot.toString()}};function V_(n){let e=_A(n),t=new Ke([new tr("",{})]),r=new Ke({}),i=new Ke({}),s=new Ke({}),o=new Ke(""),c=new Tn(t,r,s,o,i,X,n,e.root);return c.snapshot=e.root,new Ja(new tt(c,[]),e)}function _A(n){let e={},t={},r={},i="",s=new ti([],e,r,i,t,X,n,null,{});return new Za("",new tt(s,[]))}var Tn=class{constructor(e,t,r,i,s,o,c,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(J(d=>d[zs]))??z(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(J(e=>ri(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(J(e=>ri(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Xa(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:N(N({},e.params),n.params),data:N(N({},e.data),n.data),resolve:N(N(N(N({},n.data),e.data),i?.data),n._resolvedData)}:r={params:N({},n.params),data:N({},n.data),resolve:N(N({},n.data),n._resolvedData??{})},i&&L_(i)&&(r.resolve[zs]=i.title),r}var ti=class{get title(){return this.data?.[zs]}constructor(e,t,r,i,s,o,c,u,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=c,this.routeConfig=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ri(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ri(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Za=class extends Ya{constructor(e,t){super(t),this.url=e,Rd(this,t)}toString(){return F_(this._root)}};function Rd(n,e){e.value._routerState=n,e.children.forEach(t=>Rd(n,t))}function F_(n){let e=n.children.length>0?` { ${n.children.map(F_).join(", ")} } `:"";return`${n.value}${e}`}function ed(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,At(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),At(e.params,t.params)||n.paramsSubject.next(t.params),G0(e.url,t.url)||n.urlSubject.next(t.url),At(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function yd(n,e){let t=At(n.params,e.params)&&Q0(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||yd(n.parent,e.parent))}function L_(n){return typeof n.title=="string"||n.title===null}var bA=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=X,this.activateEvents=new Ue,this.deactivateEvents=new Ue,this.attachEvents=new Ue,this.detachEvents=new Ue,this.parentContexts=O(Ws),this.location=O(Eg),this.changeDetector=O(jr),this.inputBinder=O(rc,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new he(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new he(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new he(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new he(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new Id(t,c,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=le({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[jt]})}}return n})(),Id=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Tn?this.route:e===Ws?this.childContexts:this.parent.get(e,t)}},rc=new q(""),g_=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Dr([r.queryParams,r.params,r.data]).pipe(Ze(([s,o,c],u)=>(c=N(N(N({},s),o),c),u===0?z(c):Promise.resolve(c)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let o=Dg(r.component);if(!o){this.unsubscribeFromRouteData(t);return}for(let{templateName:c}of o.inputs)t.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})();function yA(n,e,t){let r=Ls(n,e._root,t?t._root:void 0);return new Ja(r,e)}function Ls(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=IA(n,e,t);return new tt(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(c=>Ls(n,c)),o}}let r=wA(e.value),i=e.children.map(s=>Ls(n,s));return new tt(r,i)}}function IA(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ls(n,r,i);return Ls(n,r)})}function wA(n){return new Tn(new Ke(n.url),new Ke(n.params),new Ke(n.queryParams),new Ke(n.fragment),new Ke(n.data),n.outlet,n.component,n)}var Us=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},U_="ngNavigationCancelingError";function ec(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=rr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=j_(!1,nt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function j_(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[U_]=!0,t.cancellationCode=e,t}function EA(n){return B_(n)&&rr(n.url)}function B_(n){return!!n&&n[U_]}var TA=(n,e,t,r)=>J(i=>(new wd(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),wd=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ed(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Zr(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Zr(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Zr(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Zr(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new gd(s.value.snapshot))}),e.children.length&&this.forwardEvent(new md(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(ed(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),ed(c.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},tc=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ni=class{constructor(e,t){this.component=e,this.route=t}};function AA(n,e,t){let r=n._root,i=e?e._root:null;return Ps(r,i,t,[r.value])}function CA(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ci(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!cg(n)?n:e.get(n):r}function Ps(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Zr(e);return n.children.forEach(o=>{SA(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>Ms(c,t.getContext(o),i)),i}function SA(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=RA(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new tc(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Ps(n,e,c?c.children:null,r,i):Ps(n,e,t,r,i),u&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new ni(c.outlet.component,o))}else o&&Ms(e,c,i),i.canActivateChecks.push(new tc(r)),s.component?Ps(n,null,c?c.children:null,r,i):Ps(n,null,t,r,i);return i}function RA(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!nr(n.url,e.url);case"pathParamsOrQueryParamsChange":return!nr(n.url,e.url)||!At(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!yd(n,e)||!At(n.queryParams,e.queryParams);case"paramsChange":default:return!yd(n,e)}}function Ms(n,e,t){let r=Zr(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Ms(o,e.children.getContext(s),t):Ms(o,null,t):Ms(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ni(e.outlet.component,i)):t.canDeactivateChecks.push(new ni(null,i)):t.canDeactivateChecks.push(new ni(null,i))}function Hs(n){return typeof n=="function"}function DA(n){return typeof n=="boolean"}function PA(n){return n&&Hs(n.canLoad)}function kA(n){return n&&Hs(n.canActivate)}function xA(n){return n&&Hs(n.canActivateChild)}function NA(n){return n&&Hs(n.canDeactivate)}function MA(n){return n&&Hs(n.canMatch)}function $_(n){return n instanceof ig||n?.name==="EmptyError"}var Ba=Symbol("INITIAL_VALUE");function ai(){return Ze(n=>Dr(n.map(e=>e.pipe(Ut(1),ss(Ba)))).pipe(J(e=>{for(let t of e)if(t!==!0){if(t===Ba)return Ba;if(t===!1||OA(t))return t}return!0}),ot(e=>e!==Ba),Ut(1)))}function OA(n){return rr(n)||n instanceof Us}function VA(n,e){return Xe(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?z(ce(N({},t),{guardsResult:!0})):FA(o,r,i,n).pipe(Xe(c=>c&&DA(c)?LA(r,s,n,e):z(c)),J(c=>ce(N({},t),{guardsResult:c})))})}function FA(n,e,t,r){return Re(n).pipe(Xe(i=>zA(i.component,i.route,t,e,r)),gn(i=>i!==!0,!0))}function LA(n,e,t,r){return Re(e).pipe(pn(i=>ra(jA(i.route.parent,r),UA(i.route,r),$A(n,i.path,t),BA(n,i.route,t))),gn(i=>i!==!0,!0))}function UA(n,e){return n!==null&&e&&e(new pd(n)),z(!0)}function jA(n,e){return n!==null&&e&&e(new fd(n)),z(!0)}function BA(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return z(!0);let i=r.map(s=>tl(()=>{let o=Gs(e)??t,c=ci(s,o),u=kA(c)?c.canActivate(e,n):at(o,()=>c(e,n));return An(u).pipe(gn())}));return z(i).pipe(ai())}function $A(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>CA(o)).filter(o=>o!==null).map(o=>tl(()=>{let c=o.guards.map(u=>{let d=Gs(o.node)??t,f=ci(u,d),p=xA(f)?f.canActivateChild(r,n):at(d,()=>f(r,n));return An(p).pipe(gn())});return z(c).pipe(ai())}));return z(s).pipe(ai())}function zA(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return z(!0);let o=s.map(c=>{let u=Gs(e)??i,d=ci(c,u),f=NA(d)?d.canDeactivate(n,e,t,r):at(u,()=>d(n,e,t,r));return An(f).pipe(gn())});return z(o).pipe(ai())}function qA(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return z(!0);let s=i.map(o=>{let c=ci(o,n),u=PA(c)?c.canLoad(e,t):at(n,()=>c(e,t));return An(u)});return z(s).pipe(ai(),z_(r))}function z_(n){return Hu(we(e=>{if(typeof e!="boolean")throw ec(n,e)}),J(e=>e===!0))}function GA(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return z(!0);let s=i.map(o=>{let c=ci(o,n),u=MA(c)?c.canMatch(e,t):at(n,()=>c(e,t));return An(u)});return z(s).pipe(ai(),z_(r))}var js=class{constructor(e){this.segmentGroup=e||null}},Bs=class extends Error{constructor(e){super(),this.urlTree=e}};function Xr(n){return is(new js(n))}function WA(n){return is(new he(4e3,!1))}function HA(n){return is(j_(!1,nt.GuardRejected))}var Ed=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return z(r);if(i.numberOfChildren>1||!i.children[X])return WA(`${e.redirectTo}`);i=i.children[X]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let c=t,{queryParams:u,fragment:d,routeConfig:f,url:p,outlet:w,params:C,data:k,title:P}=i,R=at(s,()=>c({params:C,data:k,queryParams:u,fragment:d,routeConfig:f,url:p,outlet:w,title:P}));if(R instanceof Kt)throw new Bs(R);t=R}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Bs(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Kt(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let c=s.substring(1);r[i]=t[c]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([c,u])=>{o[c]=this.createSegmentGroup(e,u,r,i)}),new ae(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new he(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Td={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function KA(n,e,t,r,i){let s=q_(n,e,t);return s.matched?(r=gA(e,r),GA(r,e,t,i).pipe(J(o=>o===!0?s:N({},Td)))):z(s)}function q_(n,e,t){if(e.path==="**")return QA(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?N({},Td):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||q0)(t,n,e);if(!i)return N({},Td);let s={};Object.entries(i.posParams??{}).forEach(([c,u])=>{s[c]=u.path});let o=i.consumed.length>0?N(N({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function QA(n){return{matched:!0,parameters:n.length>0?E_(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function v_(n,e,t,r){return t.length>0&&XA(n,t,r)?{segmentGroup:new ae(e,JA(r,new ae(t,n.children))),slicedSegments:[]}:t.length===0&&ZA(n,t,r)?{segmentGroup:new ae(n.segments,YA(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ae(n.segments,n.children),slicedSegments:t}}function YA(n,e,t,r){let i={};for(let s of t)if(ic(n,e,s)&&!r[vt(s)]){let o=new ae([],{});i[vt(s)]=o}return N(N({},r),i)}function JA(n,e){let t={};t[X]=e;for(let r of n)if(r.path===""&&vt(r)!==X){let i=new ae([],{});t[vt(r)]=i}return t}function XA(n,e,t){return t.some(r=>ic(n,e,r)&&vt(r)!==X)}function ZA(n,e,t){return t.some(r=>ic(n,e,r))}function ic(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function eC(n,e,t){return e.length===0&&!n.children[t]}var Ad=class{};function tC(n,e,t,r,i,s,o="emptyOnly"){return new Cd(n,e,t,r,i,o,s).recognize()}var nC=31,Cd=class{constructor(e,t,r,i,s,o,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new Ed(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new he(4002,`'${e.segmentGroup}'`)}recognize(){let e=v_(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(J(({children:t,rootSnapshot:r})=>{let i=new tt(r,t),s=new Za("",i),o=uA(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new ti([],Object.freeze({}),Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),X,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,X,t).pipe(J(r=>({children:r,rootSnapshot:t})),Pr(r=>{if(r instanceof Bs)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof js?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(J(o=>o instanceof tt?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Re(s).pipe(pn(o=>{let c=r.children[o],u=vA(t,o);return this.processSegmentGroup(e,u,c,o,i)}),sl((o,c)=>(o.push(...c),o)),nl(null),ag(),Xe(o=>{if(o===null)return Xr(r);let c=G_(o);return rC(c),z(c)}))}processSegment(e,t,r,i,s,o,c){return Re(t).pipe(pn(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,s,o,c).pipe(Pr(d=>{if(d instanceof js)return z(null);throw d}))),gn(u=>!!u),Pr(u=>{if($_(u))return eC(r,i,s)?z(new Ad):Xr(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,s,o,c,u){return vt(r)!==o&&(o===X||!ic(i,s,r))?Xr(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,u):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,u):Xr(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,c){let{matched:u,parameters:d,consumedSegments:f,positionalParamSegments:p,remainingSegments:w}=q_(t,i,s);if(!u)return Xr(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>nC&&(this.allowRedirects=!1));let C=new ti(s,d,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,__(i),vt(i),i.component??i._loadedComponent??null,i,b_(i)),k=Xa(C,c,this.paramsInheritanceStrategy);C.params=Object.freeze(k.params),C.data=Object.freeze(k.data);let P=this.applyRedirects.applyRedirectCommands(f,i.redirectTo,p,C,e);return this.applyRedirects.lineralizeSegments(i,P).pipe(Xe(R=>this.processSegment(e,r,t,R.concat(w),o,!1,c)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let c=KA(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),c.pipe(Ze(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ze(({routes:d})=>{let f=r._loadedInjector??e,{parameters:p,consumedSegments:w,remainingSegments:C}=u,k=new ti(w,p,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,__(r),vt(r),r.component??r._loadedComponent??null,r,b_(r)),P=Xa(k,o,this.paramsInheritanceStrategy);k.params=Object.freeze(P.params),k.data=Object.freeze(P.data);let{segmentGroup:R,slicedSegments:j}=v_(t,w,C,d);if(j.length===0&&R.hasChildren())return this.processChildren(f,d,R,k).pipe(J(U=>new tt(k,U)));if(d.length===0&&j.length===0)return z(new tt(k,[]));let W=vt(r)===s;return this.processSegment(f,d,R,j,W?X:s,!0,k).pipe(J(U=>new tt(k,U instanceof tt?[U]:[])))}))):Xr(t)))}getChildConfig(e,t,r){return t.children?z({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?z({routes:t._loadedRoutes,injector:t._loadedInjector}):qA(e,t,r,this.urlSerializer).pipe(Xe(i=>i?this.configLoader.loadChildren(e,t).pipe(we(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):HA(t))):z({routes:[],injector:e})}};function rC(n){n.sort((e,t)=>e.value.outlet===X?-1:t.value.outlet===X?1:e.value.outlet.localeCompare(t.value.outlet))}function iC(n){let e=n.value.routeConfig;return e&&e.path===""}function G_(n){let e=[],t=new Set;for(let r of n){if(!iC(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=G_(r.children);e.push(new tt(r.value,i))}return e.filter(r=>!t.has(r))}function __(n){return n.data||{}}function b_(n){return n.resolve||{}}function sC(n,e,t,r,i,s){return Xe(o=>tC(n,e,t,r,o.extractedUrl,i,s).pipe(J(({state:c,tree:u})=>ce(N({},o),{targetSnapshot:c,urlAfterRedirects:u}))))}function oC(n,e){return Xe(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return z(t);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let d of W_(u))o.add(d);let c=0;return Re(o).pipe(pn(u=>s.has(u)?aC(u,r,n,e):(u.data=Xa(u,u.parent,n).resolve,z(void 0))),we(()=>c++),il(1),Xe(u=>c===o.size?z(t):mn))})}function W_(n){let e=n.children.map(t=>W_(t)).flat();return[n,...e]}function aC(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!L_(i)&&(s[zs]=i.title),cC(s,n,e,r).pipe(J(o=>(n._resolvedData=o,n.data=Xa(n,n.parent,t).resolve,null)))}function cC(n,e,t,r){let i=rd(n);if(i.length===0)return z({});let s={};return Re(i).pipe(Xe(o=>uC(n[o],e,t,r).pipe(gn(),we(c=>{if(c instanceof Us)throw ec(new ii,c);s[o]=c}))),il(1),og(s),Pr(o=>$_(o)?mn:is(o)))}function uC(n,e,t,r){let i=Gs(e)??r,s=ci(n,i),o=s.resolve?s.resolve(e,t):at(i,()=>s(e,t));return An(o)}function td(n){return Ze(e=>{let t=n(e);return t?Re(t).pipe(J(()=>e)):z(e)})}var H_=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===X);return r}getResolvedTitleForRoute(t){return t.data[zs]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:()=>O(lC),providedIn:"root"})}}return n})(),lC=(()=>{class n extends H_{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(V(iv))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ks=new q("",{providedIn:"root",factory:()=>({})}),dC=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=xr({type:n,selectors:[["ng-component"]],standalone:!0,features:[Lr],decls:1,vars:0,template:function(r,i){r&1&&Vr(0,"router-outlet")},dependencies:[bA],encapsulation:2})}}return n})();function Dd(n){let e=n.children&&n.children.map(Dd),t=e?ce(N({},n),{children:e}):N({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==X&&(t.component=dC),t}var $s=new q(""),Pd=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=O(fa)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return z(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=An(t.loadComponent()).pipe(J(K_),we(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Gn(()=>{this.componentLoaders.delete(t)})),i=new Qu(r,()=>new Ce).pipe(Ku());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=hC(r,this.compiler,t,this.onLoadEndListener).pipe(Gn(()=>{this.childrenLoaders.delete(r)})),o=new Qu(s,()=>new Ce).pipe(Ku());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function hC(n,e,t,r){return An(n.loadChildren()).pipe(J(K_),Xe(i=>i instanceof Tg||Array.isArray(i)?z(i):Re(e.compileModuleAsync(i))),J(i=>{r&&r(n);let s,o,c=!1;return Array.isArray(i)?(o=i,c=!0):(s=i.create(t).injector,o=s.get($s,[],{optional:!0,self:!0}).flat()),{routes:o.map(Dd),injector:s}}))}function fC(n){return n&&typeof n=="object"&&"default"in n}function K_(n){return fC(n)?n.default:n}var kd=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:()=>O(mC),providedIn:"root"})}}return n})(),mC=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Q_=new q(""),Y_=new q("");function pC(n,e,t){let r=n.get(Y_),i=n.get(me);return n.get(oe).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(d=>setTimeout(d));let s,o=new Promise(d=>{s=d}),c=i.startViewTransition(()=>(s(),gC(n))),{onViewTransitionCreated:u}=r;return u&&at(n,()=>u({transition:c,from:e,to:t})),o})}function gC(n){return new Promise(e=>{dl({read:()=>setTimeout(e)},{injector:n})})}var vC=new q(""),xd=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ce,this.transitionAbortSubject=new Ce,this.configLoader=O(Pd),this.environmentInjector=O(Wn),this.urlSerializer=O(qs),this.rootContexts=O(Ws),this.location=O(hs),this.inputBindingEnabled=O(rc,{optional:!0})!==null,this.titleStrategy=O(H_),this.options=O(Ks,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=O(kd),this.createViewTransition=O(Q_,{optional:!0}),this.navigationErrorHandler=O(vC,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>z(void 0),this.rootComponentType=null;let t=i=>this.events.next(new dd(i)),r=i=>this.events.next(new hd(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(ce(N(N({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Ke({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ns,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ot(s=>s.id!==0),J(s=>ce(N({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Ze(s=>{let o=!1,c=!1;return z(s).pipe(Ze(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",nt.SupersededByNewNavigation),mn;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?ce(N({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!d&&f!=="reload"){let p="";return this.events.next(new En(u.id,this.urlSerializer.serialize(u.rawUrl),p,Ha.IgnoredSameUrlNavigation)),u.resolve(!1),mn}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return z(u).pipe(Ze(p=>{let w=this.transitions?.getValue();return this.events.next(new si(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),w!==this.transitions?.getValue()?mn:Promise.resolve(p)}),sC(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),we(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=ce(N({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let w=new Ka(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(w)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:w,source:C,restoredState:k,extras:P}=u,R=new si(p,this.urlSerializer.serialize(w),C,k);this.events.next(R);let j=V_(this.rootComponentType).snapshot;return this.currentTransition=s=ce(N({},u),{targetSnapshot:j,urlAfterRedirects:w,extras:ce(N({},P),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=w,z(s)}else{let p="";return this.events.next(new En(u.id,this.urlSerializer.serialize(u.extractedUrl),p,Ha.IgnoredByUrlHandlingStrategy)),u.resolve(!1),mn}}),we(u=>{let d=new ad(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),J(u=>(this.currentTransition=s=ce(N({},u),{guards:AA(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),VA(this.environmentInjector,u=>this.events.next(u)),we(u=>{if(s.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw ec(this.urlSerializer,u.guardsResult);let d=new cd(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(d)}),ot(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",nt.GuardRejected),!1)),td(u=>{if(u.guards.canActivateChecks.length)return z(u).pipe(we(d=>{let f=new ud(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),Ze(d=>{let f=!1;return z(d).pipe(oC(this.paramsInheritanceStrategy,this.environmentInjector),we({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",nt.NoDataFromResolver)}}))}),we(d=>{let f=new ld(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),td(u=>{let d=f=>{let p=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(f.routeConfig).pipe(we(w=>{f.component=w}),J(()=>{})));for(let w of f.children)p.push(...d(w));return p};return Dr(d(u.targetSnapshot.root)).pipe(nl(null),Ut(1))}),td(()=>this.afterPreactivation()),Ze(()=>{let{currentSnapshot:u,targetSnapshot:d}=s,f=this.createViewTransition?.(this.environmentInjector,u.root,d.root);return f?Re(f).pipe(J(()=>s)):z(s)}),J(u=>{let d=yA(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=ce(N({},u),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,s}),we(()=>{this.events.next(new Fs)}),TA(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Ut(1),we({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ct(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),kr(this.transitionAbortSubject.pipe(we(u=>{throw u}))),Gn(()=>{!o&&!c&&this.cancelNavigationTransition(s,"",nt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Pr(u=>{if(c=!0,B_(u))this.events.next(new Ht(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),EA(u)?this.events.next(new oi(u.url,u.navigationBehaviorOptions)):s.resolve(!1);else{let d=new Vs(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0);try{let f=at(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(f instanceof Us){let{message:p,cancellationCode:w}=ec(this.urlSerializer,f);this.events.next(new Ht(s.id,this.urlSerializer.serialize(s.extractedUrl),p,w)),this.events.next(new oi(f.redirectTo,f.navigationBehaviorOptions))}else{this.events.next(d);let p=t.errorHandler(u);s.resolve(!!p)}}catch(f){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(f)}}return mn}))}))}cancelNavigationTransition(t,r,i){let s=new Ht(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function _C(n){return n!==Ns}var bC=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:()=>O(yC),providedIn:"root"})}}return n})(),Sd=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},yC=(()=>{class n extends Sd{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Bt(n)))(i||n)}})()}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),J_=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:()=>O(IC),providedIn:"root"})}}return n})(),IC=(()=>{class n extends J_{constructor(){super(...arguments),this.location=O(hs),this.urlSerializer=O(qs),this.options=O(Ks,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=O(kd),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Kt,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=V_(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof si)this.stateMemento=this.createStateMemento();else if(t instanceof En)this.rawUrlTree=r.initialUrl;else if(t instanceof Ka){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Fs?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Ht&&(t.code===nt.GuardRejected||t.code===nt.NoDataFromResolver)?this.restoreHistory(r):t instanceof Vs?this.restoreHistory(r,!0):t instanceof Ct&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Kt?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=N(N({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=N(N({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Bt(n)))(i||n)}})()}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ks=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(ks||{});function X_(n,e){n.events.pipe(ot(t=>t instanceof Ct||t instanceof Ht||t instanceof Vs||t instanceof En),J(t=>t instanceof Ct||t instanceof En?ks.COMPLETE:(t instanceof Ht?t.code===nt.Redirect||t.code===nt.SupersededByNewNavigation:!1)?ks.REDIRECTING:ks.FAILED),ot(t=>t!==ks.REDIRECTING),Ut(1)).subscribe(()=>{e()})}function wC(n){throw n}var EC={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},TC={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Qt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=O(ua),this.stateManager=O(J_),this.options=O(Ks,{optional:!0})||{},this.pendingTasks=O(as),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=O(xd),this.urlSerializer=O(qs),this.location=O(hs),this.urlHandlingStrategy=O(kd),this._events=new Ce,this.errorHandler=this.options.errorHandler||wC,this.navigated=!1,this.routeReuseStrategy=O(bC),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=O($s,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!O(rc,{optional:!0}),this.eventsSubscription=new na,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Ht&&r.code!==nt.Redirect&&r.code!==nt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ct)this.navigated=!0;else if(r instanceof oi){let o=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=N({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||_C(i.source)},o);this.scheduleNavigation(c,Ns,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}CC(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ns,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let u=N({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let c=this.parseUrl(t);this.scheduleNavigation(c,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Dd),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:c,preserveFragment:u}=r,d=u?this.currentUrlTree.fragment:o,f=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":f=N(N({},this.currentUrlTree.queryParams),s);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}f!==null&&(f=this.removeEmptyProps(f));let p;try{let w=i?i.snapshot:this.routerState.snapshot.root;p=x_(w)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return N_(p,t,f,d??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=rr(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Ns,null,r)}navigate(t,r={skipLocationChange:!1}){return AC(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=N({},EC):r===!1?i=N({},TC):i=r,rr(t))return h_(this.currentUrlTree,t,i);let s=this.parseUrl(t);return h_(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let c,u,d;o?(c=o.resolve,u=o.reject,d=o.promise):d=new Promise((p,w)=>{c=p,u=w});let f=this.pendingTasks.add();return X_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:c,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function AC(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new he(4008,!1)}function CC(n){return!(n instanceof Fs)&&!(n instanceof oi)}var g1=(()=>{class n{constructor(t,r,i,s,o,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=c,this.href=null,this.onChanges=new Ce,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let u=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=t.events.subscribe(d=>{d instanceof Ct&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(rr(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){let c=this.urlTree;if(c===null||this.isAnchorElement&&(t!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:Ig(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:rr(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(G(Qt),G(Tn),dg("tabindex"),G(Kn),G(Ne),G(ds))}}static{this.\u0275dir=le({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&Tt("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&vn("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Qe],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Qe],replaceUrl:[2,"replaceUrl","replaceUrl",Qe],routerLink:"routerLink"},standalone:!0,features:[Qn,jt]})}}return n})();var nc=class{};var SC=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ot(t=>t instanceof Ct),pn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=ll(s.providers,t,`Route: ${s.path}`));let o=s._injector??t,c=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(c,s.children??s._loadedRoutes))}return Re(i).pipe(el())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=z(null);let s=i.pipe(Xe(o=>o===null?z(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return Re([s,o]).pipe(el())}else return s})}static{this.\u0275fac=function(r){return new(r||n)(V(Qt),V(fa),V(Wn),V(nc),V(Pd))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Z_=new q(""),RC=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof si?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ct?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof En&&t.code===Ha.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Qa&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Qa(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){aa()}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})();function v1(n,...e){return ft([{provide:$s,multi:!0,useValue:n},[],{provide:Tn,useFactory:eb,deps:[Qt]},{provide:da,multi:!0,useFactory:tb},e.map(t=>t.\u0275providers)])}function eb(n){return n.routerState.root}function Qs(n,e){return{\u0275kind:n,\u0275providers:e}}function tb(){let n=O(mt);return e=>{let t=n.get(ha);if(e!==t.components[0])return;let r=n.get(Qt),i=n.get(nb);n.get(Nd)===1&&r.initialNavigation(),n.get(rb,null,ol.Optional)?.setUpPreloading(),n.get(Z_,null,ol.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var nb=new q("",{factory:()=>new Ce}),Nd=new q("",{providedIn:"root",factory:()=>1});function DC(){return Qs(2,[{provide:Nd,useValue:0},{provide:ml,multi:!0,deps:[mt],useFactory:e=>{let t=e.get(xg,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(Qt),s=e.get(nb);X_(i,()=>{r(!0)}),e.get(xd).afterPreactivation=()=>(r(!0),s.closed?z(void 0):s),i.initialNavigation()}))}}])}function PC(){return Qs(3,[{provide:ml,multi:!0,useFactory:()=>{let e=O(Qt);return()=>{e.setUpLocationChangeListener()}}},{provide:Nd,useValue:2}])}var rb=new q("");function kC(n){return Qs(0,[{provide:rb,useExisting:SC},{provide:nc,useExisting:n}])}function xC(){return Qs(8,[g_,{provide:rc,useExisting:g_}])}function NC(n){let e=[{provide:Q_,useValue:pC},{provide:Y_,useValue:N({skipNextTransition:!!n?.skipInitialTransition},n)}];return Qs(9,e)}var y_=new q("ROUTER_FORROOT_GUARD"),MC=[hs,{provide:qs,useClass:ii},Qt,Ws,{provide:Tn,useFactory:eb,deps:[Qt]},Pd,[]],_1=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[MC,[],{provide:$s,multi:!0,useValue:t},{provide:y_,useFactory:LC,deps:[[Qt,new We,new ug]]},{provide:Ks,useValue:r||{}},r?.useHash?VC():FC(),OC(),r?.preloadingStrategy?kC(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?UC(r):[],r?.bindToComponentInputs?xC().\u0275providers:[],r?.enableViewTransitions?NC().\u0275providers:[],jC()]}}static forChild(t){return{ngModule:n,providers:[{provide:$s,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(V(y_,8))}}static{this.\u0275mod=ye({type:n})}static{this.\u0275inj=be({})}}return n})();function OC(){return{provide:Z_,useFactory:()=>{let n=O(Fg),e=O(oe),t=O(Ks),r=O(xd),i=O(qs);return t.scrollOffset&&n.setOffset(t.scrollOffset),new RC(i,r,n,e,t)}}}function VC(){return{provide:ds,useClass:Mg}}function FC(){return{provide:ds,useClass:Ng}}function LC(n){return"guarded"}function UC(n){return[n.initialNavigation==="disabled"?PC().\u0275providers:[],n.initialNavigation==="enabledBlocking"?DC().\u0275providers:[]]}var I_=new q("");function jC(){return[{provide:I_,useFactory:tb},{provide:da,multi:!0,useExisting:I_}]}var sb=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},BC=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],c=n[t++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},ob={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,c=o?n[i+1]:0,u=i+2<n.length,d=u?n[i+2]:0,f=s>>2,p=(s&3)<<4|c>>4,w=(c&15)<<2|d>>6,C=d&63;u||(C=64,o||(w=64)),r.push(t[f],t[p],t[w],t[C])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(sb(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):BC(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||c==null||d==null||p==null)throw new Od;let w=s<<2|c>>4;if(r.push(w),d!==64){let C=c<<4&240|d>>2;if(r.push(C),p!==64){let k=d<<6&192|p;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Od=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},$C=function(n){let e=sb(n);return ob.encodeByteArray(e,!0)},Ys=function(n){return $C(n).replace(/\./g,"")},Fd=function(n){try{return ob.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function zC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var qC=()=>zC().__FIREBASE_DEFAULTS__,GC=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},WC=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Fd(n[1]);return e&&JSON.parse(e)},oc=()=>{try{return qC()||GC()||WC()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Ld=n=>{var e,t;return(t=(e=oc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},ab=n=>{let e=Ld(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Ud=()=>{var n;return(n=oc())===null||n===void 0?void 0:n.config},jd=n=>{var e;return(e=oc())===null||e===void 0?void 0:e[`_${n}`]};var sc=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function cb(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Ys(JSON.stringify(t)),Ys(JSON.stringify(o)),""].join(".")}function Pe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ub(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pe())}function HC(){var n;let e=(n=oc())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function db(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function hb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fb(){let n=Pe();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function mb(){return!HC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Bd(){try{return typeof indexedDB=="object"}catch{return!1}}function pb(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var KC="FirebaseError",rt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=KC,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yt.prototype.create)}},Yt=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?QC(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new rt(i,c,r)}};function QC(n,e){return n.replace(YC,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var YC=/\{\$([^}]+)}/g;function gb(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ir(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(ib(s)&&ib(o)){if(!ir(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function ib(n){return n!==null&&typeof n=="object"}function Js(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ui(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function li(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function vb(n,e){let t=new Vd(n,e);return t.subscribe.bind(t)}var Vd=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");JC(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Md),i.error===void 0&&(i.error=Md),i.complete===void 0&&(i.complete=Md);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function JC(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Md(){}var I1=4*60*60*1e3;function je(n){return n&&n._delegate?n._delegate:n}var dt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var sr="[DEFAULT]";var $d=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new sc;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ZC(e))try{this.getOrInitializeService({instanceIdentifier:sr})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=sr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return b(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=sr){return this.instances.has(e)}getOptions(e=sr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:XC(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=sr){return this.component?this.component.multipleInstances?e:sr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function XC(n){return n===sr?void 0:n}function ZC(n){return n.instantiationMode==="EAGER"}var ac=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new $d(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var eS=[],Z=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Z||{}),tS={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},nS=Z.INFO,rS={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},iS=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=rS[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Cn=class{constructor(e){this.name=e,this._logLevel=nS,this._logHandler=iS,this._userLogHandler=null,eS.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Z))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...e),this._logHandler(this,Z.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...e),this._logHandler(this,Z.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...e),this._logHandler(this,Z.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...e),this._logHandler(this,Z.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...e),this._logHandler(this,Z.ERROR,...e)}};var sS=(n,e)=>e.some(t=>n instanceof t),_b,bb;function oS(){return _b||(_b=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aS(){return bb||(bb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var yb=new WeakMap,qd=new WeakMap,Ib=new WeakMap,zd=new WeakMap,Wd=new WeakMap;function cS(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(St(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&yb.set(t,n)}).catch(()=>{}),Wd.set(e,n),e}function uS(n){if(qd.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});qd.set(n,e)}var Gd={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return qd.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Ib.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return St(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function wb(n){Gd=n(Gd)}function lS(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(cc(this),e,...t);return Ib.set(r,e.sort?e.sort():[e]),St(r)}:aS().includes(n)?function(...e){return n.apply(cc(this),e),St(yb.get(this))}:function(...e){return St(n.apply(cc(this),e))}}function dS(n){return typeof n=="function"?lS(n):(n instanceof IDBTransaction&&uS(n),sS(n,oS())?new Proxy(n,Gd):n)}function St(n){if(n instanceof IDBRequest)return cS(n);if(zd.has(n))return zd.get(n);let e=dS(n);return e!==n&&(zd.set(n,e),Wd.set(e,n)),e}var cc=n=>Wd.get(n);function Tb(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),c=St(o);return r&&o.addEventListener("upgradeneeded",u=>{r(St(o.result),u.oldVersion,u.newVersion,St(o.transaction),u)}),t&&o.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}var hS=["get","getKey","getAll","getAllKeys","count"],fS=["put","add","delete","clear"],Hd=new Map;function Eb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Hd.get(e))return Hd.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=fS.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||hS.includes(t)))return;let s=function(o,...c){return b(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),d=u.store;return r&&(d=d.index(c.shift())),(yield Promise.all([d[t](...c),i&&u.done]))[0]})};return Hd.set(e,s),s}wb(n=>ce(N({},n),{get:(e,t,r)=>Eb(e,t)||n.get(e,t,r),has:(e,t)=>!!Eb(e,t)||n.has(e,t)}));var Qd=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(mS(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function mS(n){let e=n.getComponent();return e?.type==="VERSION"}var Yd="@firebase/app",Ab="0.10.13";var Jt=new Cn("@firebase/app"),pS="@firebase/app-compat",gS="@firebase/analytics-compat",vS="@firebase/analytics",_S="@firebase/app-check-compat",bS="@firebase/app-check",yS="@firebase/auth",IS="@firebase/auth-compat",wS="@firebase/database",ES="@firebase/data-connect",TS="@firebase/database-compat",AS="@firebase/functions",CS="@firebase/functions-compat",SS="@firebase/installations",RS="@firebase/installations-compat",DS="@firebase/messaging",PS="@firebase/messaging-compat",kS="@firebase/performance",xS="@firebase/performance-compat",NS="@firebase/remote-config",MS="@firebase/remote-config-compat",OS="@firebase/storage",VS="@firebase/storage-compat",FS="@firebase/firestore",LS="@firebase/vertexai-preview",US="@firebase/firestore-compat",jS="firebase",BS="10.14.1";var Jd="[DEFAULT]",$S={[Yd]:"fire-core",[pS]:"fire-core-compat",[vS]:"fire-analytics",[gS]:"fire-analytics-compat",[bS]:"fire-app-check",[_S]:"fire-app-check-compat",[yS]:"fire-auth",[IS]:"fire-auth-compat",[wS]:"fire-rtdb",[ES]:"fire-data-connect",[TS]:"fire-rtdb-compat",[AS]:"fire-fn",[CS]:"fire-fn-compat",[SS]:"fire-iid",[RS]:"fire-iid-compat",[DS]:"fire-fcm",[PS]:"fire-fcm-compat",[kS]:"fire-perf",[xS]:"fire-perf-compat",[NS]:"fire-rc",[MS]:"fire-rc-compat",[OS]:"fire-gcs",[VS]:"fire-gcs-compat",[FS]:"fire-fst",[US]:"fire-fst-compat",[LS]:"fire-vertex","fire-js":"fire-js",[jS]:"fire-js-all"};var Xs=new Map,zS=new Map,Xd=new Map;function Cb(n,e){try{n.container.addComponent(e)}catch(t){Jt.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Rn(n){let e=n.name;if(Xd.has(e))return Jt.debug(`There were multiple attempts to register component ${e}.`),!1;Xd.set(e,n);for(let t of Xs.values())Cb(t,n);for(let t of zS.values())Cb(t,n);return!0}function eo(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function _t(n){return n.settings!==void 0}var qS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Sn=new Yt("app","Firebase",qS);var Zd=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new dt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sn.create("app-deleted",{appName:this._name})}};var Dn=BS;function nh(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Jd,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Sn.create("bad-app-name",{appName:String(i)});if(t||(t=Ud()),!t)throw Sn.create("no-options");let s=Xs.get(i);if(s){if(ir(t,s.options)&&ir(r,s.config))return s;throw Sn.create("duplicate-app",{appName:i})}let o=new ac(i);for(let u of Xd.values())o.addComponent(u);let c=new Zd(t,r,o);return Xs.set(i,c),c}function di(n=Jd){let e=Xs.get(n);if(!e&&n===Jd&&Ud())return nh();if(!e)throw Sn.create("no-app",{appName:n});return e}function uc(){return Array.from(Xs.values())}function Se(n,e,t){var r;let i=(r=$S[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Jt.warn(c.join(" "));return}Rn(new dt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var GS="firebase-heartbeat-database",WS=1,Zs="firebase-heartbeat-store",Kd=null;function Pb(){return Kd||(Kd=Tb(GS,WS,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Zs)}catch(t){console.warn(t)}}}}).catch(n=>{throw Sn.create("idb-open",{originalErrorMessage:n.message})})),Kd}function HS(n){return b(this,null,function*(){try{let t=(yield Pb()).transaction(Zs),r=yield t.objectStore(Zs).get(kb(n));return yield t.done,r}catch(e){if(e instanceof rt)Jt.warn(e.message);else{let t=Sn.create("idb-get",{originalErrorMessage:e?.message});Jt.warn(t.message)}}})}function Sb(n,e){return b(this,null,function*(){try{let r=(yield Pb()).transaction(Zs,"readwrite");yield r.objectStore(Zs).put(e,kb(n)),yield r.done}catch(t){if(t instanceof rt)Jt.warn(t.message);else{let r=Sn.create("idb-set",{originalErrorMessage:t?.message});Jt.warn(r.message)}}})}function kb(n){return`${n.name}!${n.options.appId}`}var KS=1024,QS=30*24*60*60*1e3,eh=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new th(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return b(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Rb();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=QS}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Jt.warn(r)}})}getHeartbeatsHeader(){return b(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Rb(),{heartbeatsToSend:r,unsentEntries:i}=YS(this._heartbeatsCache.heartbeats),s=Ys(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Jt.warn(t),""}})}};function Rb(){return new Date().toISOString().substring(0,10)}function YS(n,e=KS){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Db(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Db(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var th=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return b(this,null,function*(){return Bd()?pb().then(()=>!0).catch(()=>!1):!1})}read(){return b(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield HS(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Sb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Sb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Db(n){return Ys(JSON.stringify({version:2,heartbeats:n})).length}function JS(n){Rn(new dt("platform-logger",e=>new Qd(e),"PRIVATE")),Rn(new dt("heartbeat",e=>new eh(e),"PRIVATE")),Se(Yd,Ab,n),Se(Yd,Ab,"esm2017"),Se("fire-js","")}JS("");var XS="firebase",ZS="10.14.1";Se(XS,ZS,"app");var ar=new Ur("ANGULARFIRE2_VERSION");function dc(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var to=(n,e)=>{let t=e?[e]:uc(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},fi=class{constructor(){return to(eR)}},eR="app-check";function hi(){}var lc=class{zone;delegate;constructor(e,t=rg){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},rh=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",hi,{},hi,hi)),t.pipe(we({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},mi=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new lc(Zone.current)),this.insideAngular=t.run(()=>new lc(Zone.current,ng)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(V(oe))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function hc(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function tR(n){return hc().ngZone.runOutsideAngular(()=>n())}function or(n){return hc().ngZone.run(()=>n())}function nR(n){return rR(hc())(n)}function rR(n){return function(t){return t=t.lift(new rh(n.ngZone)),t.pipe(Xu(n.outsideAngular),Ju(n.insideAngular))}}var iR=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),or(()=>n.apply(void 0,r))},Ye=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=or(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",hi,{},hi,hi))),r[s]=iR(r[s],t));let i=tR(()=>n.apply(this,r));if(!e)if(i instanceof wt){let s=hc();return i.pipe(Xu(s.outsideAngular),Ju(s.insideAngular))}else return or(()=>i);return i instanceof wt?i.pipe(nR):i instanceof Promise?or(()=>new Promise((s,o)=>i.then(c=>or(()=>s(c)),c=>or(()=>o(c))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:or(()=>i)};var Xt=class{constructor(e){return e}},cr=class{constructor(){return uc()}};function sR(n){return n&&n.length===1?n[0]:new Xt(di())}var ih=new q("angularfire2._apps"),oR={provide:Xt,useFactory:sR,deps:[[new We,ih]]},aR={provide:cr,deps:[[new We,ih]]};function cR(n){return(e,t)=>{let r=t.get(pt);Se("angularfire",ar.full,"core"),Se("angularfire",ar.full,"app"),Se("angular",Cg.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Xt(i)}}function aV(n,...e){return ft([oR,aR,{provide:ih,useFactory:cR(n),multi:!0,deps:[oe,mt,mi,...e]}])}var cV=Ye(nh,!0);function Kb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Qb=Kb,Yb=new Yt("auth","Firebase",Kb());var _c=new Cn("@firebase/auth");function uR(n,...e){_c.logLevel<=Z.WARN&&_c.warn(`Auth (${Dn}): ${n}`,...e)}function mc(n,...e){_c.logLevel<=Z.ERROR&&_c.error(`Auth (${Dn}): ${n}`,...e)}function Dt(n,...e){throw Sh(n,...e)}function ur(n,...e){return Sh(n,...e)}function Jb(n,e,t){let r=Object.assign(Object.assign({},Qb()),{[e]:t});return new Yt("auth","Firebase",r).create(e,{appName:n.name})}function tn(n){return Jb(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sh(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Yb.create(n,...e)}function H(n,e,...t){if(!n)throw Sh(e,...t)}function Zt(n){let e="INTERNAL ASSERTION FAILED: "+n;throw mc(e),new Error(e)}function kn(n,e){n||Zt(e)}function ch(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function lR(){return xb()==="http:"||xb()==="https:"}function xb(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function dR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lR()||db()||"connection"in navigator)?navigator.onLine:!0}function hR(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var lr=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,kn(t>e,"Short delay should be less than long delay!"),this.isMobile=ub()||hb()}get(){return dR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Rh(n,e){kn(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var bc=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var fR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var mR=new lr(3e4,6e4);function xn(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Nn(s,o,c,u){return b(this,arguments,function*(n,e,t,r,i={}){return Xb(n,i,()=>b(this,null,function*(){let d={},f={};r&&(e==="GET"?f=r:d={body:JSON.stringify(r)});let p=Js(Object.assign({key:n.config.apiKey},f)).slice(1),w=yield n._getAdditionalHeaders();w["Content-Type"]="application/json",n.languageCode&&(w["X-Firebase-Locale"]=n.languageCode);let C=Object.assign({method:e,headers:w},d);return lb()||(C.referrerPolicy="no-referrer"),bc.fetch()(Zb(n,n.config.apiHost,t,p),C)}))})}function Xb(n,e,t){return b(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},fR),e);try{let i=new uh(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw fc(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw fc(n,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw fc(n,"email-already-in-use",o);if(u==="USER_DISABLED")throw fc(n,"user-disabled",o);let f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Jb(n,f,d);Dt(n,f)}}catch(i){if(i instanceof rt)throw i;Dt(n,"network-request-failed",{message:String(i)})}})}function uo(s,o,c,u){return b(this,arguments,function*(n,e,t,r,i={}){let d=yield Nn(n,e,t,r,i);return"mfaPendingCredential"in d&&Dt(n,"multi-factor-auth-required",{_serverResponse:d}),d})}function Zb(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?Rh(n.config,i):`${n.config.apiScheme}://${i}`}function pR(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var uh=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ur(this.auth,"network-request-failed")),mR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function fc(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=ur(n,e,r);return i.customData._tokenResponse=t,i}function Nb(n){return n!==void 0&&n.enterprise!==void 0}var lh=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return pR(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function gR(n,e){return b(this,null,function*(){return Nn(n,"GET","/v2/recaptchaConfig",xn(n,e))})}function vR(n,e){return b(this,null,function*(){return Nn(n,"POST","/v1/accounts:delete",e)})}function ey(n,e){return b(this,null,function*(){return Nn(n,"POST","/v1/accounts:lookup",e)})}function no(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Dh(n,e=!1){return b(this,null,function*(){let t=je(n),r=yield t.getIdToken(e),i=Ph(r);H(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:no(sh(i.auth_time)),issuedAtTime:no(sh(i.iat)),expirationTime:no(sh(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function sh(n){return Number(n)*1e3}function Ph(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return mc("JWT malformed, contained fewer than 3 sections"),null;try{let i=Fd(t);return i?JSON.parse(i):(mc("Failed to decode base64 JWT payload"),null)}catch(i){return mc("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Mb(n){let e=Ph(n);return H(e,"internal-error"),H(typeof e.exp<"u","internal-error"),H(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function io(n,e,t=!1){return b(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof rt&&_R(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function _R({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var dh=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>b(this,null,function*(){yield this.iteration()}),t)}iteration(){return b(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var so=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=no(this.lastLoginAt),this.creationTime=no(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function yc(n){return b(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield io(n,ey(t,{idToken:r}));H(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?ty(s.providerUserInfo):[],c=bR(n.providerData,o),u=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!c?.length,f=u?d:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new so(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,p)})}function kh(n){return b(this,null,function*(){let e=je(n);yield yc(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function bR(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ty(n){return n.map(e=>{var{providerId:t}=e,r=Yu(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function yR(n,e){return b(this,null,function*(){let t=yield Xb(n,{},()=>b(this,null,function*(){let r=Js({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=Zb(n,i,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",bc.fetch()(o,{method:"POST",headers:c,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function IR(n,e){return b(this,null,function*(){return Nn(n,"POST","/v2/accounts:revokeToken",xn(n,e))})}var ro=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){H(e.idToken,"internal-error"),H(typeof e.idToken<"u","internal-error"),H(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Mb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){H(e.length!==0,"internal-error");let t=Mb(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return b(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(H(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return b(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield yR(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(H(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(H(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(H(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Zt("not implemented")}};function Pn(n,e){H(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var pi=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Yu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new so(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return b(this,null,function*(){let t=yield io(this,this.stsTokenManager.getToken(this.auth,e));return H(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Dh(this,e)}reload(){return kh(this)}_assign(e){this!==e&&(H(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){H(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return b(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield yc(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return b(this,null,function*(){if(_t(this.auth.app))return Promise.reject(tn(this.auth));let e=yield this.getIdToken();return yield io(this,vR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,c,u,d,f;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,w=(i=t.email)!==null&&i!==void 0?i:void 0,C=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,k=(o=t.photoURL)!==null&&o!==void 0?o:void 0,P=(c=t.tenantId)!==null&&c!==void 0?c:void 0,R=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,j=(d=t.createdAt)!==null&&d!==void 0?d:void 0,W=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:U,emailVerified:se,isAnonymous:ge,providerData:te,stsTokenManager:I}=t;H(U&&I,e,"internal-error");let g=ro.fromJSON(this.name,I);H(typeof U=="string",e,"internal-error"),Pn(p,e.name),Pn(w,e.name),H(typeof se=="boolean",e,"internal-error"),H(typeof ge=="boolean",e,"internal-error"),Pn(C,e.name),Pn(k,e.name),Pn(P,e.name),Pn(R,e.name),Pn(j,e.name),Pn(W,e.name);let _=new n({uid:U,auth:e,email:w,emailVerified:se,displayName:p,isAnonymous:ge,photoURL:k,phoneNumber:C,tenantId:P,stsTokenManager:g,createdAt:j,lastLoginAt:W});return te&&Array.isArray(te)&&(_.providerData=te.map(y=>Object.assign({},y))),R&&(_._redirectEventId=R),_}static _fromIdTokenResponse(e,t,r=!1){return b(this,null,function*(){let i=new ro;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield yc(s),s})}static _fromGetAccountInfoResponse(e,t,r){return b(this,null,function*(){let i=t.users[0];H(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?ty(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,c=new ro;c.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new so(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,d),u})}};var Ob=new Map;function en(n){kn(n instanceof Function,"Expected a class definition");let e=Ob.get(n);return e?(kn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Ob.set(n,e),e)}var wR=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return b(this,null,function*(){return!0})}_set(t,r){return b(this,null,function*(){this.storage[t]=r})}_get(t){return b(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return b(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),hh=wR;function pc(n,e,t){return`firebase:${n}:${e}:${t}`}var Ic=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=pc(this.userKey,i.apiKey,s),this.fullPersistenceKey=pc("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return b(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?pi._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return b(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return b(this,null,function*(){if(!t.length)return new n(en(hh),e,r);let i=(yield Promise.all(t.map(d=>b(this,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=i[0]||en(hh),o=pc(r,e.config.apiKey,e.name),c=null;for(let d of t)try{let f=yield d._get(o);if(f){let p=pi._fromJSON(e,f);d!==s&&(c=p),s=d;break}}catch{}let u=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new n(s,e,r):(s=u[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(t.map(d=>b(this,null,function*(){if(d!==s)try{yield d._remove(o)}catch{}}))),new n(s,e,r))})}};function Vb(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sy(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ny(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ay(e))return"Blackberry";if(cy(e))return"Webos";if(ry(e))return"Safari";if((e.includes("chrome/")||iy(e))&&!e.includes("edge/"))return"Chrome";if(oy(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function ny(n=Pe()){return/firefox\//i.test(n)}function ry(n=Pe()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function iy(n=Pe()){return/crios\//i.test(n)}function sy(n=Pe()){return/iemobile/i.test(n)}function oy(n=Pe()){return/android/i.test(n)}function ay(n=Pe()){return/blackberry/i.test(n)}function cy(n=Pe()){return/webos/i.test(n)}function xh(n=Pe()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function ER(n=Pe()){var e;return xh(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function TR(){return fb()&&document.documentMode===10}function uy(n=Pe()){return xh(n)||oy(n)||cy(n)||ay(n)||/windows phone/i.test(n)||sy(n)}function ly(n,e=[]){let t;switch(n){case"Browser":t=Vb(Pe());break;case"Worker":t=`${Vb(Pe())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Dn}/${r}`}var fh=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,c)=>{try{let u=e(s);o(u)}catch(u){c(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return b(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function AR(t){return b(this,arguments,function*(n,e={}){return Nn(n,"GET","/v2/passwordPolicy",xn(n,e))})}var CR=6,mh=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:CR,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var ph=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wc(this),this.idTokenSubscription=new wc(this),this.beforeStateQueue=new fh(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Yb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=en(t)),this._initializationPromise=this.queue(()=>b(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Ic.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return b(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return b(this,null,function*(){try{let t=yield ey(this,{idToken:e}),r=yield pi._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return b(this,null,function*(){var t;if(_t(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===c)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return H(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return b(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return b(this,null,function*(){try{yield yc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=hR()}_delete(){return b(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return b(this,null,function*(){if(_t(this.app))return Promise.reject(tn(this));let t=e?je(e):null;return t&&H(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return b(this,null,function*(){if(!this._deleted)return e&&H(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>b(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return b(this,null,function*(){return _t(this.app)?Promise.reject(tn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return _t(this.app)?Promise.reject(tn(this)):this.queue(()=>b(this,null,function*(){yield this.assertedPersistence.setPersistence(en(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return b(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return b(this,null,function*(){let e=yield AR(this),t=new mh(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Yt("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return b(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield IR(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return b(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return b(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&en(e)||this._popupRedirectResolver;H(t,this,"argument-error"),this.redirectPersistenceManager=yield Ic.create(this,[en(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return b(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>b(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return b(this,null,function*(){if(e===this.currentUser)return this.queue(()=>b(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(H(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(t);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return b(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return H(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ly(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return b(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return b(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&uR(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function hr(n){return je(n)}var wc=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=vb(t=>this.observer=t)}get next(){return H(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Dc={loadJS(){return b(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function SR(n){Dc=n}function dy(n){return Dc.loadJS(n)}function RR(){return Dc.recaptchaEnterpriseScript}function DR(){return Dc.gapiScript}function hy(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var PR="recaptcha-enterprise",kR="NO_RECAPTCHA",gh=class{constructor(e){this.type=PR,this.auth=hr(e)}verify(e="verify",t=!1){return b(this,null,function*(){function r(s){return b(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,c)=>b(this,null,function*(){gR(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{let d=new lh(u);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})}))})}function i(s,o,c){let u=window.grecaptcha;Nb(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(d=>{o(d)}).catch(()=>{o(kR)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(c=>{if(!t&&Nb(window.grecaptcha))i(c,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=RR();u.length!==0&&(u+=c),dy(u).then(()=>{i(c,s,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})})}};function Fb(n,e,t,r=!1){return b(this,null,function*(){let i=new gh(n),s;try{s=yield i.verify(t)}catch{s=yield i.verify(t,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function vh(n,e,t,r){return b(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield Fb(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(s=>b(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield Fb(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(s)}))})}function Nh(n,e){let t=eo(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(ir(s,e??{}))return i;Dt(i,"already-initialized")}return t.initialize({options:e})}function xR(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(en);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Mh(n,e,t){let r=hr(n);H(r._canInitEmulator,r,"emulator-config-failed"),H(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=fy(e),{host:o,port:c}=NR(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||MR()}function fy(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function NR(n){let e=fy(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:Lb(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:Lb(o)}}}function Lb(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function MR(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var oo=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Zt("not implemented")}_getIdTokenResponse(e){return Zt("not implemented")}_linkToIdToken(e,t){return Zt("not implemented")}_getReauthenticationResolver(e){return Zt("not implemented")}};function OR(n,e){return b(this,null,function*(){return Nn(n,"POST","/v1/accounts:signUp",e)})}function VR(n,e){return b(this,null,function*(){return uo(n,"POST","/v1/accounts:signInWithPassword",xn(n,e))})}function FR(n,e){return b(this,null,function*(){return uo(n,"POST","/v1/accounts:signInWithEmailLink",xn(n,e))})}function LR(n,e){return b(this,null,function*(){return uo(n,"POST","/v1/accounts:signInWithEmailLink",xn(n,e))})}var ao=class n extends oo{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return b(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vh(e,t,"signInWithPassword",VR);case"emailLink":return FR(e,{email:this._email,oobCode:this._password});default:Dt(e,"internal-error")}})}_linkToIdToken(e,t){return b(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vh(e,r,"signUpPassword",OR);case"emailLink":return LR(e,{idToken:t,email:this._email,oobCode:this._password});default:Dt(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function oh(n,e){return b(this,null,function*(){return uo(n,"POST","/v1/accounts:signInWithIdp",xn(n,e))})}function UR(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function jR(n){let e=ui(li(n)).link,t=e?ui(li(e)).deep_link_id:null,r=ui(li(n)).deep_link_id;return(r?ui(li(r)).link:null)||r||t||e||n}var Ec=class n{constructor(e){var t,r,i,s,o,c;let u=ui(li(e)),d=(t=u.apiKey)!==null&&t!==void 0?t:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,p=UR((i=u.mode)!==null&&i!==void 0?i:null);H(d&&f&&p,"argument-error"),this.apiKey=d,this.operation=p,this.code=f,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){let t=jR(e);try{return new n(t)}catch{return null}}};var my=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return ao._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=Ec.parseLink(r);return H(i,"argument-error"),ao._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Tc=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var _h=class extends Tc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function BR(n,e){return b(this,null,function*(){return uo(n,"POST","/v1/accounts:signUp",xn(n,e))})}var gi=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return b(this,null,function*(){let s=yield pi._fromIdTokenResponse(e,r,i),o=Ub(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return b(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=Ub(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function Ub(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var bh=class n extends rt{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function py(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?bh._fromErrorAndOperation(n,s,e,r):s})}function $R(n,e,t=!1){return b(this,null,function*(){let r=yield io(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return gi._forOperation(n,"link",r)})}function zR(n,e,t=!1){return b(this,null,function*(){let{auth:r}=n;if(_t(r.app))return Promise.reject(tn(r));let i="reauthenticate";try{let s=yield io(n,py(r,i,e,n),t);H(s.idToken,r,"internal-error");let o=Ph(s.idToken);H(o,r,"internal-error");let{sub:c}=o;return H(n.uid===c,r,"user-mismatch"),gi._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Dt(r,"user-mismatch"),s}})}function gy(n,e,t=!1){return b(this,null,function*(){if(_t(n.app))return Promise.reject(tn(n));let r="signIn",i=yield py(n,r,e),s=yield gi._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function Oh(n,e){return b(this,null,function*(){return gy(hr(n),e)})}function vy(n){return b(this,null,function*(){let e=hr(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Vh(n,e,t){return b(this,null,function*(){if(_t(n.app))return Promise.reject(tn(n));let r=hr(n),o=yield vh(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",BR).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&vy(n),u}),c=yield gi._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(c.user),c})}function Fh(n,e,t){return _t(n.app)?Promise.reject(tn(n)):Oh(je(n),my.credential(e,t)).catch(r=>b(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&vy(n),r}))}function Lh(n,e,t,r){return je(n).onIdTokenChanged(e,t,r)}function Uh(n,e,t){return je(n).beforeAuthStateChanged(e,t)}var Ac="__sak";var Cc=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ac,"1"),this.storage.removeItem(Ac),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var qR=1e3,GR=10,WR=(()=>{class n extends Cc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uy(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((c,u,d)=>{this.notifyListeners(c,d)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);TR()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,GR):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},qR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return b(this,null,function*(){yield fn(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return b(this,null,function*(){let r=yield fn(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return b(this,null,function*(){yield fn(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),_y=WR;var HR=(()=>{class n extends Cc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),jh=HR;function KR(n){return Promise.all(n.map(e=>b(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var QR=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return b(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,c=this.handlersMap[s];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(c).map(f=>b(this,null,function*(){return f(r.origin,o)})),d=yield KR(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function by(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var yh=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return b(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((c,u)=>{let d=by("",20);i.port1.start();let f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let w=p;if(w.data.eventId===d)switch(w.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(w.data.response);break;default:clearTimeout(f),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Rt(){return window}function YR(n){Rt().location.href=n}function yy(){return typeof Rt().WorkerGlobalScope<"u"&&typeof Rt().importScripts=="function"}function JR(){return b(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function XR(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function ZR(){return yy()?self:null}var Iy="firebaseLocalStorageDb",eD=1,Sc="firebaseLocalStorage",wy="fbase_key",dr=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Pc(n,e){return n.transaction([Sc],e?"readwrite":"readonly").objectStore(Sc)}function tD(){let n=indexedDB.deleteDatabase(Iy);return new dr(n).toPromise()}function Ih(){let n=indexedDB.open(Iy,eD);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Sc,{keyPath:wy})}catch(i){t(i)}}),n.addEventListener("success",()=>b(this,null,function*(){let r=n.result;r.objectStoreNames.contains(Sc)?e(r):(r.close(),yield tD(),e(yield Ih()))}))})}function jb(n,e,t){return b(this,null,function*(){let r=Pc(n,!0).put({[wy]:e,value:t});return new dr(r).toPromise()})}function nD(n,e){return b(this,null,function*(){let t=Pc(n,!1).get(e),r=yield new dr(t).toPromise();return r===void 0?null:r.value})}function Bb(n,e){let t=Pc(n,!0).delete(e);return new dr(t).toPromise()}var rD=800,iD=3,sD=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return b(this,null,function*(){return this.db?this.db:(this.db=yield Ih(),this.db)})}_withRetries(t){return b(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>iD)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return b(this,null,function*(){return yy()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return b(this,null,function*(){this.receiver=QR._getInstance(ZR()),this.receiver._subscribe("keyChanged",(t,r)=>b(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>b(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return b(this,null,function*(){var t,r;if(this.activeServiceWorker=yield JR(),!this.activeServiceWorker)return;this.sender=new yh(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return b(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||XR()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return b(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Ih();return yield jb(t,Ac,"1"),yield Bb(t,Ac),!0}catch{}return!1})}_withPendingWrite(t){return b(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return b(this,null,function*(){return this._withPendingWrite(()=>b(this,null,function*(){return yield this._withRetries(i=>jb(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return b(this,null,function*(){let r=yield this._withRetries(i=>nD(i,t));return this.localCache[t]=r,r})}_remove(t){return b(this,null,function*(){return this._withPendingWrite(()=>b(this,null,function*(){return yield this._withRetries(r=>Bb(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return b(this,null,function*(){let t=yield this._withRetries(s=>{let o=Pc(s,!1).getAll();return new dr(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>b(this,null,function*(){return this._poll()}),rD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),Ey=sD;var gV=hy("rcb"),vV=new lr(3e4,6e4);function oD(n,e){return e?en(e):(H(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var co=class extends oo{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return oh(e,this._buildIdpRequest())}_linkToIdToken(e,t){return oh(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return oh(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function aD(n){return gy(n.auth,new co(n),n.bypassAuthState)}function cD(n){let{auth:e,user:t}=n;return H(t,e,"internal-error"),zR(t,new co(n),n.bypassAuthState)}function uD(n){return b(this,null,function*(){let{auth:e,user:t}=n;return H(t,e,"internal-error"),$R(t,new co(n),n.bypassAuthState)})}var wh=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>b(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return b(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(u))}catch(d){this.reject(d)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return aD;case"linkViaPopup":case"linkViaRedirect":return uD;case"reauthViaPopup":case"reauthViaRedirect":return cD;default:Dt(this.auth,"internal-error")}}resolve(e){kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var _V=new lr(2e3,1e4);var lD="pendingRedirect",gc=new Map,Eh=class n extends wh{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return b(this,null,function*(){let e=gc.get(this.auth._key());if(!e){try{let r=(yield dD(this.resolver,this.auth))?yield fn(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}gc.set(this.auth._key(),e)}return this.bypassAuthState||gc.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return b(this,null,function*(){if(e.type==="signInViaRedirect")return fn(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,fn(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return b(this,null,function*(){})}cleanUp(){}};function dD(n,e){return b(this,null,function*(){let t=mD(e),r=fD(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function hD(n,e){gc.set(n._key(),e)}function fD(n){return en(n._redirectPersistence)}function mD(n){return pc(lD,n.config.apiKey,n.name)}function pD(n,e,t=!1){return b(this,null,function*(){if(_t(n.app))return Promise.reject(tn(n));let r=hr(n),i=oD(r,e),o=yield new Eh(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var gD=10*60*1e3,Th=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!vD(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Ty(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ur(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gD&&this.cachedEventUids.clear(),this.cachedEventUids.has($b(e))}saveEventToCache(e){this.cachedEventUids.add($b(e)),this.lastProcessedEventTime=Date.now()}};function $b(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Ty({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function vD(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ty(n);default:return!1}}function _D(t){return b(this,arguments,function*(n,e={}){return Nn(n,"GET","/v1/projects",e)})}var bD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yD=/^https?/;function ID(n){return b(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield _D(n);for(let t of e)try{if(wD(t))return}catch{}Dt(n,"unauthorized-domain")})}function wD(n){let e=ch(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!yD.test(t))return!1;if(bD.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var ED=new lr(3e4,6e4);function zb(){let n=Rt().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function TD(n){return new Promise((e,t)=>{var r,i,s;function o(){zb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zb(),t(ur(n,"network-request-failed"))},timeout:ED.get()})}if(!((i=(r=Rt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Rt().gapi)===null||s===void 0)&&s.load)o();else{let c=hy("iframefcb");return Rt()[c]=()=>{gapi.load?o():t(ur(n,"network-request-failed"))},dy(`${DR()}?onload=${c}`).catch(u=>t(u))}}).catch(e=>{throw vc=null,e})}var vc=null;function AD(n){return vc=vc||TD(n),vc}var CD=new lr(5e3,15e3),SD="__/auth/iframe",RD="emulator/auth/iframe",DD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},PD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kD(n){let e=n.config;H(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Rh(e,RD):`https://${n.config.authDomain}/${SD}`,r={apiKey:e.apiKey,appName:n.name,v:Dn},i=PD.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Js(r).slice(1)}`}function xD(n){return b(this,null,function*(){let e=yield AD(n),t=Rt().gapi;return H(t,n,"internal-error"),e.open({where:document.body,url:kD(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DD,dontclear:!0},r=>new Promise((i,s)=>b(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=ur(n,"network-request-failed"),c=Rt().setTimeout(()=>{s(o)},CD.get());function u(){Rt().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var ND={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},MD=500,OD=600,VD="_blank",FD="http://localhost",Rc=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function LD(n,e,t,r=MD,i=OD){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",u=Object.assign(Object.assign({},ND),{width:r.toString(),height:i.toString(),top:s,left:o}),d=Pe().toLowerCase();t&&(c=iy(d)?VD:t),ny(d)&&(e=e||FD,u.scrollbars="yes");let f=Object.entries(u).reduce((w,[C,k])=>`${w}${C}=${k},`,"");if(ER(d)&&c!=="_self")return UD(e||"",c),new Rc(null);let p=window.open(e||"",c,f);H(p,n,"popup-blocked");try{p.focus()}catch{}return new Rc(p)}function UD(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var jD="__/auth/handler",BD="emulator/auth/handler",$D=encodeURIComponent("fac");function qb(n,e,t,r,i,s){return b(this,null,function*(){H(n.config.authDomain,n,"auth-domain-config-required"),H(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Dn,eventId:i};if(e instanceof Tc){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",gb(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,p]of Object.entries(s||{}))o[f]=p}if(e instanceof _h){let f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}n.tenantId&&(o.tid=n.tenantId);let c=o;for(let f of Object.keys(c))c[f]===void 0&&delete c[f];let u=yield n._getAppCheckToken(),d=u?`#${$D}=${encodeURIComponent(u)}`:"";return`${zD(n)}?${Js(c).slice(1)}${d}`})}function zD({config:n}){return n.emulator?Rh(n,BD):`https://${n.authDomain}/${jD}`}var ah="webStorageSupport",Ah=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jh,this._completeRedirectFn=pD,this._overrideRedirectResult=hD}_openPopup(e,t,r,i){return b(this,null,function*(){var s;kn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield qb(e,t,r,ch(),i);return LD(e,o,by())})}_openRedirect(e,t,r,i){return b(this,null,function*(){yield this._originValidation(e);let s=yield qb(e,t,r,ch(),i);return YR(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(kn(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return b(this,null,function*(){let t=yield xD(e),r=new Th(e);return t.register("authEvent",i=>(H(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ah,{type:ah},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[ah];o!==void 0&&t(!!o),Dt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ID(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return uy()||ry()||xh()}},Ay=Ah;var Gb="@firebase/auth",Wb="1.7.9";var Ch=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return b(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){H(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function qD(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function GD(n){Rn(new dt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;H(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ly(n)},d=new ph(r,i,s,u);return xR(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Rn(new dt("auth-internal",e=>{let t=hr(e.getProvider("auth").getImmediate());return(r=>new Ch(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Se(Gb,Wb,qD(n)),Se(Gb,Wb,"esm2017")}var WD=5*60,HD=jd("authIdTokenMaxAge")||WD,Hb=null,KD=n=>e=>b(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>HD)return;let i=t?.token;Hb!==i&&(Hb=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Bh(n=di()){let e=eo(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Nh(n,{popupRedirectResolver:Ay,persistence:[Ey,_y,jh]}),r=jd("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=KD(s.toString());Uh(t,o,()=>o(t.currentUser)),Lh(t,c=>o(c))}}let i=Ld("auth");return i&&Mh(t,`http://${i}`),t}function QD(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}SR({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=ur("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",QD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});GD("Browser");var Cy="auth",lo=class{constructor(e){return e}},ho=class{constructor(){return to(Cy)}};var $h=new q("angularfire2.auth-instances");function jP(n,e){let t=dc(Cy,n,e);return t&&new lo(t)}function BP(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new lo(r)}}var $P={provide:ho,deps:[[new We,$h]]},zP={provide:lo,useFactory:jP,deps:[[new We,$h],Xt]};function tF(n,...e){return Se("angularfire",ar.full,"auth"),ft([zP,$P,{provide:$h,useFactory:BP(n),multi:!0,deps:[oe,mt,mi,cr,[new We,fi],...e]}])}var nF=Ye(Vh,!0);var rF=Ye(Bh,!0);var iF=Ye(Fh,!0);var Sy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ry={};var Mn,zh;(function(){var n;function e(I,g){function _(){}_.prototype=g.prototype,I.D=g.prototype,I.prototype=new _,I.prototype.constructor=I,I.C=function(y,E,A){for(var v=Array(arguments.length-2),Vt=2;Vt<arguments.length;Vt++)v[Vt-2]=arguments[Vt];return g.prototype[E].apply(y,v)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,g,_){_||(_=0);var y=Array(16);if(typeof g=="string")for(var E=0;16>E;++E)y[E]=g.charCodeAt(_++)|g.charCodeAt(_++)<<8|g.charCodeAt(_++)<<16|g.charCodeAt(_++)<<24;else for(E=0;16>E;++E)y[E]=g[_++]|g[_++]<<8|g[_++]<<16|g[_++]<<24;g=I.g[0],_=I.g[1],E=I.g[2];var A=I.g[3],v=g+(A^_&(E^A))+y[0]+3614090360&4294967295;g=_+(v<<7&4294967295|v>>>25),v=A+(E^g&(_^E))+y[1]+3905402710&4294967295,A=g+(v<<12&4294967295|v>>>20),v=E+(_^A&(g^_))+y[2]+606105819&4294967295,E=A+(v<<17&4294967295|v>>>15),v=_+(g^E&(A^g))+y[3]+3250441966&4294967295,_=E+(v<<22&4294967295|v>>>10),v=g+(A^_&(E^A))+y[4]+4118548399&4294967295,g=_+(v<<7&4294967295|v>>>25),v=A+(E^g&(_^E))+y[5]+1200080426&4294967295,A=g+(v<<12&4294967295|v>>>20),v=E+(_^A&(g^_))+y[6]+2821735955&4294967295,E=A+(v<<17&4294967295|v>>>15),v=_+(g^E&(A^g))+y[7]+4249261313&4294967295,_=E+(v<<22&4294967295|v>>>10),v=g+(A^_&(E^A))+y[8]+1770035416&4294967295,g=_+(v<<7&4294967295|v>>>25),v=A+(E^g&(_^E))+y[9]+2336552879&4294967295,A=g+(v<<12&4294967295|v>>>20),v=E+(_^A&(g^_))+y[10]+4294925233&4294967295,E=A+(v<<17&4294967295|v>>>15),v=_+(g^E&(A^g))+y[11]+2304563134&4294967295,_=E+(v<<22&4294967295|v>>>10),v=g+(A^_&(E^A))+y[12]+1804603682&4294967295,g=_+(v<<7&4294967295|v>>>25),v=A+(E^g&(_^E))+y[13]+4254626195&4294967295,A=g+(v<<12&4294967295|v>>>20),v=E+(_^A&(g^_))+y[14]+2792965006&4294967295,E=A+(v<<17&4294967295|v>>>15),v=_+(g^E&(A^g))+y[15]+1236535329&4294967295,_=E+(v<<22&4294967295|v>>>10),v=g+(E^A&(_^E))+y[1]+4129170786&4294967295,g=_+(v<<5&4294967295|v>>>27),v=A+(_^E&(g^_))+y[6]+3225465664&4294967295,A=g+(v<<9&4294967295|v>>>23),v=E+(g^_&(A^g))+y[11]+643717713&4294967295,E=A+(v<<14&4294967295|v>>>18),v=_+(A^g&(E^A))+y[0]+3921069994&4294967295,_=E+(v<<20&4294967295|v>>>12),v=g+(E^A&(_^E))+y[5]+3593408605&4294967295,g=_+(v<<5&4294967295|v>>>27),v=A+(_^E&(g^_))+y[10]+38016083&4294967295,A=g+(v<<9&4294967295|v>>>23),v=E+(g^_&(A^g))+y[15]+3634488961&4294967295,E=A+(v<<14&4294967295|v>>>18),v=_+(A^g&(E^A))+y[4]+3889429448&4294967295,_=E+(v<<20&4294967295|v>>>12),v=g+(E^A&(_^E))+y[9]+568446438&4294967295,g=_+(v<<5&4294967295|v>>>27),v=A+(_^E&(g^_))+y[14]+3275163606&4294967295,A=g+(v<<9&4294967295|v>>>23),v=E+(g^_&(A^g))+y[3]+4107603335&4294967295,E=A+(v<<14&4294967295|v>>>18),v=_+(A^g&(E^A))+y[8]+1163531501&4294967295,_=E+(v<<20&4294967295|v>>>12),v=g+(E^A&(_^E))+y[13]+2850285829&4294967295,g=_+(v<<5&4294967295|v>>>27),v=A+(_^E&(g^_))+y[2]+4243563512&4294967295,A=g+(v<<9&4294967295|v>>>23),v=E+(g^_&(A^g))+y[7]+1735328473&4294967295,E=A+(v<<14&4294967295|v>>>18),v=_+(A^g&(E^A))+y[12]+2368359562&4294967295,_=E+(v<<20&4294967295|v>>>12),v=g+(_^E^A)+y[5]+4294588738&4294967295,g=_+(v<<4&4294967295|v>>>28),v=A+(g^_^E)+y[8]+2272392833&4294967295,A=g+(v<<11&4294967295|v>>>21),v=E+(A^g^_)+y[11]+1839030562&4294967295,E=A+(v<<16&4294967295|v>>>16),v=_+(E^A^g)+y[14]+4259657740&4294967295,_=E+(v<<23&4294967295|v>>>9),v=g+(_^E^A)+y[1]+2763975236&4294967295,g=_+(v<<4&4294967295|v>>>28),v=A+(g^_^E)+y[4]+1272893353&4294967295,A=g+(v<<11&4294967295|v>>>21),v=E+(A^g^_)+y[7]+4139469664&4294967295,E=A+(v<<16&4294967295|v>>>16),v=_+(E^A^g)+y[10]+3200236656&4294967295,_=E+(v<<23&4294967295|v>>>9),v=g+(_^E^A)+y[13]+681279174&4294967295,g=_+(v<<4&4294967295|v>>>28),v=A+(g^_^E)+y[0]+3936430074&4294967295,A=g+(v<<11&4294967295|v>>>21),v=E+(A^g^_)+y[3]+3572445317&4294967295,E=A+(v<<16&4294967295|v>>>16),v=_+(E^A^g)+y[6]+76029189&4294967295,_=E+(v<<23&4294967295|v>>>9),v=g+(_^E^A)+y[9]+3654602809&4294967295,g=_+(v<<4&4294967295|v>>>28),v=A+(g^_^E)+y[12]+3873151461&4294967295,A=g+(v<<11&4294967295|v>>>21),v=E+(A^g^_)+y[15]+530742520&4294967295,E=A+(v<<16&4294967295|v>>>16),v=_+(E^A^g)+y[2]+3299628645&4294967295,_=E+(v<<23&4294967295|v>>>9),v=g+(E^(_|~A))+y[0]+4096336452&4294967295,g=_+(v<<6&4294967295|v>>>26),v=A+(_^(g|~E))+y[7]+1126891415&4294967295,A=g+(v<<10&4294967295|v>>>22),v=E+(g^(A|~_))+y[14]+2878612391&4294967295,E=A+(v<<15&4294967295|v>>>17),v=_+(A^(E|~g))+y[5]+4237533241&4294967295,_=E+(v<<21&4294967295|v>>>11),v=g+(E^(_|~A))+y[12]+1700485571&4294967295,g=_+(v<<6&4294967295|v>>>26),v=A+(_^(g|~E))+y[3]+2399980690&4294967295,A=g+(v<<10&4294967295|v>>>22),v=E+(g^(A|~_))+y[10]+4293915773&4294967295,E=A+(v<<15&4294967295|v>>>17),v=_+(A^(E|~g))+y[1]+2240044497&4294967295,_=E+(v<<21&4294967295|v>>>11),v=g+(E^(_|~A))+y[8]+1873313359&4294967295,g=_+(v<<6&4294967295|v>>>26),v=A+(_^(g|~E))+y[15]+4264355552&4294967295,A=g+(v<<10&4294967295|v>>>22),v=E+(g^(A|~_))+y[6]+2734768916&4294967295,E=A+(v<<15&4294967295|v>>>17),v=_+(A^(E|~g))+y[13]+1309151649&4294967295,_=E+(v<<21&4294967295|v>>>11),v=g+(E^(_|~A))+y[4]+4149444226&4294967295,g=_+(v<<6&4294967295|v>>>26),v=A+(_^(g|~E))+y[11]+3174756917&4294967295,A=g+(v<<10&4294967295|v>>>22),v=E+(g^(A|~_))+y[2]+718787259&4294967295,E=A+(v<<15&4294967295|v>>>17),v=_+(A^(E|~g))+y[9]+3951481745&4294967295,I.g[0]=I.g[0]+g&4294967295,I.g[1]=I.g[1]+(E+(v<<21&4294967295|v>>>11))&4294967295,I.g[2]=I.g[2]+E&4294967295,I.g[3]=I.g[3]+A&4294967295}r.prototype.u=function(I,g){g===void 0&&(g=I.length);for(var _=g-this.blockSize,y=this.B,E=this.h,A=0;A<g;){if(E==0)for(;A<=_;)i(this,I,A),A+=this.blockSize;if(typeof I=="string"){for(;A<g;)if(y[E++]=I.charCodeAt(A++),E==this.blockSize){i(this,y),E=0;break}}else for(;A<g;)if(y[E++]=I[A++],E==this.blockSize){i(this,y),E=0;break}}this.h=E,this.o+=g},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var g=1;g<I.length-8;++g)I[g]=0;var _=8*this.o;for(g=I.length-8;g<I.length;++g)I[g]=_&255,_/=256;for(this.u(I),I=Array(16),g=_=0;4>g;++g)for(var y=0;32>y;y+=8)I[_++]=this.g[g]>>>y&255;return I};function s(I,g){var _=c;return Object.prototype.hasOwnProperty.call(_,I)?_[I]:_[I]=g(I)}function o(I,g){this.h=g;for(var _=[],y=!0,E=I.length-1;0<=E;E--){var A=I[E]|0;y&&A==g||(_[E]=A,y=!1)}this.g=_}var c={};function u(I){return-128<=I&&128>I?s(I,function(g){return new o([g|0],0>g?-1:0)}):new o([I|0],0>I?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return R(d(-I));for(var g=[],_=1,y=0;I>=_;y++)g[y]=I/_|0,_*=4294967296;return new o(g,0)}function f(I,g){if(I.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(I.charAt(0)=="-")return R(f(I.substring(1),g));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=d(Math.pow(g,8)),y=p,E=0;E<I.length;E+=8){var A=Math.min(8,I.length-E),v=parseInt(I.substring(E,E+A),g);8>A?(A=d(Math.pow(g,A)),y=y.j(A).add(d(v))):(y=y.j(_),y=y.add(d(v)))}return y}var p=u(0),w=u(1),C=u(16777216);n=o.prototype,n.m=function(){if(P(this))return-R(this).m();for(var I=0,g=1,_=0;_<this.g.length;_++){var y=this.i(_);I+=(0<=y?y:4294967296+y)*g,g*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(k(this))return"0";if(P(this))return"-"+R(this).toString(I);for(var g=d(Math.pow(I,6)),_=this,y="";;){var E=se(_,g).g;_=j(_,E.j(g));var A=((0<_.g.length?_.g[0]:_.h)>>>0).toString(I);if(_=E,k(_))return A+y;for(;6>A.length;)A="0"+A;y=A+y}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function k(I){if(I.h!=0)return!1;for(var g=0;g<I.g.length;g++)if(I.g[g]!=0)return!1;return!0}function P(I){return I.h==-1}n.l=function(I){return I=j(this,I),P(I)?-1:k(I)?0:1};function R(I){for(var g=I.g.length,_=[],y=0;y<g;y++)_[y]=~I.g[y];return new o(_,~I.h).add(w)}n.abs=function(){return P(this)?R(this):this},n.add=function(I){for(var g=Math.max(this.g.length,I.g.length),_=[],y=0,E=0;E<=g;E++){var A=y+(this.i(E)&65535)+(I.i(E)&65535),v=(A>>>16)+(this.i(E)>>>16)+(I.i(E)>>>16);y=v>>>16,A&=65535,v&=65535,_[E]=v<<16|A}return new o(_,_[_.length-1]&-2147483648?-1:0)};function j(I,g){return I.add(R(g))}n.j=function(I){if(k(this)||k(I))return p;if(P(this))return P(I)?R(this).j(R(I)):R(R(this).j(I));if(P(I))return R(this.j(R(I)));if(0>this.l(C)&&0>I.l(C))return d(this.m()*I.m());for(var g=this.g.length+I.g.length,_=[],y=0;y<2*g;y++)_[y]=0;for(y=0;y<this.g.length;y++)for(var E=0;E<I.g.length;E++){var A=this.i(y)>>>16,v=this.i(y)&65535,Vt=I.i(E)>>>16,Ui=I.i(E)&65535;_[2*y+2*E]+=v*Ui,W(_,2*y+2*E),_[2*y+2*E+1]+=A*Ui,W(_,2*y+2*E+1),_[2*y+2*E+1]+=v*Vt,W(_,2*y+2*E+1),_[2*y+2*E+2]+=A*Vt,W(_,2*y+2*E+2)}for(y=0;y<g;y++)_[y]=_[2*y+1]<<16|_[2*y];for(y=g;y<2*g;y++)_[y]=0;return new o(_,0)};function W(I,g){for(;(I[g]&65535)!=I[g];)I[g+1]+=I[g]>>>16,I[g]&=65535,g++}function U(I,g){this.g=I,this.h=g}function se(I,g){if(k(g))throw Error("division by zero");if(k(I))return new U(p,p);if(P(I))return g=se(R(I),g),new U(R(g.g),R(g.h));if(P(g))return g=se(I,R(g)),new U(R(g.g),g.h);if(30<I.g.length){if(P(I)||P(g))throw Error("slowDivide_ only works with positive integers.");for(var _=w,y=g;0>=y.l(I);)_=ge(_),y=ge(y);var E=te(_,1),A=te(y,1);for(y=te(y,2),_=te(_,2);!k(y);){var v=A.add(y);0>=v.l(I)&&(E=E.add(_),A=v),y=te(y,1),_=te(_,1)}return g=j(I,E.j(g)),new U(E,g)}for(E=p;0<=I.l(g);){for(_=Math.max(1,Math.floor(I.m()/g.m())),y=Math.ceil(Math.log(_)/Math.LN2),y=48>=y?1:Math.pow(2,y-48),A=d(_),v=A.j(g);P(v)||0<v.l(I);)_-=y,A=d(_),v=A.j(g);k(A)&&(A=w),E=E.add(A),I=j(I,v)}return new U(E,I)}n.A=function(I){return se(this,I).h},n.and=function(I){for(var g=Math.max(this.g.length,I.g.length),_=[],y=0;y<g;y++)_[y]=this.i(y)&I.i(y);return new o(_,this.h&I.h)},n.or=function(I){for(var g=Math.max(this.g.length,I.g.length),_=[],y=0;y<g;y++)_[y]=this.i(y)|I.i(y);return new o(_,this.h|I.h)},n.xor=function(I){for(var g=Math.max(this.g.length,I.g.length),_=[],y=0;y<g;y++)_[y]=this.i(y)^I.i(y);return new o(_,this.h^I.h)};function ge(I){for(var g=I.g.length+1,_=[],y=0;y<g;y++)_[y]=I.i(y)<<1|I.i(y-1)>>>31;return new o(_,I.h)}function te(I,g){var _=g>>5;g%=32;for(var y=I.g.length-_,E=[],A=0;A<y;A++)E[A]=0<g?I.i(A+_)>>>g|I.i(A+_+1)<<32-g:I.i(A+_);return new o(E,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,zh=Ry.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Mn=Ry.Integer=o}).apply(typeof Sy<"u"?Sy:typeof self<"u"?self:typeof window<"u"?window:{});var kc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},nn={};var qh,qP,vi,Gh,fo,xc,Wh,Hh,Kh;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,l,h){return a==Array.prototype||a==Object.prototype||(a[l]=h.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof kc=="object"&&kc];for(var l=0;l<a.length;++l){var h=a[l];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=t(this);function i(a,l){if(l)e:{var h=r;a=a.split(".");for(var m=0;m<a.length-1;m++){var T=a[m];if(!(T in h))break e;h=h[T]}a=a[a.length-1],m=h[a],l=l(m),l!=m&&l!=null&&e(h,a,{configurable:!0,writable:!0,value:l})}}function s(a,l){a instanceof String&&(a+="");var h=0,m=!1,T={next:function(){if(!m&&h<a.length){var S=h++;return{value:l(S,a[S]),done:!1}}return m=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(a){return a||function(){return s(this,function(l,h){return h})}});var o=o||{},c=this||self;function u(a){var l=typeof a;return l=l!="object"?l:a?Array.isArray(a)?"array":l:"null",l=="array"||l=="object"&&typeof a.length=="number"}function d(a){var l=typeof a;return l=="object"&&a!=null||l=="function"}function f(a,l,h){return a.call.apply(a.bind,arguments)}function p(a,l,h){if(!a)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,m),a.apply(l,T)}}return function(){return a.apply(l,arguments)}}function w(a,l,h){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,w.apply(null,arguments)}function C(a,l){var h=Array.prototype.slice.call(arguments,1);return function(){var m=h.slice();return m.push.apply(m,arguments),a.apply(this,m)}}function k(a,l){function h(){}h.prototype=l.prototype,a.aa=l.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(m,T,S){for(var M=Array(arguments.length-2),de=2;de<arguments.length;de++)M[de-2]=arguments[de];return l.prototype[T].apply(m,M)}}function P(a){let l=a.length;if(0<l){let h=Array(l);for(let m=0;m<l;m++)h[m]=a[m];return h}return[]}function R(a,l){for(let h=1;h<arguments.length;h++){let m=arguments[h];if(u(m)){let T=a.length||0,S=m.length||0;a.length=T+S;for(let M=0;M<S;M++)a[T+M]=m[M]}else a.push(m)}}class j{constructor(l,h){this.i=l,this.j=h,this.h=0,this.g=null}get(){let l;return 0<this.h?(this.h--,l=this.g,this.g=l.next,l.next=null):l=this.i(),l}}function W(a){return/^[\s\xa0]*$/.test(a)}function U(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function se(a){return se[" "](a),a}se[" "]=function(){};var ge=U().indexOf("Gecko")!=-1&&!(U().toLowerCase().indexOf("webkit")!=-1&&U().indexOf("Edge")==-1)&&!(U().indexOf("Trident")!=-1||U().indexOf("MSIE")!=-1)&&U().indexOf("Edge")==-1;function te(a,l,h){for(let m in a)l.call(h,a[m],m,a)}function I(a,l){for(let h in a)l.call(void 0,a[h],h,a)}function g(a){let l={};for(let h in a)l[h]=a[h];return l}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function y(a,l){let h,m;for(let T=1;T<arguments.length;T++){m=arguments[T];for(h in m)a[h]=m[h];for(let S=0;S<_.length;S++)h=_[S],Object.prototype.hasOwnProperty.call(m,h)&&(a[h]=m[h])}}function E(a){var l=1;a=a.split(":");let h=[];for(;0<l&&a.length;)h.push(a.shift()),l--;return a.length&&h.push(a.join(":")),h}function A(a){c.setTimeout(()=>{throw a},0)}function v(){var a=wu;let l=null;return a.g&&(l=a.g,a.g=a.g.next,a.g||(a.h=null),l.next=null),l}class Vt{constructor(){this.h=this.g=null}add(l,h){let m=Ui.get();m.set(l,h),this.h?this.h.next=m:this.g=m,this.h=m}}var Ui=new j(()=>new Cw,a=>a.reset());class Cw{constructor(){this.next=this.g=this.h=null}set(l,h){this.h=l,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let ji,Bi=!1,wu=new Vt,tp=()=>{let a=c.Promise.resolve(void 0);ji=()=>{a.then(Sw)}};var Sw=()=>{for(var a;a=v();){try{a.h.call(a.g)}catch(h){A(h)}var l=Ui;l.j(a),100>l.h&&(l.h++,a.next=l.g,l.g=a)}Bi=!1};function un(){this.s=this.s,this.C=this.C}un.prototype.s=!1,un.prototype.ma=function(){this.s||(this.s=!0,this.N())},un.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Oe(a,l){this.type=a,this.g=this.target=l,this.defaultPrevented=!1}Oe.prototype.h=function(){this.defaultPrevented=!0};var Rw=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,l=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};c.addEventListener("test",h,l),c.removeEventListener("test",h,l)}catch{}return a}();function $i(a,l){if(Oe.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,m=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=l,l=a.relatedTarget){if(ge){e:{try{se(l.nodeName);var T=!0;break e}catch{}T=!1}T||(l=null)}}else h=="mouseover"?l=a.fromElement:h=="mouseout"&&(l=a.toElement);this.relatedTarget=l,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Dw[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&$i.aa.h.call(this)}}k($i,Oe);var Dw={2:"touch",3:"pen",4:"mouse"};$i.prototype.h=function(){$i.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var zi="closure_listenable_"+(1e6*Math.random()|0),Pw=0;function kw(a,l,h,m,T){this.listener=a,this.proxy=null,this.src=l,this.type=h,this.capture=!!m,this.ha=T,this.key=++Pw,this.da=this.fa=!1}function Uo(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function jo(a){this.src=a,this.g={},this.h=0}jo.prototype.add=function(a,l,h,m,T){var S=a.toString();a=this.g[S],a||(a=this.g[S]=[],this.h++);var M=Tu(a,l,m,T);return-1<M?(l=a[M],h||(l.fa=!1)):(l=new kw(l,this.src,S,!!m,T),l.fa=h,a.push(l)),l};function Eu(a,l){var h=l.type;if(h in a.g){var m=a.g[h],T=Array.prototype.indexOf.call(m,l,void 0),S;(S=0<=T)&&Array.prototype.splice.call(m,T,1),S&&(Uo(l),a.g[h].length==0&&(delete a.g[h],a.h--))}}function Tu(a,l,h,m){for(var T=0;T<a.length;++T){var S=a[T];if(!S.da&&S.listener==l&&S.capture==!!h&&S.ha==m)return T}return-1}var Au="closure_lm_"+(1e6*Math.random()|0),Cu={};function np(a,l,h,m,T){if(m&&m.once)return ip(a,l,h,m,T);if(Array.isArray(l)){for(var S=0;S<l.length;S++)np(a,l[S],h,m,T);return null}return h=Pu(h),a&&a[zi]?a.K(l,h,d(m)?!!m.capture:!!m,T):rp(a,l,h,!1,m,T)}function rp(a,l,h,m,T,S){if(!l)throw Error("Invalid event type");var M=d(T)?!!T.capture:!!T,de=Ru(a);if(de||(a[Au]=de=new jo(a)),h=de.add(l,h,m,M,S),h.proxy)return h;if(m=xw(),h.proxy=m,m.src=a,m.listener=h,a.addEventListener)Rw||(T=M),T===void 0&&(T=!1),a.addEventListener(l.toString(),m,T);else if(a.attachEvent)a.attachEvent(op(l.toString()),m);else if(a.addListener&&a.removeListener)a.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return h}function xw(){function a(h){return l.call(a.src,a.listener,h)}let l=Nw;return a}function ip(a,l,h,m,T){if(Array.isArray(l)){for(var S=0;S<l.length;S++)ip(a,l[S],h,m,T);return null}return h=Pu(h),a&&a[zi]?a.L(l,h,d(m)?!!m.capture:!!m,T):rp(a,l,h,!0,m,T)}function sp(a,l,h,m,T){if(Array.isArray(l))for(var S=0;S<l.length;S++)sp(a,l[S],h,m,T);else m=d(m)?!!m.capture:!!m,h=Pu(h),a&&a[zi]?(a=a.i,l=String(l).toString(),l in a.g&&(S=a.g[l],h=Tu(S,h,m,T),-1<h&&(Uo(S[h]),Array.prototype.splice.call(S,h,1),S.length==0&&(delete a.g[l],a.h--)))):a&&(a=Ru(a))&&(l=a.g[l.toString()],a=-1,l&&(a=Tu(l,h,m,T)),(h=-1<a?l[a]:null)&&Su(h))}function Su(a){if(typeof a!="number"&&a&&!a.da){var l=a.src;if(l&&l[zi])Eu(l.i,a);else{var h=a.type,m=a.proxy;l.removeEventListener?l.removeEventListener(h,m,a.capture):l.detachEvent?l.detachEvent(op(h),m):l.addListener&&l.removeListener&&l.removeListener(m),(h=Ru(l))?(Eu(h,a),h.h==0&&(h.src=null,l[Au]=null)):Uo(a)}}}function op(a){return a in Cu?Cu[a]:Cu[a]="on"+a}function Nw(a,l){if(a.da)a=!0;else{l=new $i(l,this);var h=a.listener,m=a.ha||a.src;a.fa&&Su(a),a=h.call(m,l)}return a}function Ru(a){return a=a[Au],a instanceof jo?a:null}var Du="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pu(a){return typeof a=="function"?a:(a[Du]||(a[Du]=function(l){return a.handleEvent(l)}),a[Du])}function Ve(){un.call(this),this.i=new jo(this),this.M=this,this.F=null}k(Ve,un),Ve.prototype[zi]=!0,Ve.prototype.removeEventListener=function(a,l,h,m){sp(this,a,l,h,m)};function qe(a,l){var h,m=a.F;if(m)for(h=[];m;m=m.F)h.push(m);if(a=a.M,m=l.type||l,typeof l=="string")l=new Oe(l,a);else if(l instanceof Oe)l.target=l.target||a;else{var T=l;l=new Oe(m,a),y(l,T)}if(T=!0,h)for(var S=h.length-1;0<=S;S--){var M=l.g=h[S];T=Bo(M,m,!0,l)&&T}if(M=l.g=a,T=Bo(M,m,!0,l)&&T,T=Bo(M,m,!1,l)&&T,h)for(S=0;S<h.length;S++)M=l.g=h[S],T=Bo(M,m,!1,l)&&T}Ve.prototype.N=function(){if(Ve.aa.N.call(this),this.i){var a=this.i,l;for(l in a.g){for(var h=a.g[l],m=0;m<h.length;m++)Uo(h[m]);delete a.g[l],a.h--}}this.F=null},Ve.prototype.K=function(a,l,h,m){return this.i.add(String(a),l,!1,h,m)},Ve.prototype.L=function(a,l,h,m){return this.i.add(String(a),l,!0,h,m)};function Bo(a,l,h,m){if(l=a.i.g[String(l)],!l)return!0;l=l.concat();for(var T=!0,S=0;S<l.length;++S){var M=l[S];if(M&&!M.da&&M.capture==h){var de=M.listener,xe=M.ha||M.src;M.fa&&Eu(a.i,M),T=de.call(xe,m)!==!1&&T}}return T&&!m.defaultPrevented}function ap(a,l,h){if(typeof a=="function")h&&(a=w(a,h));else if(a&&typeof a.handleEvent=="function")a=w(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(l)?-1:c.setTimeout(a,l||0)}function cp(a){a.g=ap(()=>{a.g=null,a.i&&(a.i=!1,cp(a))},a.l);let l=a.h;a.h=null,a.m.apply(null,l)}class Mw extends un{constructor(l,h){super(),this.m=l,this.l=h,this.h=null,this.i=!1,this.g=null}j(l){this.h=arguments,this.g?this.i=!0:cp(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qi(a){un.call(this),this.h=a,this.g={}}k(qi,un);var up=[];function lp(a){te(a.g,function(l,h){this.g.hasOwnProperty(h)&&Su(l)},a),a.g={}}qi.prototype.N=function(){qi.aa.N.call(this),lp(this)},qi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ku=c.JSON.stringify,Ow=c.JSON.parse,Vw=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function xu(){}xu.prototype.h=null;function dp(a){return a.h||(a.h=a.i())}function hp(){}var Gi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Nu(){Oe.call(this,"d")}k(Nu,Oe);function Mu(){Oe.call(this,"c")}k(Mu,Oe);var Bn={},fp=null;function $o(){return fp=fp||new Ve}Bn.La="serverreachability";function mp(a){Oe.call(this,Bn.La,a)}k(mp,Oe);function Wi(a){let l=$o();qe(l,new mp(l))}Bn.STAT_EVENT="statevent";function pp(a,l){Oe.call(this,Bn.STAT_EVENT,a),this.stat=l}k(pp,Oe);function Ge(a){let l=$o();qe(l,new pp(l,a))}Bn.Ma="timingevent";function gp(a,l){Oe.call(this,Bn.Ma,a),this.size=l}k(gp,Oe);function Hi(a,l){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},l)}function Ki(){this.g=!0}Ki.prototype.xa=function(){this.g=!1};function Fw(a,l,h,m,T,S){a.info(function(){if(a.g)if(S)for(var M="",de=S.split("&"),xe=0;xe<de.length;xe++){var re=de[xe].split("=");if(1<re.length){var Fe=re[0];re=re[1];var Le=Fe.split("_");M=2<=Le.length&&Le[1]=="type"?M+(Fe+"="+re+"&"):M+(Fe+"=redacted&")}}else M=null;else M=S;return"XMLHTTP REQ ("+m+") [attempt "+T+"]: "+l+`
`+h+`
`+M})}function Lw(a,l,h,m,T,S,M){a.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+T+"]: "+l+`
`+h+`
`+S+" "+M})}function Ar(a,l,h,m){a.info(function(){return"XMLHTTP TEXT ("+l+"): "+jw(a,h)+(m?" "+m:"")})}function Uw(a,l){a.info(function(){return"TIMEOUT: "+l})}Ki.prototype.info=function(){};function jw(a,l){if(!a.g)return l;if(!l)return null;try{var h=JSON.parse(l);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var m=h[a];if(!(2>m.length)){var T=m[1];if(Array.isArray(T)&&!(1>T.length)){var S=T[0];if(S!="noop"&&S!="stop"&&S!="close")for(var M=1;M<T.length;M++)T[M]=""}}}}return ku(h)}catch{return l}}var zo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},vp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ou;function qo(){}k(qo,xu),qo.prototype.g=function(){return new XMLHttpRequest},qo.prototype.i=function(){return{}},Ou=new qo;function ln(a,l,h,m){this.j=a,this.i=l,this.l=h,this.R=m||1,this.U=new qi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _p}function _p(){this.i=null,this.g="",this.h=!1}var bp={},Vu={};function Fu(a,l,h){a.L=1,a.v=Ko(Ft(l)),a.m=h,a.P=!0,yp(a,null)}function yp(a,l){a.F=Date.now(),Go(a),a.A=Ft(a.v);var h=a.A,m=a.R;Array.isArray(m)||(m=[String(m)]),Mp(h.i,"t",m),a.C=0,h=a.j.J,a.h=new _p,a.g=Xp(a.j,h?l:null,!a.m),0<a.O&&(a.M=new Mw(w(a.Y,a,a.g),a.O)),l=a.U,h=a.g,m=a.ca;var T="readystatechange";Array.isArray(T)||(T&&(up[0]=T.toString()),T=up);for(var S=0;S<T.length;S++){var M=np(h,T[S],m||l.handleEvent,!1,l.h||l);if(!M)break;l.g[M.key]=M}l=a.H?g(a.H):{},a.m?(a.u||(a.u="POST"),l["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,l)):(a.u="GET",a.g.ea(a.A,a.u,null,l)),Wi(),Fw(a.i,a.u,a.A,a.l,a.R,a.m)}ln.prototype.ca=function(a){a=a.target;let l=this.M;l&&Lt(a)==3?l.j():this.Y(a)},ln.prototype.Y=function(a){try{if(a==this.g)e:{let Le=Lt(this.g);var l=this.g.Ba();let Rr=this.g.Z();if(!(3>Le)&&(Le!=3||this.g&&(this.h.h||this.g.oa()||Bp(this.g)))){this.J||Le!=4||l==7||(l==8||0>=Rr?Wi(3):Wi(2)),Lu(this);var h=this.g.Z();this.X=h;t:if(Ip(this)){var m=Bp(this.g);a="";var T=m.length,S=Lt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$n(this),Qi(this);var M="";break t}this.h.i=new c.TextDecoder}for(l=0;l<T;l++)this.h.h=!0,a+=this.h.i.decode(m[l],{stream:!(S&&l==T-1)});m.length=0,this.h.g+=a,this.C=0,M=this.h.g}else M=this.g.oa();if(this.o=h==200,Lw(this.i,this.u,this.A,this.l,this.R,Le,h),this.o){if(this.T&&!this.K){t:{if(this.g){var de,xe=this.g;if((de=xe.g?xe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(de)){var re=de;break t}}re=null}if(h=re)Ar(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Uu(this,h);else{this.o=!1,this.s=3,Ge(12),$n(this),Qi(this);break e}}if(this.P){h=!0;let ht;for(;!this.J&&this.C<M.length;)if(ht=Bw(this,M),ht==Vu){Le==4&&(this.s=4,Ge(14),h=!1),Ar(this.i,this.l,null,"[Incomplete Response]");break}else if(ht==bp){this.s=4,Ge(15),Ar(this.i,this.l,M,"[Invalid Chunk]"),h=!1;break}else Ar(this.i,this.l,ht,null),Uu(this,ht);if(Ip(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Le!=4||M.length!=0||this.h.h||(this.s=1,Ge(16),h=!1),this.o=this.o&&h,!h)Ar(this.i,this.l,M,"[Invalid Chunked Response]"),$n(this),Qi(this);else if(0<M.length&&!this.W){this.W=!0;var Fe=this.j;Fe.g==this&&Fe.ba&&!Fe.M&&(Fe.j.info("Great, no buffering proxy detected. Bytes received: "+M.length),Gu(Fe),Fe.M=!0,Ge(11))}}else Ar(this.i,this.l,M,null),Uu(this,M);Le==4&&$n(this),this.o&&!this.J&&(Le==4?Kp(this.j,this):(this.o=!1,Go(this)))}else iE(this.g),h==400&&0<M.indexOf("Unknown SID")?(this.s=3,Ge(12)):(this.s=0,Ge(13)),$n(this),Qi(this)}}}catch{}finally{}};function Ip(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Bw(a,l){var h=a.C,m=l.indexOf(`
`,h);return m==-1?Vu:(h=Number(l.substring(h,m)),isNaN(h)?bp:(m+=1,m+h>l.length?Vu:(l=l.slice(m,m+h),a.C=m+h,l)))}ln.prototype.cancel=function(){this.J=!0,$n(this)};function Go(a){a.S=Date.now()+a.I,wp(a,a.I)}function wp(a,l){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Hi(w(a.ba,a),l)}function Lu(a){a.B&&(c.clearTimeout(a.B),a.B=null)}ln.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(Uw(this.i,this.A),this.L!=2&&(Wi(),Ge(17)),$n(this),this.s=2,Qi(this)):wp(this,this.S-a)};function Qi(a){a.j.G==0||a.J||Kp(a.j,a)}function $n(a){Lu(a);var l=a.M;l&&typeof l.ma=="function"&&l.ma(),a.M=null,lp(a.U),a.g&&(l=a.g,a.g=null,l.abort(),l.ma())}function Uu(a,l){try{var h=a.j;if(h.G!=0&&(h.g==a||ju(h.h,a))){if(!a.K&&ju(h.h,a)&&h.G==3){try{var m=h.Da.g.parse(l)}catch{m=null}if(Array.isArray(m)&&m.length==3){var T=m;if(T[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)Zo(h),Jo(h);else break e;qu(h),Ge(18)}}else h.za=T[1],0<h.za-h.T&&37500>T[2]&&h.F&&h.v==0&&!h.C&&(h.C=Hi(w(h.Za,h),6e3));if(1>=Ap(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else qn(h,11)}else if((a.K||h.g==a)&&Zo(h),!W(l))for(T=h.Da.g.parse(l),l=0;l<T.length;l++){let re=T[l];if(h.T=re[0],re=re[1],h.G==2)if(re[0]=="c"){h.K=re[1],h.ia=re[2];let Fe=re[3];Fe!=null&&(h.la=Fe,h.j.info("VER="+h.la));let Le=re[4];Le!=null&&(h.Aa=Le,h.j.info("SVER="+h.Aa));let Rr=re[5];Rr!=null&&typeof Rr=="number"&&0<Rr&&(m=1.5*Rr,h.L=m,h.j.info("backChannelRequestTimeoutMs_="+m)),m=h;let ht=a.g;if(ht){let ta=ht.g?ht.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ta){var S=m.h;S.g||ta.indexOf("spdy")==-1&&ta.indexOf("quic")==-1&&ta.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(Bu(S,S.h),S.h=null))}if(m.D){let Wu=ht.g?ht.g.getResponseHeader("X-HTTP-Session-Id"):null;Wu&&(m.ya=Wu,fe(m.I,m.D,Wu))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),m=h;var M=a;if(m.qa=Jp(m,m.J?m.ia:null,m.W),M.K){Cp(m.h,M);var de=M,xe=m.L;xe&&(de.I=xe),de.B&&(Lu(de),Go(de)),m.g=M}else Wp(m);0<h.i.length&&Xo(h)}else re[0]!="stop"&&re[0]!="close"||qn(h,7);else h.G==3&&(re[0]=="stop"||re[0]=="close"?re[0]=="stop"?qn(h,7):zu(h):re[0]!="noop"&&h.l&&h.l.ta(re),h.v=0)}}Wi(4)}catch{}}var $w=class{constructor(a,l){this.g=a,this.map=l}};function Ep(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Tp(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Ap(a){return a.h?1:a.g?a.g.size:0}function ju(a,l){return a.h?a.h==l:a.g?a.g.has(l):!1}function Bu(a,l){a.g?a.g.add(l):a.h=l}function Cp(a,l){a.h&&a.h==l?a.h=null:a.g&&a.g.has(l)&&a.g.delete(l)}Ep.prototype.cancel=function(){if(this.i=Sp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function Sp(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let l=a.i;for(let h of a.g.values())l=l.concat(h.D);return l}return P(a.i)}function zw(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var l=[],h=a.length,m=0;m<h;m++)l.push(a[m]);return l}l=[],h=0;for(m in a)l[h++]=a[m];return l}function qw(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var l=[];a=a.length;for(var h=0;h<a;h++)l.push(h);return l}l=[],h=0;for(let m in a)l[h++]=m;return l}}}function Rp(a,l){if(a.forEach&&typeof a.forEach=="function")a.forEach(l,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,l,void 0);else for(var h=qw(a),m=zw(a),T=m.length,S=0;S<T;S++)l.call(void 0,m[S],h&&h[S],a)}var Dp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gw(a,l){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var m=a[h].indexOf("="),T=null;if(0<=m){var S=a[h].substring(0,m);T=a[h].substring(m+1)}else S=a[h];l(S,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function zn(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof zn){this.h=a.h,Wo(this,a.j),this.o=a.o,this.g=a.g,Ho(this,a.s),this.l=a.l;var l=a.i,h=new Xi;h.i=l.i,l.g&&(h.g=new Map(l.g),h.h=l.h),Pp(this,h),this.m=a.m}else a&&(l=String(a).match(Dp))?(this.h=!1,Wo(this,l[1]||"",!0),this.o=Yi(l[2]||""),this.g=Yi(l[3]||"",!0),Ho(this,l[4]),this.l=Yi(l[5]||"",!0),Pp(this,l[6]||"",!0),this.m=Yi(l[7]||"")):(this.h=!1,this.i=new Xi(null,this.h))}zn.prototype.toString=function(){var a=[],l=this.j;l&&a.push(Ji(l,kp,!0),":");var h=this.g;return(h||l=="file")&&(a.push("//"),(l=this.o)&&a.push(Ji(l,kp,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(Ji(h,h.charAt(0)=="/"?Kw:Hw,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",Ji(h,Yw)),a.join("")};function Ft(a){return new zn(a)}function Wo(a,l,h){a.j=h?Yi(l,!0):l,a.j&&(a.j=a.j.replace(/:$/,""))}function Ho(a,l){if(l){if(l=Number(l),isNaN(l)||0>l)throw Error("Bad port number "+l);a.s=l}else a.s=null}function Pp(a,l,h){l instanceof Xi?(a.i=l,Jw(a.i,a.h)):(h||(l=Ji(l,Qw)),a.i=new Xi(l,a.h))}function fe(a,l,h){a.i.set(l,h)}function Ko(a){return fe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Yi(a,l){return a?l?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ji(a,l,h){return typeof a=="string"?(a=encodeURI(a).replace(l,Ww),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Ww(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var kp=/[#\/\?@]/g,Hw=/[#\?:]/g,Kw=/[#\?]/g,Qw=/[#\?@]/g,Yw=/#/g;function Xi(a,l){this.h=this.g=null,this.i=a||null,this.j=!!l}function dn(a){a.g||(a.g=new Map,a.h=0,a.i&&Gw(a.i,function(l,h){a.add(decodeURIComponent(l.replace(/\+/g," ")),h)}))}n=Xi.prototype,n.add=function(a,l){dn(this),this.i=null,a=Cr(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(l),this.h+=1,this};function xp(a,l){dn(a),l=Cr(a,l),a.g.has(l)&&(a.i=null,a.h-=a.g.get(l).length,a.g.delete(l))}function Np(a,l){return dn(a),l=Cr(a,l),a.g.has(l)}n.forEach=function(a,l){dn(this),this.g.forEach(function(h,m){h.forEach(function(T){a.call(l,T,m,this)},this)},this)},n.na=function(){dn(this);let a=Array.from(this.g.values()),l=Array.from(this.g.keys()),h=[];for(let m=0;m<l.length;m++){let T=a[m];for(let S=0;S<T.length;S++)h.push(l[m])}return h},n.V=function(a){dn(this);let l=[];if(typeof a=="string")Np(this,a)&&(l=l.concat(this.g.get(Cr(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)l=l.concat(a[h])}return l},n.set=function(a,l){return dn(this),this.i=null,a=Cr(this,a),Np(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[l]),this.h+=1,this},n.get=function(a,l){return a?(a=this.V(a),0<a.length?String(a[0]):l):l};function Mp(a,l,h){xp(a,l),0<h.length&&(a.i=null,a.g.set(Cr(a,l),P(h)),a.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],l=Array.from(this.g.keys());for(var h=0;h<l.length;h++){var m=l[h];let S=encodeURIComponent(String(m)),M=this.V(m);for(m=0;m<M.length;m++){var T=S;M[m]!==""&&(T+="="+encodeURIComponent(String(M[m]))),a.push(T)}}return this.i=a.join("&")};function Cr(a,l){return l=String(l),a.j&&(l=l.toLowerCase()),l}function Jw(a,l){l&&!a.j&&(dn(a),a.i=null,a.g.forEach(function(h,m){var T=m.toLowerCase();m!=T&&(xp(this,m),Mp(this,T,h))},a)),a.j=l}function Xw(a,l){let h=new Ki;if(c.Image){let m=new Image;m.onload=C(hn,h,"TestLoadImage: loaded",!0,l,m),m.onerror=C(hn,h,"TestLoadImage: error",!1,l,m),m.onabort=C(hn,h,"TestLoadImage: abort",!1,l,m),m.ontimeout=C(hn,h,"TestLoadImage: timeout",!1,l,m),c.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=a}else l(!1)}function Zw(a,l){let h=new Ki,m=new AbortController,T=setTimeout(()=>{m.abort(),hn(h,"TestPingServer: timeout",!1,l)},1e4);fetch(a,{signal:m.signal}).then(S=>{clearTimeout(T),S.ok?hn(h,"TestPingServer: ok",!0,l):hn(h,"TestPingServer: server error",!1,l)}).catch(()=>{clearTimeout(T),hn(h,"TestPingServer: error",!1,l)})}function hn(a,l,h,m,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),m(h)}catch{}}function eE(){this.g=new Vw}function tE(a,l,h){let m=h||"";try{Rp(a,function(T,S){let M=T;d(T)&&(M=ku(T)),l.push(m+S+"="+encodeURIComponent(M))})}catch(T){throw l.push(m+"type="+encodeURIComponent("_badmap")),T}}function Zi(a){this.l=a.Ub||null,this.j=a.eb||!1}k(Zi,xu),Zi.prototype.g=function(){return new Qo(this.l,this.j)},Zi.prototype.i=function(a){return function(){return a}}({});function Qo(a,l){Ve.call(this),this.D=a,this.o=l,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(Qo,Ve),n=Qo.prototype,n.open=function(a,l){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=l,this.readyState=1,ts(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let l={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(l.body=a),(this.D||c).fetch(new Request(this.A,l)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,es(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ts(this)),this.g&&(this.readyState=3,ts(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Op(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Op(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var l=a.value?a.value:new Uint8Array(0);(l=this.v.decode(l,{stream:!a.done}))&&(this.response=this.responseText+=l)}a.done?es(this):ts(this),this.readyState==3&&Op(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,es(this))},n.Qa=function(a){this.g&&(this.response=a,es(this))},n.ga=function(){this.g&&es(this)};function es(a){a.readyState=4,a.l=null,a.j=null,a.v=null,ts(a)}n.setRequestHeader=function(a,l){this.u.append(a,l)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],l=this.h.entries();for(var h=l.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=l.next();return a.join(`\r
`)};function ts(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Qo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Vp(a){let l="";return te(a,function(h,m){l+=m,l+=":",l+=h,l+=`\r
`}),l}function $u(a,l,h){e:{for(m in h){var m=!1;break e}m=!0}m||(h=Vp(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):fe(a,l,h))}function _e(a){Ve.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(_e,Ve);var nE=/^https?$/i,rE=["POST","PUT"];n=_e.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,l,h,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);l=l?l.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ou.g(),this.v=this.o?dp(this.o):dp(Ou),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(l,String(a),!0),this.B=!1}catch(S){Fp(this,S);return}if(a=h||"",h=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var T in m)h.set(T,m[T]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let S of m.keys())h.set(S,m.get(S));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(h.keys()).find(S=>S.toLowerCase()=="content-type"),T=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(rE,l,void 0))||m||T||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,M]of h)this.g.setRequestHeader(S,M);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{jp(this),this.u=!0,this.g.send(a),this.u=!1}catch(S){Fp(this,S)}};function Fp(a,l){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=l,a.m=5,Lp(a),Yo(a)}function Lp(a){a.A||(a.A=!0,qe(a,"complete"),qe(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,qe(this,"complete"),qe(this,"abort"),Yo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yo(this,!0)),_e.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Up(this):this.bb())},n.bb=function(){Up(this)};function Up(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Lt(a)!=4||a.Z()!=2)){if(a.u&&Lt(a)==4)ap(a.Ea,0,a);else if(qe(a,"readystatechange"),Lt(a)==4){a.h=!1;try{let M=a.Z();e:switch(M){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var l=!0;break e;default:l=!1}var h;if(!(h=l)){var m;if(m=M===0){var T=String(a.D).match(Dp)[1]||null;!T&&c.self&&c.self.location&&(T=c.self.location.protocol.slice(0,-1)),m=!nE.test(T?T.toLowerCase():"")}h=m}if(h)qe(a,"complete"),qe(a,"success");else{a.m=6;try{var S=2<Lt(a)?a.g.statusText:""}catch{S=""}a.l=S+" ["+a.Z()+"]",Lp(a)}}finally{Yo(a)}}}}function Yo(a,l){if(a.g){jp(a);let h=a.g,m=a.v[0]?()=>{}:null;a.g=null,a.v=null,l||qe(a,"ready");try{h.onreadystatechange=m}catch{}}}function jp(a){a.I&&(c.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function Lt(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<Lt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var l=this.g.responseText;return a&&l.indexOf(a)==0&&(l=l.substring(a.length)),Ow(l)}};function Bp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function iE(a){let l={};a=(a.g&&2<=Lt(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<a.length;m++){if(W(a[m]))continue;var h=E(a[m]);let T=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let S=l[T]||[];l[T]=S,S.push(h)}I(l,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ns(a,l,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||l}function $p(a){this.Aa=0,this.i=[],this.j=new Ki,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ns("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ns("baseRetryDelayMs",5e3,a),this.cb=ns("retryDelaySeedMs",1e4,a),this.Wa=ns("forwardChannelMaxRetries",2,a),this.wa=ns("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Ep(a&&a.concurrentRequestLimit),this.Da=new eE,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=$p.prototype,n.la=8,n.G=1,n.connect=function(a,l,h,m){Ge(0),this.W=a,this.H=l||{},h&&m!==void 0&&(this.H.OSID=h,this.H.OAID=m),this.F=this.X,this.I=Jp(this,null,this.W),Xo(this)};function zu(a){if(zp(a),a.G==3){var l=a.U++,h=Ft(a.I);if(fe(h,"SID",a.K),fe(h,"RID",l),fe(h,"TYPE","terminate"),rs(a,h),l=new ln(a,a.j,l),l.L=2,l.v=Ko(Ft(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(l.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=l.v,h=!0),h||(l.g=Xp(l.j,null),l.g.ea(l.v)),l.F=Date.now(),Go(l)}Yp(a)}function Jo(a){a.g&&(Gu(a),a.g.cancel(),a.g=null)}function zp(a){Jo(a),a.u&&(c.clearTimeout(a.u),a.u=null),Zo(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Xo(a){if(!Tp(a.h)&&!a.s){a.s=!0;var l=a.Ga;ji||tp(),Bi||(ji(),Bi=!0),wu.add(l,a),a.B=0}}function sE(a,l){return Ap(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=l.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Hi(w(a.Ga,a,l),Qp(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let T=new ln(this,this.j,a),S=this.o;if(this.S&&(S?(S=g(S),y(S,this.S)):S=this.S),this.m!==null||this.O||(T.H=S,S=null),this.P)e:{for(var l=0,h=0;h<this.i.length;h++){t:{var m=this.i[h];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(l+=m,4096<l){l=h;break e}if(l===4096||h===this.i.length-1){l=h+1;break e}}l=1e3}else l=1e3;l=Gp(this,T,l),h=Ft(this.I),fe(h,"RID",a),fe(h,"CVER",22),this.D&&fe(h,"X-HTTP-Session-Id",this.D),rs(this,h),S&&(this.O?l="headers="+encodeURIComponent(String(Vp(S)))+"&"+l:this.m&&$u(h,this.m,S)),Bu(this.h,T),this.Ua&&fe(h,"TYPE","init"),this.P?(fe(h,"$req",l),fe(h,"SID","null"),T.T=!0,Fu(T,h,null)):Fu(T,h,l),this.G=2}}else this.G==3&&(a?qp(this,a):this.i.length==0||Tp(this.h)||qp(this))};function qp(a,l){var h;l?h=l.l:h=a.U++;let m=Ft(a.I);fe(m,"SID",a.K),fe(m,"RID",h),fe(m,"AID",a.T),rs(a,m),a.m&&a.o&&$u(m,a.m,a.o),h=new ln(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),l&&(a.i=l.D.concat(a.i)),l=Gp(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Bu(a.h,h),Fu(h,m,l)}function rs(a,l){a.H&&te(a.H,function(h,m){fe(l,m,h)}),a.l&&Rp({},function(h,m){fe(l,m,h)})}function Gp(a,l,h){h=Math.min(a.i.length,h);var m=a.l?w(a.l.Na,a.l,a):null;e:{var T=a.i;let S=-1;for(;;){let M=["count="+h];S==-1?0<h?(S=T[0].g,M.push("ofs="+S)):S=0:M.push("ofs="+S);let de=!0;for(let xe=0;xe<h;xe++){let re=T[xe].g,Fe=T[xe].map;if(re-=S,0>re)S=Math.max(0,T[xe].g-100),de=!1;else try{tE(Fe,M,"req"+re+"_")}catch{m&&m(Fe)}}if(de){m=M.join("&");break e}}}return a=a.i.splice(0,h),l.D=a,m}function Wp(a){if(!a.g&&!a.u){a.Y=1;var l=a.Fa;ji||tp(),Bi||(ji(),Bi=!0),wu.add(l,a),a.v=0}}function qu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Hi(w(a.Fa,a),Qp(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,Hp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Hi(w(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ge(10),Jo(this),Hp(this))};function Gu(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function Hp(a){a.g=new ln(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var l=Ft(a.qa);fe(l,"RID","rpc"),fe(l,"SID",a.K),fe(l,"AID",a.T),fe(l,"CI",a.F?"0":"1"),!a.F&&a.ja&&fe(l,"TO",a.ja),fe(l,"TYPE","xmlhttp"),rs(a,l),a.m&&a.o&&$u(l,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=Ko(Ft(l)),h.m=null,h.P=!0,yp(h,a)}n.Za=function(){this.C!=null&&(this.C=null,Jo(this),qu(this),Ge(19))};function Zo(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function Kp(a,l){var h=null;if(a.g==l){Zo(a),Gu(a),a.g=null;var m=2}else if(ju(a.h,l))h=l.D,Cp(a.h,l),m=1;else return;if(a.G!=0){if(l.o)if(m==1){h=l.m?l.m.length:0,l=Date.now()-l.F;var T=a.B;m=$o(),qe(m,new gp(m,h)),Xo(a)}else Wp(a);else if(T=l.s,T==3||T==0&&0<l.X||!(m==1&&sE(a,l)||m==2&&qu(a)))switch(h&&0<h.length&&(l=a.h,l.i=l.i.concat(h)),T){case 1:qn(a,5);break;case 4:qn(a,10);break;case 3:qn(a,6);break;default:qn(a,2)}}}function Qp(a,l){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*l}function qn(a,l){if(a.j.info("Error code "+l),l==2){var h=w(a.fb,a),m=a.Xa;let T=!m;m=new zn(m||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Wo(m,"https"),Ko(m),T?Xw(m.toString(),h):Zw(m.toString(),h)}else Ge(2);a.G=0,a.l&&a.l.sa(l),Yp(a),zp(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Ge(2)):(this.j.info("Failed to ping google.com"),Ge(1))};function Yp(a){if(a.G=0,a.ka=[],a.l){let l=Sp(a.h);(l.length!=0||a.i.length!=0)&&(R(a.ka,l),R(a.ka,a.i),a.h.i.length=0,P(a.i),a.i.length=0),a.l.ra()}}function Jp(a,l,h){var m=h instanceof zn?Ft(h):new zn(h);if(m.g!="")l&&(m.g=l+"."+m.g),Ho(m,m.s);else{var T=c.location;m=T.protocol,l=l?l+"."+T.hostname:T.hostname,T=+T.port;var S=new zn(null);m&&Wo(S,m),l&&(S.g=l),T&&Ho(S,T),h&&(S.l=h),m=S}return h=a.D,l=a.ya,h&&l&&fe(m,h,l),fe(m,"VER",a.la),rs(a,m),m}function Xp(a,l,h){if(l&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return l=a.Ca&&!a.pa?new _e(new Zi({eb:h})):new _e(a.pa),l.Ha(a.J),l}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zp(){}n=Zp.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ea(){}ea.prototype.g=function(a,l){return new Je(a,l)};function Je(a,l){Ve.call(this),this.g=new $p(l),this.l=a,this.h=l&&l.messageUrlParams||null,a=l&&l.messageHeaders||null,l&&l.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=l&&l.initMessageHeaders||null,l&&l.messageContentType&&(a?a["X-WebChannel-Content-Type"]=l.messageContentType:a={"X-WebChannel-Content-Type":l.messageContentType}),l&&l.va&&(a?a["X-WebChannel-Client-Profile"]=l.va:a={"X-WebChannel-Client-Profile":l.va}),this.g.S=a,(a=l&&l.Sb)&&!W(a)&&(this.g.m=a),this.v=l&&l.supportsCrossDomainXhr||!1,this.u=l&&l.sendRawJson||!1,(l=l&&l.httpSessionIdParam)&&!W(l)&&(this.g.D=l,a=this.h,a!==null&&l in a&&(a=this.h,l in a&&delete a[l])),this.j=new Sr(this)}k(Je,Ve),Je.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Je.prototype.close=function(){zu(this.g)},Je.prototype.o=function(a){var l=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=ku(a),a=h);l.i.push(new $w(l.Ya++,a)),l.G==3&&Xo(l)},Je.prototype.N=function(){this.g.l=null,delete this.j,zu(this.g),delete this.g,Je.aa.N.call(this)};function eg(a){Nu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var l=a.__sm__;if(l){e:{for(let h in l){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,l=l!==null&&a in l?l[a]:void 0),this.data=l}else this.data=a}k(eg,Nu);function tg(){Mu.call(this),this.status=1}k(tg,Mu);function Sr(a){this.g=a}k(Sr,Zp),Sr.prototype.ua=function(){qe(this.g,"a")},Sr.prototype.ta=function(a){qe(this.g,new eg(a))},Sr.prototype.sa=function(a){qe(this.g,new tg)},Sr.prototype.ra=function(){qe(this.g,"b")},ea.prototype.createWebChannel=ea.prototype.g,Je.prototype.send=Je.prototype.o,Je.prototype.open=Je.prototype.m,Je.prototype.close=Je.prototype.close,Kh=nn.createWebChannelTransport=function(){return new ea},Hh=nn.getStatEventTarget=function(){return $o()},Wh=nn.Event=Bn,xc=nn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zo.NO_ERROR=0,zo.TIMEOUT=8,zo.HTTP_ERROR=6,fo=nn.ErrorCode=zo,vp.COMPLETE="complete",Gh=nn.EventType=vp,hp.EventType=Gi,Gi.OPEN="a",Gi.CLOSE="b",Gi.ERROR="c",Gi.MESSAGE="d",Ve.prototype.listen=Ve.prototype.K,vi=nn.WebChannel=hp,qP=nn.FetchXmlHttpFactory=Zi,_e.prototype.listenOnce=_e.prototype.L,_e.prototype.getLastError=_e.prototype.Ka,_e.prototype.getLastErrorCode=_e.prototype.Ba,_e.prototype.getStatus=_e.prototype.Z,_e.prototype.getResponseJson=_e.prototype.Oa,_e.prototype.getResponseText=_e.prototype.oa,_e.prototype.send=_e.prototype.ea,_e.prototype.setWithCredentials=_e.prototype.Ha,qh=nn.XhrIo=_e}).apply(typeof kc<"u"?kc:typeof self<"u"?self:typeof window<"u"?window:{});var Dy="@firebase/firestore";var ke=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ke.UNAUTHENTICATED=new ke(null),ke.GOOGLE_CREDENTIALS=new ke("google-credentials-uid"),ke.FIRST_PARTY=new ke("first-party-uid"),ke.MOCK_USER=new ke("mock-user");var Vi="10.14.0";var vr=new Cn("@firebase/firestore");function mo(){return vr.logLevel}function L(n,...e){if(vr.logLevel<=Z.DEBUG){let t=e.map(Mm);vr.debug(`Firestore (${Vi}): ${n}`,...t)}}function sn(n,...e){if(vr.logLevel<=Z.ERROR){let t=e.map(Mm);vr.error(`Firestore (${Vi}): ${n}`,...t)}}function Ti(n,...e){if(vr.logLevel<=Z.WARN){let t=e.map(Mm);vr.warn(`Firestore (${Vi}): ${n}`,...t)}}function Mm(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function K(n="Unexpected state"){let e=`FIRESTORE (${Vi}) INTERNAL ASSERTION FAILED: `+n;throw sn(e),new Error(e)}function ue(n,e){n||K()}function Q(n,e){return n}var D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},F=class extends rt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var rn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Fc=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Zh=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ke.UNAUTHENTICATED))}shutdown(){}},ef=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},tf=class{constructor(e){this.t=e,this.currentUser=ke.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ue(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),s=new rn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new rn,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>b(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},c=u=>{L("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(L("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new rn)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(L("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ue(typeof r.accessToken=="string"),new Fc(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ue(e===null||typeof e=="string"),new ke(e)}},nf=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=ke.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},rf=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new nf(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ke.FIRST_PARTY))}shutdown(){}invalidateToken(){}},sf=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},of=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ue(this.o===void 0);let r=s=>{s.error!=null&&L("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,L("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{L("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):L("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ue(typeof t.token=="string"),this.R=t.token,new sf(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function GP(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Lc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=GP(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function ie(n,e){return n<e?-1:n>e?1:0}function Ai(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Me=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new F(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new F(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new F(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Y=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Me(0,0))}static max(){return new n(new Me(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Uc=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&K(),r===void 0?r=e.length-t:r>e.length-t&&K(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},ve=class n extends Uc{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new F(D.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},WP=/^[_a-zA-Z][_a-zA-Z0-9]*$/,it=class n extends Uc{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return WP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new F(D.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new F(D.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new F(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(s(),i++)}if(s(),o)throw new F(D.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var $=class n{constructor(e){this.path=e}static fromPath(e){return new n(ve.fromString(e))}static fromName(e){return new n(ve.fromString(e).popFirst(5))}static empty(){return new n(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ve.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ve(e.slice()))}};var af=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};af.UNKNOWN_ID=-1;function HP(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Y.fromTimestamp(r===1e9?new Me(t+1,0):new Me(t,r));return new _r(i,$.empty(),e)}function KP(n){return new _r(n.readTime,n.key,-1)}var _r=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Y.min(),$.empty(),-1)}static max(){return new n(Y.max(),$.empty(),-1)}};function QP(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$.comparator(n.documentKey,e.documentKey),t!==0?t:ie(n.largestBatchId,e.largestBatchId))}var YP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",cf=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Mo(n){return b(this,null,function*(){if(n.code!==D.FAILED_PRECONDITION||n.message!==YP)throw n;L("LocalStore","Unexpectedly lost primary lease")})}var x=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&K(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++s,o&&s===i&&t()},u=>r(u))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),c=0;for(let u=0;u<s;u++){let d=u;t(e[d]).next(f=>{o[d]=f,++c,c===s&&r(o)},f=>i(f))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function JP(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Oo(n){return n.name==="IndexedDbTransactionError"}var dI=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function mu(n){return n==null}function Io(n){return n===0&&1/n==-1/0}function XP(n){return typeof n=="number"&&Number.isInteger(n)&&!Io(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var ZP=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],_F=[...ZP,"documentOverlays"],ek=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],tk=ek,nk=[...tk,"indexConfiguration","indexState","indexEntries"];var bF=[...nk,"globals"];function Py(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Fi(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function hI(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ie=class n{constructor(e,t){this.comparator=e,this.root=t||xt.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,xt.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ii(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ii(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ii(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ii(this.root,e,this.comparator,!0)}},Ii=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},xt=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw K();let e=this.left.check();if(e!==this.right.check())throw K();return e+(this.isRed()?0:1)}};xt.EMPTY=null,xt.RED=!0,xt.BLACK=!1;xt.EMPTY=new class{constructor(){this.size=0}get key(){throw K()}get value(){throw K()}get color(){throw K()}get left(){throw K()}get right(){throw K()}copy(e,t,r,i,s){return this}insert(e,t,r){return new xt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var $e=class n{constructor(e){this.comparator=e,this.data=new Ie(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new jc(this.data.getIterator())}getIteratorFrom(e){return new jc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},jc=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var kt=class n{constructor(e){this.fields=e,e.sort(it.comparator)}static empty(){return new n([])}unionWith(e){let t=new $e(it.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ai(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Bc=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ze=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Bc("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ze.EMPTY_BYTE_STRING=new ze("");var rk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function on(n){if(ue(!!n),typeof n=="string"){let e=0,t=rk.exec(n);if(ue(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pe(n.seconds),nanos:pe(n.nanos)}}function pe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Vn(n){return typeof n=="string"?ze.fromBase64String(n):ze.fromUint8Array(n)}function Om(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Vm(n){let e=n.mapValue.fields.__previous_value__;return Om(e)?Vm(e):e}function wo(n){let e=on(n.mapValue.fields.__local_write_time__.timestampValue);return new Me(e.seconds,e.nanos)}var uf=class{constructor(e,t,r,i,s,o,c,u,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}},$c=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Nc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function br(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Om(n)?4:mI(n)?9007199254740991:fI(n)?10:11:K()}function Ot(n,e){if(n===e)return!0;let t=br(n);if(t!==br(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return wo(n).isEqual(wo(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=on(i.timestampValue),c=on(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Vn(i.bytesValue).isEqual(Vn(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return pe(i.geoPointValue.latitude)===pe(s.geoPointValue.latitude)&&pe(i.geoPointValue.longitude)===pe(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return pe(i.integerValue)===pe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=pe(i.doubleValue),c=pe(s.doubleValue);return o===c?Io(o)===Io(c):isNaN(o)&&isNaN(c)}return!1}(n,e);case 9:return Ai(n.arrayValue.values||[],e.arrayValue.values||[],Ot);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},c=s.mapValue.fields||{};if(Py(o)!==Py(c))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Ot(o[u],c[u])))return!1;return!0}(n,e);default:return K()}}function Eo(n,e){return(n.values||[]).find(t=>Ot(t,e))!==void 0}function Ci(n,e){if(n===e)return 0;let t=br(n),r=br(e);if(t!==r)return ie(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ie(n.booleanValue,e.booleanValue);case 2:return function(s,o){let c=pe(s.integerValue||s.doubleValue),u=pe(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(n,e);case 3:return ky(n.timestampValue,e.timestampValue);case 4:return ky(wo(n),wo(e));case 5:return ie(n.stringValue,e.stringValue);case 6:return function(s,o){let c=Vn(s),u=Vn(o);return c.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let c=s.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){let f=ie(c[d],u[d]);if(f!==0)return f}return ie(c.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let c=ie(pe(s.latitude),pe(o.latitude));return c!==0?c:ie(pe(s.longitude),pe(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return xy(n.arrayValue,e.arrayValue);case 10:return function(s,o){var c,u,d,f;let p=s.fields||{},w=o.fields||{},C=(c=p.value)===null||c===void 0?void 0:c.arrayValue,k=(u=w.value)===null||u===void 0?void 0:u.arrayValue,P=ie(((d=C?.values)===null||d===void 0?void 0:d.length)||0,((f=k?.values)===null||f===void 0?void 0:f.length)||0);return P!==0?P:xy(C,k)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Nc.mapValue&&o===Nc.mapValue)return 0;if(s===Nc.mapValue)return 1;if(o===Nc.mapValue)return-1;let c=s.fields||{},u=Object.keys(c),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){let w=ie(u[p],f[p]);if(w!==0)return w;let C=Ci(c[u[p]],d[f[p]]);if(C!==0)return C}return ie(u.length,f.length)}(n.mapValue,e.mapValue);default:throw K()}}function ky(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ie(n,e);let t=on(n),r=on(e),i=ie(t.seconds,r.seconds);return i!==0?i:ie(t.nanos,r.nanos)}function xy(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Ci(t[i],r[i]);if(s)return s}return ie(t.length,r.length)}function Si(n){return lf(n)}function lf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=on(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Vn(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return $.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=lf(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${lf(t.fields[o])}`;return i+"}"}(n.mapValue):K()}function Ny(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function df(n){return!!n&&"integerValue"in n}function Fm(n){return!!n&&"arrayValue"in n}function My(n){return!!n&&"nullValue"in n}function Oy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Oc(n){return!!n&&"mapValue"in n}function fI(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function go(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Fi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=go(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=go(n.arrayValue.values[t]);return e}return Object.assign({},n)}function mI(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var bt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Oc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=go(t)}setAll(e){let t=it.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!t.isImmediateParentOf(c)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=c.popLast()}o?r[c.lastSegment()]=go(o):i.push(c.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Oc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ot(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Oc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Fi(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(go(this.value))}};function pI(n){let e=[];return Fi(n.fields,(t,r)=>{let i=new it([t]);if(Oc(r)){let s=pI(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new kt(e)}var yt=class n{constructor(e,t,r,i,s,o,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new n(e,0,Y.min(),Y.min(),Y.min(),bt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Y.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Y.min(),Y.min(),bt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Y.min(),Y.min(),bt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ri=class{constructor(e,t){this.position=e,this.inclusive=t}};function Vy(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=$.comparator($.fromName(o.referenceValue),t.key):r=Ci(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Fy(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ot(n.position[t],e.position[t]))return!1;return!0}var yr=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function ik(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var zc=class{},Ae=class n extends zc{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new ff(e,t,r):t==="array-contains"?new gf(e,r):t==="in"?new vf(e,r):t==="not-in"?new _f(e,r):t==="array-contains-any"?new bf(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new mf(e,r):new pf(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Ci(t,this.value)):t!==null&&br(this.value)===br(t)&&this.matchesComparison(Ci(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},It=class n extends zc{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return gI(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function gI(n){return n.op==="and"}function vI(n){return sk(n)&&gI(n)}function sk(n){for(let e of n.filters)if(e instanceof It)return!1;return!0}function hf(n){if(n instanceof Ae)return n.field.canonicalString()+n.op.toString()+Si(n.value);if(vI(n))return n.filters.map(e=>hf(e)).join(",");{let e=n.filters.map(t=>hf(t)).join(",");return`${n.op}(${e})`}}function _I(n,e){return n instanceof Ae?function(r,i){return i instanceof Ae&&r.op===i.op&&r.field.isEqual(i.field)&&Ot(r.value,i.value)}(n,e):n instanceof It?function(r,i){return i instanceof It&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,c)=>s&&_I(o,i.filters[c]),!0):!1}(n,e):void K()}function bI(n){return n instanceof Ae?function(t){return`${t.field.canonicalString()} ${t.op} ${Si(t.value)}`}(n):n instanceof It?function(t){return t.op.toString()+" {"+t.getFilters().map(bI).join(" ,")+"}"}(n):"Filter"}var ff=class extends Ae{constructor(e,t,r){super(e,t,r),this.key=$.fromName(r.referenceValue)}matches(e){let t=$.comparator(e.key,this.key);return this.matchesComparison(t)}},mf=class extends Ae{constructor(e,t){super(e,"in",t),this.keys=yI("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},pf=class extends Ae{constructor(e,t){super(e,"not-in",t),this.keys=yI("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function yI(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>$.fromName(r.referenceValue))}var gf=class extends Ae{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Fm(t)&&Eo(t.arrayValue,this.value)}},vf=class extends Ae{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Eo(this.value.arrayValue,t)}},_f=class extends Ae{constructor(e,t){super(e,"not-in",t)}matches(e){if(Eo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Eo(this.value.arrayValue,t)}},bf=class extends Ae{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Fm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Eo(this.value.arrayValue,r))}};var yf=class{constructor(e,t=null,r=[],i=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}};function Ly(n,e=null,t=[],r=[],i=null,s=null,o=null){return new yf(n,e,t,r,i,s,o)}function Lm(n){let e=Q(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>hf(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),mu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Si(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Si(r)).join(",")),e.ue=t}return e.ue}function Um(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!ik(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!_I(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Fy(n.startAt,e.startAt)&&Fy(n.endAt,e.endAt)}function If(n){return $.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Fn=class{constructor(e,t=null,r=[],i=[],s=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function ok(n,e,t,r,i,s,o,c){return new Fn(n,e,t,r,i,s,o,c)}function jm(n){return new Fn(n)}function Uy(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function II(n){return n.collectionGroup!==null}function vo(n){let e=Q(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new $e(it.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new yr(s,r))}),t.has(it.keyField().canonicalString())||e.ce.push(new yr(it.keyField(),r))}return e.ce}function Nt(n){let e=Q(n);return e.le||(e.le=ak(e,vo(n))),e.le}function ak(n,e){if(n.limitType==="F")return Ly(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new yr(i.field,s)});let t=n.endAt?new Ri(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ri(n.startAt.position,n.startAt.inclusive):null;return Ly(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function wf(n,e){let t=n.filters.concat([e]);return new Fn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function qc(n,e,t){return new Fn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function pu(n,e){return Um(Nt(n),Nt(e))&&n.limitType===e.limitType}function wI(n){return`${Lm(Nt(n))}|lt:${n.limitType}`}function _i(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>bI(i)).join(", ")}]`),mu(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Si(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Si(i)).join(",")),`Target(${r})`}(Nt(n))}; limitType=${n.limitType})`}function gu(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):$.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of vo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,c,u){let d=Vy(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,vo(r),i)||r.endAt&&!function(o,c,u){let d=Vy(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,vo(r),i))}(n,e)}function ck(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function EI(n){return(e,t)=>{let r=!1;for(let i of vo(n)){let s=uk(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function uk(n,e,t){let r=n.field.isKeyField()?$.comparator(e.key,t.key):function(s,o,c){let u=o.data.field(s),d=c.data.field(s);return u!==null&&d!==null?Ci(u,d):K()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return K()}}var Ln=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Fi(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return hI(this.inner)}size(){return this.innerSize}};var lk=new Ie($.comparator);function an(){return lk}var TI=new Ie($.comparator);function po(...n){let e=TI;for(let t of n)e=e.insert(t.key,t);return e}function AI(n){let e=TI;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function fr(){return _o()}function CI(){return _o()}function _o(){return new Ln(n=>n.toString(),(n,e)=>n.isEqual(e))}var dk=new Ie($.comparator),hk=new $e($.comparator);function ee(...n){let e=hk;for(let t of n)e=e.add(t);return e}var fk=new $e(ie);function mk(){return fk}function Bm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Io(e)?"-0":e}}function SI(n){return{integerValue:""+n}}function pk(n,e){return XP(e)?SI(e):Bm(n,e)}var Di=class{constructor(){this._=void 0}};function gk(n,e,t){return n instanceof Pi?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Om(s)&&(s=Vm(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Ir?DI(n,e):n instanceof wr?PI(n,e):function(i,s){let o=RI(i,s),c=jy(o)+jy(i.Pe);return df(o)&&df(i.Pe)?SI(c):Bm(i.serializer,c)}(n,e)}function vk(n,e,t){return n instanceof Ir?DI(n,e):n instanceof wr?PI(n,e):t}function RI(n,e){return n instanceof ki?function(r){return df(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Pi=class extends Di{},Ir=class extends Di{constructor(e){super(),this.elements=e}};function DI(n,e){let t=kI(e);for(let r of n.elements)t.some(i=>Ot(i,r))||t.push(r);return{arrayValue:{values:t}}}var wr=class extends Di{constructor(e){super(),this.elements=e}};function PI(n,e){let t=kI(e);for(let r of n.elements)t=t.filter(i=>!Ot(i,r));return{arrayValue:{values:t}}}var ki=class extends Di{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function jy(n){return pe(n.integerValue||n.doubleValue)}function kI(n){return Fm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function _k(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Ir&&i instanceof Ir||r instanceof wr&&i instanceof wr?Ai(r.elements,i.elements,Ot):r instanceof ki&&i instanceof ki?Ot(r.Pe,i.Pe):r instanceof Pi&&i instanceof Pi}(n.transform,e.transform)}var Ef=class{constructor(e,t){this.version=e,this.transformResults=t}},gr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Vc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var xi=class{};function xI(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Gc(n.key,gr.none()):new Er(n.key,n.data,gr.none());{let t=n.data,r=bt.empty(),i=new $e(it.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new cn(n.key,r,new kt(i.toArray()),gr.none())}}function bk(n,e,t){n instanceof Er?function(i,s,o){let c=i.value.clone(),u=$y(i.fieldTransforms,s,o.transformResults);c.setAll(u),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):n instanceof cn?function(i,s,o){if(!Vc(i.precondition,s))return void s.convertToUnknownDocument(o.version);let c=$y(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(NI(i)),u.setAll(c),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function bo(n,e,t,r){return n instanceof Er?function(s,o,c,u){if(!Vc(s.precondition,o))return c;let d=s.value.clone(),f=zy(s.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof cn?function(s,o,c,u){if(!Vc(s.precondition,o))return c;let d=zy(s.fieldTransforms,u,o),f=o.data;return f.setAll(NI(s)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(s,o,c){return Vc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(n,e,t)}function yk(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=RI(r.transform,i||null);s!=null&&(t===null&&(t=bt.empty()),t.set(r.field,s))}return t||null}function By(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ai(r,i,(s,o)=>_k(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Er=class extends xi{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},cn=class extends xi{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function NI(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function $y(n,e,t){let r=new Map;ue(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,c=e.data.field(s.field);r.set(s.field,vk(o,c,t[i]))}return r}function zy(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,gk(s,o,e))}return r}var Gc=class extends xi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Tf=class extends xi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Af=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&bk(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=bo(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=bo(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=CI();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=t.has(i.key)?null:c;let u=xI(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ee())}isEqual(e){return this.batchId===e.batchId&&Ai(this.mutations,e.mutations,(t,r)=>By(t,r))&&Ai(this.baseMutations,e.baseMutations,(t,r)=>By(t,r))}},Cf=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ue(e.mutations.length===r.length);let i=function(){return dk}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var Sf=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Rf=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Ee,ne;function Ik(n){switch(n){default:return K();case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0}}function MI(n){if(n===void 0)return sn("GRPC error has no .code"),D.UNKNOWN;switch(n){case Ee.OK:return D.OK;case Ee.CANCELLED:return D.CANCELLED;case Ee.UNKNOWN:return D.UNKNOWN;case Ee.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case Ee.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case Ee.INTERNAL:return D.INTERNAL;case Ee.UNAVAILABLE:return D.UNAVAILABLE;case Ee.UNAUTHENTICATED:return D.UNAUTHENTICATED;case Ee.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case Ee.NOT_FOUND:return D.NOT_FOUND;case Ee.ALREADY_EXISTS:return D.ALREADY_EXISTS;case Ee.PERMISSION_DENIED:return D.PERMISSION_DENIED;case Ee.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case Ee.ABORTED:return D.ABORTED;case Ee.OUT_OF_RANGE:return D.OUT_OF_RANGE;case Ee.UNIMPLEMENTED:return D.UNIMPLEMENTED;case Ee.DATA_LOSS:return D.DATA_LOSS;default:return K()}}(ne=Ee||(Ee={}))[ne.OK=0]="OK",ne[ne.CANCELLED=1]="CANCELLED",ne[ne.UNKNOWN=2]="UNKNOWN",ne[ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ne[ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ne[ne.NOT_FOUND=5]="NOT_FOUND",ne[ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",ne[ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",ne[ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",ne[ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ne[ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ne[ne.ABORTED=10]="ABORTED",ne[ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",ne[ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",ne[ne.INTERNAL=13]="INTERNAL",ne[ne.UNAVAILABLE=14]="UNAVAILABLE",ne[ne.DATA_LOSS=15]="DATA_LOSS";var qy=null;function wk(){return new TextEncoder}var Ek=new Mn([4294967295,4294967295],0);function Gy(n){let e=wk().encode(n),t=new zh;return t.update(e),new Uint8Array(t.digest())}function Wy(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Mn([t,r],0),new Mn([i,s],0)]}var Df=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new mr(`Invalid padding: ${t}`);if(r<0)throw new mr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new mr(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new mr(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Mn.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Mn.fromNumber(r)));return i.compare(Ek)===1&&(i=new Mn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=Gy(e),[r,i]=Wy(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;let t=Gy(e),[r,i]=Wy(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},mr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Wc=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,To.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Y.min(),i,new Ie(ie),an(),ee())}},To=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ee(),ee(),ee())}};var wi=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Hc=class{constructor(e,t){this.targetId=e,this.me=t}},Kc=class{constructor(e,t,r=ze.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Qc=class{constructor(){this.fe=0,this.ge=Ky(),this.pe=ze.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ee(),t=ee(),r=ee();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:K()}}),new To(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=Ky()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ue(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Pf=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=an(),this.qe=Hy(),this.Qe=new Ie(ie)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:K()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(If(s))if(r===0){let o=new $(s.path);this.Ue(t,o,yt.newNoDocument(o,Y.min()))}else ue(r===1);else{let o=this.Ye(t);if(o!==r){let c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(t);let d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,d)}qy?.et(function(f,p,w,C,k){var P,R,j,W,U,se;let ge={localCacheCount:f,existenceFilterCount:p.count,databaseId:w.database,projectId:w.projectId},te=p.unchangedNames;return te&&(ge.bloomFilter={applied:k===0,hashCount:(P=te?.hashCount)!==null&&P!==void 0?P:0,bitmapLength:(W=(j=(R=te?.bits)===null||R===void 0?void 0:R.bitmap)===null||j===void 0?void 0:j.length)!==null&&W!==void 0?W:0,padding:(se=(U=te?.bits)===null||U===void 0?void 0:U.padding)!==null&&se!==void 0?se:0,mightContain:I=>{var g;return(g=C?.mightContain(I))!==null&&g!==void 0&&g}}),ge}(o,e.me,this.Le.tt(),c,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,c;try{o=Vn(r).toUint8Array()}catch(u){if(u instanceof Bc)return Ti("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Df(o,i,s)}catch(u){return Ti(u instanceof mr?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let c=this.Je(o);if(c){if(s.current&&If(c.target)){let u=new $(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,yt.newNoDocument(u,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=ee();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(u=>{let d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new Wc(e,t,this.Qe,this.ke,r);return this.ke=an(),this.qe=Hy(),this.Qe=new Ie(ie),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Qc,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new $e(ie),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||L("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Qc),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function Hy(){return new Ie($.comparator)}function Ky(){return new Ie($.comparator)}var Tk={asc:"ASCENDING",desc:"DESCENDING"},Ak={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ck={and:"AND",or:"OR"},kf=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function xf(n,e){return n.useProto3Json||mu(e)?e:{value:e}}function Yc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Sk(n,e){return Yc(n,e.toTimestamp())}function Mt(n){return ue(!!n),Y.fromTimestamp(function(t){let r=on(t);return new Me(r.seconds,r.nanos)}(n))}function $m(n,e){return Nf(n,e).canonicalString()}function Nf(n,e){let t=function(i){return new ve(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function VI(n){let e=ve.fromString(n);return ue(BI(e)),e}function Mf(n,e){return $m(n.databaseId,e.path)}function Qh(n,e){let t=VI(e);if(t.get(1)!==n.databaseId.projectId)throw new F(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new F(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $(LI(t))}function FI(n,e){return $m(n.databaseId,e)}function Rk(n){let e=VI(n);return e.length===4?ve.emptyPath():LI(e)}function Of(n){return new ve(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function LI(n){return ue(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Qy(n,e,t){return{name:Mf(n,e),fields:t.value.mapValue.fields}}function Dk(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:K()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,f){return d.useProto3Json?(ue(f===void 0||typeof f=="string"),ze.fromBase64String(f||"")):(ue(f===void 0||f instanceof Buffer||f instanceof Uint8Array),ze.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){let f=d.code===void 0?D.UNKNOWN:MI(d.code);return new F(f,d.message||"")}(o);t=new Kc(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Qh(n,r.document.name),s=Mt(r.document.updateTime),o=r.document.createTime?Mt(r.document.createTime):Y.min(),c=new bt({mapValue:{fields:r.document.fields}}),u=yt.newFoundDocument(i,s,o,c),d=r.targetIds||[],f=r.removedTargetIds||[];t=new wi(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Qh(n,r.document),s=r.readTime?Mt(r.readTime):Y.min(),o=yt.newNoDocument(i,s),c=r.removedTargetIds||[];t=new wi([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Qh(n,r.document),s=r.removedTargetIds||[];t=new wi([],s,i,null)}else{if(!("filter"in e))return K();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new Rf(i,s),c=r.targetId;t=new Hc(c,o)}}return t}function Pk(n,e){let t;if(e instanceof Er)t={update:Qy(n,e.key,e.value)};else if(e instanceof Gc)t={delete:Mf(n,e.key)};else if(e instanceof cn)t={update:Qy(n,e.key,e.data),updateMask:Uk(e.fieldMask)};else{if(!(e instanceof Tf))return K();t={verify:Mf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let c=o.transform;if(c instanceof Pi)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ir)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof wr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ki)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw K()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Sk(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:K()}(n,e.precondition)),t}function kk(n,e){return n&&n.length>0?(ue(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?Mt(i.updateTime):Mt(s);return o.isEqual(Y.min())&&(o=Mt(s)),new Ef(o,i.transformResults||[])}(t,e))):[]}function xk(n,e){return{documents:[FI(n,e.path)]}}function Nk(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=FI(n,i);let s=function(d){if(d.length!==0)return jI(It.create(d,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(d){if(d.length!==0)return d.map(f=>function(w){return{field:bi(w.field),direction:Vk(w.dir)}}(f))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let c=xf(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:t,parent:i}}function Mk(n){let e=Rk(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ue(r===1);let f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(p){let w=UI(p);return w instanceof It&&vI(w)?w.getFilters():[w]}(t.where));let o=[];t.orderBy&&(o=function(p){return p.map(w=>function(k){return new yr(yi(k.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(w))}(t.orderBy));let c=null;t.limit&&(c=function(p){let w;return w=typeof p=="object"?p.value:p,mu(w)?null:w}(t.limit));let u=null;t.startAt&&(u=function(p){let w=!!p.before,C=p.values||[];return new Ri(C,w)}(t.startAt));let d=null;return t.endAt&&(d=function(p){let w=!p.before,C=p.values||[];return new Ri(C,w)}(t.endAt)),ok(e,i,o,s,c,"F",u,d)}function Ok(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function UI(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=yi(t.unaryFilter.field);return Ae.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=yi(t.unaryFilter.field);return Ae.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=yi(t.unaryFilter.field);return Ae.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=yi(t.unaryFilter.field);return Ae.create(o,"!=",{nullValue:"NULL_VALUE"});default:return K()}}(n):n.fieldFilter!==void 0?function(t){return Ae.create(yi(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return K()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return It.create(t.compositeFilter.filters.map(r=>UI(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return K()}}(t.compositeFilter.op))}(n):K()}function Vk(n){return Tk[n]}function Fk(n){return Ak[n]}function Lk(n){return Ck[n]}function bi(n){return{fieldPath:n.canonicalString()}}function yi(n){return it.fromServerFormat(n.fieldPath)}function jI(n){return n instanceof Ae?function(t){if(t.op==="=="){if(Oy(t.value))return{unaryFilter:{field:bi(t.field),op:"IS_NAN"}};if(My(t.value))return{unaryFilter:{field:bi(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Oy(t.value))return{unaryFilter:{field:bi(t.field),op:"IS_NOT_NAN"}};if(My(t.value))return{unaryFilter:{field:bi(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bi(t.field),op:Fk(t.op),value:t.value}}}(n):n instanceof It?function(t){let r=t.getFilters().map(i=>jI(i));return r.length===1?r[0]:{compositeFilter:{op:Lk(t.op),filters:r}}}(n):K()}function Uk(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function BI(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Ao=class n{constructor(e,t,r,i,s=Y.min(),o=Y.min(),c=ze.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Vf=class{constructor(e){this.ct=e}};function jk(n){let e=Mk({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?qc(e,e.limit,"L"):e}var Jc=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(pe(e.integerValue));else if("doubleValue"in e){let r=pe(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Io(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=on(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Vn(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?mI(e)?this.dt(t,Number.MAX_SAFE_INTEGER):fI(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):K()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",c=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(pe(c)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),$.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Jc.vt=new Jc;var Ff=class{constructor(){this.un=new Lf}addToCollectionParentIndex(e,t){return this.un.add(t),x.resolve()}getCollectionParents(e,t){return x.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return x.resolve()}deleteFieldIndex(e,t){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,t){return x.resolve()}getDocumentsMatchingTarget(e,t){return x.resolve(null)}getIndexType(e,t){return x.resolve(0)}getFieldIndexes(e,t){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,t){return x.resolve(_r.min())}getMinOffsetFromCollectionGroup(e,t){return x.resolve(_r.min())}updateCollectionGroup(e,t,r){return x.resolve()}updateIndexEntries(e,t){return x.resolve()}},Lf=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new $e(ve.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new $e(ve.comparator)).toArray()}};var IF=new Uint8Array(0);var Pt=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Pt.DEFAULT_COLLECTION_PERCENTILE=10,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pt.DEFAULT=new Pt(41943040,Pt.DEFAULT_COLLECTION_PERCENTILE,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pt.DISABLED=new Pt(-1,0,0);var Co=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Uf=class{constructor(){this.changes=new Ln(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?x.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var jf=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Bf=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&bo(r.mutation,i,kt.empty(),Me.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ee()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ee()){let i=fr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=po();return s.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=fr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ee()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,c)=>{t.set(o,c)})})}computeViews(e,t,r,i){let s=an(),o=_o(),c=function(){return _o()}();return t.forEach((u,d)=>{let f=r.get(d.key);i.has(d.key)&&(f===void 0||f.mutation instanceof cn)?s=s.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),bo(f.mutation,d,f.mutation.getFieldMask(),Me.now())):o.set(d.key,kt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,f)=>o.set(d,f)),t.forEach((d,f)=>{var p;return c.set(d,new jf(f,(p=o.get(d))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,t){let r=_o(),i=new Ie((o,c)=>o-c),s=ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let c of o)c.keys().forEach(u=>{let d=t.get(u);if(d===null)return;let f=r.get(u)||kt.empty();f=c.applyToLocalView(d,f),r.set(u,f);let p=(i.get(c.batchId)||ee()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{let o=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),d=u.key,f=u.value,p=CI();f.forEach(w=>{if(!s.has(w)){let C=xI(t.get(w),r.get(w));C!==null&&p.set(w,C),s=s.add(w)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return x.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return $.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):II(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):x.resolve(fr()),c=-1,u=s;return o.next(d=>x.forEach(d,(f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),s.get(f)?x.resolve():this.remoteDocumentCache.getEntry(e,f).next(w=>{u=u.insert(f,w)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,ee())).next(f=>({batchId:c,changes:AI(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $(t)).next(r=>{let i=po();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=po();return this.indexManager.getCollectionParents(e,s).next(c=>x.forEach(c,u=>{let d=function(p,w){return new Fn(w,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((p,w)=>{o=o.insert(p,w)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((u,d)=>{let f=d.getKey();o.get(f)===null&&(o=o.insert(f,yt.newInvalidDocument(f)))});let c=po();return o.forEach((u,d)=>{let f=s.get(u);f!==void 0&&bo(f.mutation,d,kt.empty(),Me.now()),gu(t,d)&&(c=c.insert(u,d))}),c})}};var $f=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return x.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Mt(i.createTime)}}(t)),x.resolve()}getNamedQuery(e,t){return x.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:jk(i.bundledQuery),readTime:Mt(i.readTime)}}(t)),x.resolve()}};var zf=class{constructor(){this.overlays=new Ie($.comparator),this.Ir=new Map}getOverlay(e,t){return x.resolve(this.overlays.get(t))}getOverlays(e,t){let r=fr();return x.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),x.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),x.resolve()}getOverlaysForCollection(e,t,r){let i=fr(),s=t.length+1,o=new $(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let u=c.getNext().value,d=u.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Ie((d,f)=>d-f),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let f=s.get(d.largestBatchId);f===null&&(f=fr(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}let c=fr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=i)););return x.resolve(c)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Sf(t,r));let s=this.Ir.get(t);s===void 0&&(s=ee(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var qf=class{constructor(){this.sessionToken=ze.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,x.resolve()}};var So=class{constructor(){this.Tr=new $e(Te.Er),this.dr=new $e(Te.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Te(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Te(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new $(new ve([])),r=new Te(t,e),i=new Te(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new $(new ve([])),r=new Te(t,e),i=new Te(t,e+1),s=ee();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Te(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Te=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return $.comparator(e.key,t.key)||ie(e.wr,t.wr)}static Ar(e,t){return ie(e.wr,t.wr)||$.comparator(e.key,t.key)}};var Gf=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new $e(Te.Er)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Af(s,t,r,i);this.mutationQueue.push(o);for(let c of i)this.br=this.br.add(new Te(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return x.resolve(o)}lookupMutationBatch(e,t){return x.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return x.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Te(t,0),i=new Te(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let c=this.Dr(o.wr);s.push(c)}),x.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new $e(ie);return t.forEach(i=>{let s=new Te(i,0),o=new Te(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],c=>{r=r.add(c.wr)})}),x.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;$.isDocumentKey(s)||(s=s.child(""));let o=new Te(new $(s),0),c=new $e(ie);return this.br.forEachWhile(u=>{let d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.wr)),!0)},o),x.resolve(this.Cr(c))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ue(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return x.forEach(t.mutations,i=>{let s=new Te(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Te(t,0),i=this.br.firstAfterOrEqual(r);return x.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Wf=class{constructor(e){this.Mr=e,this.docs=function(){return new Ie($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return x.resolve(r?r.document.mutableCopy():yt.newInvalidDocument(t))}getEntries(e,t){let r=an();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():yt.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=an(),o=t.path,c=new $(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||QP(KP(f),r)<=0||(i.has(f.key)||gu(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return x.resolve(s)}getAllFromCollectionGroup(e,t,r,i){K()}Or(e,t){return x.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Hf(this)}getSize(e){return x.resolve(this.size)}},Hf=class extends Uf{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),x.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var Kf=class{constructor(e){this.persistence=e,this.Nr=new Ln(t=>Lm(t),Um),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.Lr=0,this.Br=new So,this.targetCount=0,this.kr=Co.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),x.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Co(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,x.resolve()}updateTargetData(e,t){return this.Kn(t),x.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),x.waitFor(s).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return x.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),x.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),x.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),x.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return x.resolve(r)}containsKey(e,t){return x.resolve(this.Br.containsKey(t))}};var Qf=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new dI(0),this.Kr=!1,this.Kr=!0,this.$r=new qf,this.referenceDelegate=e(this),this.Ur=new Kf(this),this.indexManager=new Ff,this.remoteDocumentCache=function(i){return new Wf(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Vf(t),this.Gr=new $f(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new zf,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Gf(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){L("MemoryPersistence","Starting transaction:",e);let i=new Yf(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return x.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},Yf=class extends cf{constructor(e){super(),this.currentSequenceNumber=e}},Jf=class n{constructor(e){this.persistence=e,this.Jr=new So,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw K()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),x.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),x.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.Xr,r=>{let i=$.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,Y.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return x.or([()=>x.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var Xf=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ee(),i=ee();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var Zf=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var em=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return mb()?8:JP(Pe())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Zf;return this.Xi(e,t,o).next(c=>{if(s.result=c,this.zi)return this.es(e,t,o,c.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(mo()<=Z.DEBUG&&L("QueryEngine","SDK will not create cache indexes for query:",_i(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),x.resolve()):(mo()<=Z.DEBUG&&L("QueryEngine","Query:",_i(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(mo()<=Z.DEBUG&&L("QueryEngine","The SDK decides to create cache indexes for query:",_i(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nt(t))):x.resolve())}Yi(e,t){if(Uy(t))return x.resolve(null);let r=Nt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=qc(t,null,"F"),r=Nt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=ee(...s);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let d=this.ts(t,c);return this.ns(t,d,o,u.readTime)?this.Yi(e,qc(t,null,"F")):this.rs(e,d,t,u)}))})))}Zi(e,t,r,i){return Uy(t)||i.isEqual(Y.min())?x.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?x.resolve(null):(mo()<=Z.DEBUG&&L("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),_i(t)),this.rs(e,o,t,HP(i,-1)).next(c=>c))})}ts(e,t){let r=new $e(EI(e));return t.forEach((i,s)=>{gu(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return mo()<=Z.DEBUG&&L("QueryEngine","Using full collection scan to execute query:",_i(t)),this.Ji.getDocumentsMatchingQuery(e,t,_r.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var tm=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Ie(ie),this._s=new Ln(s=>Lm(s),Um),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Bf(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function Bk(n,e,t,r){return new tm(n,e,t,r)}function $I(n,e){return b(this,null,function*(){let t=Q(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],c=[],u=ee();for(let d of i){o.push(d.batchId);for(let f of d.mutations)u=u.add(f.key)}for(let d of s){c.push(d.batchId);for(let f of d.mutations)u=u.add(f.key)}return t.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:c}))})})})}function $k(n,e){let t=Q(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){let p=d.batch,w=p.keys(),C=x.resolve();return w.forEach(k=>{C=C.next(()=>f.getEntry(u,k)).next(P=>{let R=d.docVersions.get(k);ue(R!==null),P.version.compareTo(R)<0&&(p.applyToRemoteDocument(P,d),P.isValidDocument()&&(P.setReadTime(d.commitVersion),f.addEntry(P)))})}),C.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=ee();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function zI(n){let e=Q(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function zk(n,e){let t=Q(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let c=[];e.targetChanges.forEach((f,p)=>{let w=i.get(p);if(!w)return;c.push(t.Ur.removeMatchingKeys(s,f.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(s,f.addedDocuments,p)));let C=w.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?C=C.withResumeToken(ze.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):f.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(f.resumeToken,r)),i=i.insert(p,C),function(P,R,j){return P.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(w,C,f)&&c.push(t.Ur.updateTargetData(s,C))});let u=an(),d=ee();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),c.push(qk(s,o,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(Y.min())){let f=t.Ur.getLastRemoteSnapshotVersion(s).next(p=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(f)}return x.waitFor(c).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(t.os=i,s))}function qk(n,e,t){let r=ee(),i=ee();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=an();return t.forEach((c,u)=>{let d=s.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Y.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):L("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function Gk(n,e){let t=Q(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Wk(n,e){let t=Q(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,x.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Ao(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function nm(n,e,t){return b(this,null,function*(){let r=Q(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Oo(o))throw o;L("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function Yy(n,e,t){let r=Q(n),i=Y.min(),s=ee();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){let p=Q(u),w=p._s.get(f);return w!==void 0?x.resolve(p.os.get(w)):p.Ur.getTargetData(d,f)}(r,o,Nt(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,c.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:Y.min(),t?s:ee())).next(c=>(Hk(r,ck(e),c),{documents:c,Ts:s})))}function Hk(n,e,t){let r=n.us.get(e)||Y.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}var Xc=class{constructor(){this.activeTargetIds=mk()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var rm=class{constructor(){this.so=new Xc,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Xc,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var im=class{_o(e){}shutdown(){}};var Zc=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){L("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){L("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Mc=null;function Yh(){return Mc===null?Mc=function(){return 268435456+Math.round(2147483648*Math.random())}():Mc++,"0x"+Mc.toString(16)}var Kk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var sm=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Be="WebChannelConnection",om=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let c=Yh(),u=this.xo(t,r.toUriEncodedString());L("RestConnection",`Sending RPC '${t}' ${c}:`,u,i);let d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,o),this.No(t,u,d,i).then(f=>(L("RestConnection",`Received RPC '${t}' ${c}: `,f),f),f=>{throw Ti("RestConnection",`RPC '${t}' ${c} failed with error: `,f,"url: ",u,"request:",i),f})}Lo(t,r,i,s,o,c){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Vi}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=Kk[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=Yh();return new Promise((o,c)=>{let u=new qh;u.setWithCredentials(!0),u.listenOnce(Gh.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case fo.NO_ERROR:let f=u.getResponseJson();L(Be,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case fo.TIMEOUT:L(Be,`RPC '${e}' ${s} timed out`),c(new F(D.DEADLINE_EXCEEDED,"Request time out"));break;case fo.HTTP_ERROR:let p=u.getStatus();if(L(Be,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let w=u.getResponseJson();Array.isArray(w)&&(w=w[0]);let C=w?.error;if(C&&C.status&&C.message){let k=function(R){let j=R.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(j)>=0?j:D.UNKNOWN}(C.status);c(new F(k,C.message))}else c(new F(D.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new F(D.UNAVAILABLE,"Connection failed."));break;default:K()}}finally{L(Be,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(i);L(Be,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",d,r,15)})}Bo(e,t,r){let i=Yh(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Kh(),c=Hh(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let f=s.join("");L(Be,`Creating RPC '${e}' stream ${i}: ${f}`,u);let p=o.createWebChannel(f,u),w=!1,C=!1,k=new sm({Io:R=>{C?L(Be,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(w||(L(Be,`Opening RPC '${e}' stream ${i} transport.`),p.open(),w=!0),L(Be,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},To:()=>p.close()}),P=(R,j,W)=>{R.listen(j,U=>{try{W(U)}catch(se){setTimeout(()=>{throw se},0)}})};return P(p,vi.EventType.OPEN,()=>{C||(L(Be,`RPC '${e}' stream ${i} transport opened.`),k.yo())}),P(p,vi.EventType.CLOSE,()=>{C||(C=!0,L(Be,`RPC '${e}' stream ${i} transport closed`),k.So())}),P(p,vi.EventType.ERROR,R=>{C||(C=!0,Ti(Be,`RPC '${e}' stream ${i} transport errored:`,R),k.So(new F(D.UNAVAILABLE,"The operation could not be completed")))}),P(p,vi.EventType.MESSAGE,R=>{var j;if(!C){let W=R.data[0];ue(!!W);let U=W,se=U.error||((j=U[0])===null||j===void 0?void 0:j.error);if(se){L(Be,`RPC '${e}' stream ${i} received error:`,se);let ge=se.status,te=function(_){let y=Ee[_];if(y!==void 0)return MI(y)}(ge),I=se.message;te===void 0&&(te=D.INTERNAL,I="Unknown error status: "+ge+" with message "+se.message),C=!0,k.So(new F(te,I)),p.close()}else L(Be,`RPC '${e}' stream ${i} received:`,W),k.bo(W)}}),P(c,Wh.STAT_EVENT,R=>{R.stat===xc.PROXY?L(Be,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===xc.NOPROXY&&L(Be,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{k.wo()},0),k}};function Jh(){return typeof document<"u"?document:null}function vu(n){return new kf(n,!0)}var eu=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&L("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var tu=class{constructor(e,t,r,i,s,o,c,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new eu(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return b(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return b(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return b(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===D.RESOURCE_EXHAUSTED?(sn(t.toString()),sn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===D.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new F(D.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>b(this,null,function*(){this.state=0,this.start()}))}I_(e){return L("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(L("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},am=class extends tu{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=Dk(this.serializer,e),r=function(s){if(!("targetChange"in s))return Y.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Y.min():o.readTime?Mt(o.readTime):Y.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=Of(this.serializer),t.addTarget=function(s,o){let c,u=o.target;if(c=If(u)?{documents:xk(s,u)}:{query:Nk(s,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=OI(s,o.resumeToken);let d=xf(s,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(Y.min())>0){c.readTime=Yc(s,o.snapshotVersion.toTimestamp());let d=xf(s,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);let r=Ok(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=Of(this.serializer),t.removeTarget=e,this.a_(t)}},cm=class extends tu{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ue(!!e.streamToken),this.lastStreamToken=e.streamToken,ue(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ue(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=kk(e.writeResults,e.commitTime),r=Mt(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=Of(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Pk(this.serializer,r))};this.a_(t)}};var um=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new F(D.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Nf(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(D.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,Nf(t,r),i,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new F(D.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},lm=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(sn(t),this.D_=!1):L("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var dm=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>b(this,null,function*(){Tr(this)&&(L("RemoteStore","Restarting streams for network reachability change."),yield function(u){return b(this,null,function*(){let d=Q(u);d.L_.add(4),yield Vo(d),d.q_.set("Unknown"),d.L_.delete(4),yield _u(d)})}(this))}))}),this.q_=new lm(r,i)}};function _u(n){return b(this,null,function*(){if(Tr(n))for(let e of n.B_)yield e(!0)})}function Vo(n){return b(this,null,function*(){for(let e of n.B_)yield e(!1)})}function qI(n,e){let t=Q(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Wm(t)?Gm(t):Li(t).r_()&&qm(t,e))}function zm(n,e){let t=Q(n),r=Li(t);t.N_.delete(e),r.r_()&&GI(t,e),t.N_.size===0&&(r.r_()?r.o_():Tr(t)&&t.q_.set("Unknown"))}function qm(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Li(n).A_(e)}function GI(n,e){n.Q_.xe(e),Li(n).R_(e)}function Gm(n){n.Q_=new Pf({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Li(n).start(),n.q_.v_()}function Wm(n){return Tr(n)&&!Li(n).n_()&&n.N_.size>0}function Tr(n){return Q(n).L_.size===0}function WI(n){n.Q_=void 0}function Qk(n){return b(this,null,function*(){n.q_.set("Online")})}function Yk(n){return b(this,null,function*(){n.N_.forEach((e,t)=>{qm(n,e)})})}function Jk(n,e){return b(this,null,function*(){WI(n),Wm(n)?(n.q_.M_(e),Gm(n)):n.q_.set("Unknown")})}function Xk(n,e,t){return b(this,null,function*(){if(n.q_.set("Online"),e instanceof Kc&&e.state===2&&e.cause)try{yield function(i,s){return b(this,null,function*(){let o=s.cause;for(let c of s.targetIds)i.N_.has(c)&&(yield i.remoteSyncer.rejectListen(c,o),i.N_.delete(c),i.Q_.removeTarget(c))})}(n,e)}catch(r){L("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield nu(n,r)}else if(e instanceof wi?n.Q_.Ke(e):e instanceof Hc?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Y.min()))try{let r=yield zI(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let c=s.Q_.rt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){let f=s.N_.get(d);f&&s.N_.set(d,f.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{let f=s.N_.get(u);if(!f)return;s.N_.set(u,f.withResumeToken(ze.EMPTY_BYTE_STRING,f.snapshotVersion)),GI(s,u);let p=new Ao(f.target,u,d,f.sequenceNumber);qm(s,p)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){L("RemoteStore","Failed to raise snapshot:",r),yield nu(n,r)}})}function nu(n,e,t){return b(this,null,function*(){if(!Oo(e))throw e;n.L_.add(1),yield Vo(n),n.q_.set("Offline"),t||(t=()=>zI(n.localStore)),n.asyncQueue.enqueueRetryable(()=>b(this,null,function*(){L("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield _u(n)}))})}function HI(n,e){return e().catch(t=>nu(n,t,e))}function bu(n){return b(this,null,function*(){let e=Q(n),t=Un(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Zk(e);)try{let i=yield Gk(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,ex(e,i)}catch(i){yield nu(e,i)}KI(e)&&QI(e)})}function Zk(n){return Tr(n)&&n.O_.length<10}function ex(n,e){n.O_.push(e);let t=Un(n);t.r_()&&t.V_&&t.m_(e.mutations)}function KI(n){return Tr(n)&&!Un(n).n_()&&n.O_.length>0}function QI(n){Un(n).start()}function tx(n){return b(this,null,function*(){Un(n).p_()})}function nx(n){return b(this,null,function*(){let e=Un(n);for(let t of n.O_)e.m_(t.mutations)})}function rx(n,e,t){return b(this,null,function*(){let r=n.O_.shift(),i=Cf.from(r,e,t);yield HI(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield bu(n)})}function ix(n,e){return b(this,null,function*(){e&&Un(n).V_&&(yield function(r,i){return b(this,null,function*(){if(function(o){return Ik(o)&&o!==D.ABORTED}(i.code)){let s=r.O_.shift();Un(r).s_(),yield HI(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield bu(r)}})}(n,e)),KI(n)&&QI(n)})}function Jy(n,e){return b(this,null,function*(){let t=Q(n);t.asyncQueue.verifyOperationInProgress(),L("RemoteStore","RemoteStore received new credentials");let r=Tr(t);t.L_.add(3),yield Vo(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield _u(t)})}function sx(n,e){return b(this,null,function*(){let t=Q(n);e?(t.L_.delete(2),yield _u(t)):e||(t.L_.add(2),yield Vo(t),t.q_.set("Unknown"))})}function Li(n){return n.K_||(n.K_=function(t,r,i){let s=Q(t);return s.w_(),new am(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:Qk.bind(null,n),Ro:Yk.bind(null,n),mo:Jk.bind(null,n),d_:Xk.bind(null,n)}),n.B_.push(e=>b(this,null,function*(){e?(n.K_.s_(),Wm(n)?Gm(n):n.q_.set("Unknown")):(yield n.K_.stop(),WI(n))}))),n.K_}function Un(n){return n.U_||(n.U_=function(t,r,i){let s=Q(t);return s.w_(),new cm(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:tx.bind(null,n),mo:ix.bind(null,n),f_:nx.bind(null,n),g_:rx.bind(null,n)}),n.B_.push(e=>b(this,null,function*(){e?(n.U_.s_(),yield bu(n)):(yield n.U_.stop(),n.O_.length>0&&(L("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var hm=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new rn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,c=new n(e,t,o,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(D.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Hm(n,e){if(sn("AsyncQueue",`${e}: ${n}`),Oo(n))return new F(D.UNAVAILABLE,`${e}: ${n}`);throw n}var ru=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$.comparator(t.key,r.key):(t,r)=>$.comparator(t.key,r.key),this.keyedMap=po(),this.sortedSet=new Ie(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var iu=class{constructor(){this.W_=new Ie($.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):K():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Ni=class n{constructor(e,t,r,i,s,o,c,u,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(c=>{o.push({type:0,doc:c})}),new n(e,t,ru.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var fm=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},mm=class{constructor(){this.queries=Xy(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=Q(t),s=i.queries;i.queries=Xy(),s.forEach((o,c)=>{for(let u of c.j_)u.onError(r)})})(this,new F(D.ABORTED,"Firestore shutting down"))}};function Xy(){return new Ln(n=>wI(n),pu)}function ox(n,e){return b(this,null,function*(){let t=Q(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new fm,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let c=Hm(o,`Initialization of query '${_i(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&Km(t)})}function ax(n,e){return b(this,null,function*(){let t=Q(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function cx(n,e){let t=Q(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let c of o.j_)c.X_(i)&&(r=!0);o.z_=i}}r&&Km(t)}function ux(n,e,t){let r=Q(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function Km(n){n.Y_.forEach(e=>{e.next()})}var pm,Zy;(Zy=pm||(pm={})).ea="default",Zy.Cache="cache";var gm=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ni(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Ni.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==pm.Cache}};var su=class{constructor(e){this.key=e}},ou=class{constructor(e){this.key=e}},vm=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ee(),this.mutatedKeys=ee(),this.Aa=EI(e),this.Ra=new ru(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new iu,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{let w=i.get(f),C=gu(this.query,p)?p:null,k=!!w&&this.mutatedKeys.has(w.key),P=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations),R=!1;w&&C?w.data.isEqual(C.data)?k!==P&&(r.track({type:3,doc:C}),R=!0):this.ga(w,C)||(r.track({type:2,doc:C}),R=!0,(u&&this.Aa(C,u)>0||d&&this.Aa(C,d)<0)&&(c=!0)):!w&&C?(r.track({type:0,doc:C}),R=!0):w&&!C&&(r.track({type:1,doc:w}),R=!0,(u||d)&&(c=!0)),R&&(C?(o=o.add(C),s=P?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:c,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((f,p)=>function(C,k){let P=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K()}};return P(C)-P(k)}(f.type,p.type)||this.Aa(f.doc,p.doc)),this.pa(r),i=i!=null&&i;let c=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new Ni(this.query,e.Ra,s,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new iu,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ee(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new ou(r))}),this.da.forEach(r=>{e.has(r)||t.push(new su(r))}),t}ba(e){this.Ta=e.Ts,this.da=ee();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Ni.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},_m=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},bm=class{constructor(e){this.key=e,this.va=!1}},ym=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ln(c=>wI(c),pu),this.Ma=new Map,this.xa=new Set,this.Oa=new Ie($.comparator),this.Na=new Map,this.La=new So,this.Ba={},this.ka=new Map,this.qa=Co.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function lx(n,e,t=!0){return b(this,null,function*(){let r=tw(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield YI(r,e,t,!0),i})}function dx(n,e){return b(this,null,function*(){let t=tw(n);yield YI(t,e,!0,!1)})}function YI(n,e,t,r){return b(this,null,function*(){let i=yield Wk(n.localStore,Nt(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),c;return r&&(c=yield hx(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&qI(n.remoteStore,i),c})}function hx(n,e,t,r,i){return b(this,null,function*(){n.Ka=(p,w,C)=>function(P,R,j,W){return b(this,null,function*(){let U=R.view.ma(j);U.ns&&(U=yield Yy(P.localStore,R.query,!1).then(({documents:I})=>R.view.ma(I,U)));let se=W&&W.targetChanges.get(R.targetId),ge=W&&W.targetMismatches.get(R.targetId)!=null,te=R.view.applyChanges(U,P.isPrimaryClient,se,ge);return tI(P,R.targetId,te.wa),te.snapshot})}(n,p,w,C);let s=yield Yy(n.localStore,e,!0),o=new vm(e,s.Ts),c=o.ma(s.documents),u=To.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(c,n.isPrimaryClient,u);tI(n,t,d.wa);let f=new _m(e,t,o);return n.Fa.set(e,f),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),d.snapshot})}function fx(n,e,t){return b(this,null,function*(){let r=Q(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!pu(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield nm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&zm(r.remoteStore,i.targetId),Im(r,i.targetId)}).catch(Mo))):(Im(r,i.targetId),yield nm(r.localStore,i.targetId,!0))})}function mx(n,e){return b(this,null,function*(){let t=Q(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),zm(t.remoteStore,r.targetId))})}function px(n,e,t){return b(this,null,function*(){let r=wx(n);try{let i=yield function(o,c){let u=Q(o),d=Me.now(),f=c.reduce((C,k)=>C.add(k.key),ee()),p,w;return u.persistence.runTransaction("Locally write mutations","readwrite",C=>{let k=an(),P=ee();return u.cs.getEntries(C,f).next(R=>{k=R,k.forEach((j,W)=>{W.isValidDocument()||(P=P.add(j))})}).next(()=>u.localDocuments.getOverlayedDocuments(C,k)).next(R=>{p=R;let j=[];for(let W of c){let U=yk(W,p.get(W.key).overlayedDocument);U!=null&&j.push(new cn(W.key,U,pI(U.value.mapValue),gr.exists(!0)))}return u.mutationQueue.addMutationBatch(C,d,j,c)}).next(R=>{w=R;let j=R.applyToLocalDocumentSet(p,P);return u.documentOverlayCache.saveOverlays(C,R.batchId,j)})}).then(()=>({batchId:w.batchId,changes:AI(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new Ie(ie)),d=d.insert(c,u),o.Ba[o.currentUser.toKey()]=d}(r,i.batchId,t),yield Fo(r,i.changes),yield bu(r.remoteStore)}catch(i){let s=Hm(i,"Failed to persist write");t.reject(s)}})}function JI(n,e){return b(this,null,function*(){let t=Q(n);try{let r=yield zk(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&(ue(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?ue(o.va):i.removedDocuments.size>0&&(ue(o.va),o.va=!1))}),yield Fo(t,r,e)}catch(r){yield Mo(r)}})}function eI(n,e,t){let r=Q(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let c=o.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){let u=Q(o);u.onlineState=c;let d=!1;u.queries.forEach((f,p)=>{for(let w of p.j_)w.Z_(c)&&(d=!0)}),d&&Km(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function gx(n,e,t){return b(this,null,function*(){let r=Q(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ie($.comparator);o=o.insert(s,yt.newNoDocument(s,Y.min()));let c=ee().add(s),u=new Wc(Y.min(),new Map,new Ie(ie),o,c);yield JI(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),Qm(r)}else yield nm(r.localStore,e,!1).then(()=>Im(r,e,t)).catch(Mo)})}function vx(n,e){return b(this,null,function*(){let t=Q(n),r=e.batch.batchId;try{let i=yield $k(t.localStore,e);ZI(t,r,null),XI(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Fo(t,i)}catch(i){yield Mo(i)}})}function _x(n,e,t){return b(this,null,function*(){let r=Q(n);try{let i=yield function(o,c){let u=Q(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(p=>(ue(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);ZI(r,e,t),XI(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Fo(r,i)}catch(i){yield Mo(i)}})}function XI(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function ZI(n,e,t){let r=Q(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Im(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||ew(n,r)})}function ew(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(zm(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Qm(n))}function tI(n,e,t){for(let r of t)r instanceof su?(n.La.addReference(r.key,e),bx(n,r)):r instanceof ou?(L("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||ew(n,r.key)):K()}function bx(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(L("SyncEngine","New document in limbo: "+t),n.xa.add(r),Qm(n))}function Qm(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new $(ve.fromString(e)),r=n.qa.next();n.Na.set(r,new bm(t)),n.Oa=n.Oa.insert(t,r),qI(n.remoteStore,new Ao(Nt(jm(t.path)),r,"TargetPurposeLimboResolution",dI.oe))}}function Fo(n,e,t){return b(this,null,function*(){let r=Q(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{o.push(r.Ka(u,e,t).then(d=>{var f;if((d||t)&&r.isPrimaryClient){let p=d?!d.fromCache:(f=t?.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){i.push(d);let p=Xf.Wi(u.targetId,d);s.push(p)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(u,d){return b(this,null,function*(){let f=Q(u);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>x.forEach(d,w=>x.forEach(w.$i,C=>f.persistence.referenceDelegate.addReference(p,w.targetId,C)).next(()=>x.forEach(w.Ui,C=>f.persistence.referenceDelegate.removeReference(p,w.targetId,C)))))}catch(p){if(!Oo(p))throw p;L("LocalStore","Failed to update sequence numbers: "+p)}for(let p of d){let w=p.targetId;if(!p.fromCache){let C=f.os.get(w),k=C.snapshotVersion,P=C.withLastLimboFreeSnapshotVersion(k);f.os=f.os.insert(w,P)}}})}(r.localStore,s))})}function yx(n,e){return b(this,null,function*(){let t=Q(n);if(!t.currentUser.isEqual(e)){L("SyncEngine","User change. New user:",e.toKey());let r=yield $I(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(c=>{c.forEach(u=>{u.reject(new F(D.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Fo(t,r.hs)}})}function Ix(n,e){let t=Q(n),r=t.Na.get(e);if(r&&r.va)return ee().add(r.key);{let i=ee(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let c=t.Fa.get(o);i=i.unionWith(c.view.Va)}return i}}function tw(n){let e=Q(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=JI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ix.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gx.bind(null,e),e.Ca.d_=cx.bind(null,e.eventManager),e.Ca.$a=ux.bind(null,e.eventManager),e}function wx(n){let e=Q(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_x.bind(null,e),e}var nI=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return b(this,null,function*(){this.serializer=vu(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return Bk(this.persistence,new em,t.initialUser,this.serializer)}Ga(t){return new Qf(Jf.Zr,this.serializer)}Wa(t){return new rm}terminate(){return b(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var Ex=(()=>{class n{initialize(t,r){return b(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>eI(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=yx.bind(null,this.syncEngine),yield sx(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new mm}()}createDatastore(t){let r=vu(t.databaseInfo.databaseId),i=function(o){return new om(o)}(t.databaseInfo);return function(o,c,u,d){return new um(o,c,u,d)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,c,u){return new dm(i,s,o,c,u)}(this.localStore,this.datastore,t.asyncQueue,r=>eI(this.syncEngine,r,0),function(){return Zc.D()?new Zc:new im}())}createSyncEngine(t,r){return function(s,o,c,u,d,f,p){let w=new ym(s,o,c,u,d,f);return p&&(w.Qa=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return b(this,null,function*(){var t,r;yield function(s){return b(this,null,function*(){let o=Q(s);L("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Vo(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var wm=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):sn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Em=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ke.UNAUTHENTICATED,this.clientId=Lc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>b(this,null,function*(){L("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(L("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new rn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>b(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Hm(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Xh(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),L("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>b(this,null,function*(){r.isEqual(i)||(yield $I(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function rI(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Tx(n);L("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Jy(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Jy(e.remoteStore,i)),n._onlineComponents=e})}function Tx(n){return b(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){L("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Xh(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===D.FAILED_PRECONDITION||i.code===D.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Ti("Error using user provided cache. Falling back to memory cache: "+t),yield Xh(n,new nI)}}else L("FirestoreClient","Using default OfflineComponentProvider"),yield Xh(n,new nI);return n._offlineComponents})}function nw(n){return b(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(L("FirestoreClient","Using user provided OnlineComponentProvider"),yield rI(n,n._uninitializedComponentsProvider._online)):(L("FirestoreClient","Using default OnlineComponentProvider"),yield rI(n,new Ex))),n._onlineComponents})}function Ax(n){return nw(n).then(e=>e.syncEngine)}function iI(n){return b(this,null,function*(){let e=yield nw(n),t=e.eventManager;return t.onListen=lx.bind(null,e.syncEngine),t.onUnlisten=fx.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=dx.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=mx.bind(null,e.syncEngine),t})}function rw(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var sI=new Map;function iw(n,e,t){if(!t)throw new F(D.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Cx(n,e,t,r){if(e===!0&&r===!0)throw new F(D.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function oI(n){if(!$.isDocumentKey(n))throw new F(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function aI(n){if($.isDocumentKey(n))throw new F(D.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function yu(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":K()}function yo(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new F(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=yu(n);throw new F(D.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Sx(n,e){if(e<=0)throw new F(D.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var au=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new F(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new F(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Cx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new F(D.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new F(D.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new F(D.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Mi=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new au({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new F(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new F(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new au(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Zh;switch(r.type){case"firstParty":return new rf(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new F(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return b(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=sI.get(t);r&&(L("ComponentProvider","Removing Datastore"),sI.delete(t),r.terminate())}(this),Promise.resolve()}};function sw(n,e,t,r={}){var i;let s=(n=yo(n,Mi))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Ti("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=ke.MOCK_USER;else{c=cb(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new F(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ke(d)}n._authCredentials=new ef(new Fc(c,u))}}var jn=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},st=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new On(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},On=class n extends jn{constructor(e,t,r){super(e,t,jm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new st(this.firestore,null,new $(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function ow(n,e,...t){if(n=je(n),iw("collection","path",e),n instanceof Mi){let r=ve.fromString(e,...t);return aI(r),new On(n,null,r)}{if(!(n instanceof st||n instanceof On))throw new F(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ve.fromString(e,...t));return aI(r),new On(n.firestore,null,r)}}function aw(n,e,...t){if(n=je(n),arguments.length===1&&(e=Lc.newId()),iw("doc","path",e),n instanceof Mi){let r=ve.fromString(e,...t);return oI(r),new st(n,null,new $(r))}{if(!(n instanceof st||n instanceof On))throw new F(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ve.fromString(e,...t));return oI(r),new st(n.firestore,n instanceof On?n.converter:null,new $(r))}}var cu=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new eu(this,"async_queue_retry"),this.Vu=()=>{let r=Jh();r&&L("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=Jh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Jh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new rn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return b(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Oo(e))throw e;L("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw sn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=hm.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&K()}verifyOperationInProgress(){}wu(){return b(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function cI(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var Oi=class extends Mi{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new cu,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return b(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new cu(e),this._firestoreClient=void 0,yield e}})}};function cw(n,e){let t=typeof n=="object"?n:di(),r=typeof n=="string"?n:e||"(default)",i=eo(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=ab("firestore");s&&sw(i,...s)}return i}function uw(n){if(n._terminated)throw new F(D.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Rx(n),n._firestoreClient}function Rx(n){var e,t,r;let i=n._freezeSettings(),s=function(c,u,d,f){return new uf(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,rw(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Em(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(c){let u=c?._online.build();return{_offline:c?._offline.build(u),_online:u}}(n._componentsProvider))}var Ro=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(ze.fromBase64String(e))}catch(t){throw new F(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(ze.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Do=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new F(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new it(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var uu=class{constructor(e){this._methodName=e}};var Po=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new F(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new F(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}};var ko=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var Dx=/^__.*__$/,Tm=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new cn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Er(e,this.data,t,this.fieldTransforms)}};function lw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K()}}var Am=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return lu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(lw(this.Cu)&&Dx.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},Cm=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||vu(e)}Qu(e,t,r,i=!1){return new Am({Cu:e,methodName:t,qu:r,path:it.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function dw(n){let e=n._freezeSettings(),t=vu(n._databaseId);return new Cm(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Px(n,e,t,r,i,s={}){let o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);mw("Data must be an object, but it was:",o,r);let c=hw(r,o),u,d;if(s.merge)u=new kt(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){let f=[];for(let p of s.mergeFields){let w=xx(e,p,t);if(!o.contains(w))throw new F(D.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);Mx(f,w)||f.push(w)}u=new kt(f),d=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=o.fieldTransforms;return new Tm(new bt(c),u,d)}function kx(n,e,t,r=!1){return Ym(t,n.Qu(r?4:3,e))}function Ym(n,e){if(fw(n=je(n)))return mw("Unsupported field value:",e,n),hw(n,e);if(n instanceof uu)return function(r,i){if(!lw(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let c of r){let u=Ym(c,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=je(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return pk(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Me.fromDate(r);return{timestampValue:Yc(i.serializer,s)}}if(r instanceof Me){let s=new Me(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yc(i.serializer,s)}}if(r instanceof Po)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ro)return{bytesValue:OI(i.serializer,r._byteString)};if(r instanceof st){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:$m(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ko)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return Bm(c.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${yu(r)}`)}(n,e)}function hw(n,e){let t={};return hI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fi(n,(r,i)=>{let s=Ym(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function fw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Me||n instanceof Po||n instanceof Ro||n instanceof st||n instanceof uu||n instanceof ko)}function mw(n,e,t){if(!fw(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=yu(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function xx(n,e,t){if((e=je(e))instanceof Do)return e._internalPath;if(typeof e=="string")return pw(n,e);throw lu("Field path arguments must be of type string or ",n,!1,void 0,t)}var Nx=new RegExp("[~\\*/\\[\\]]");function pw(n,e,t){if(e.search(Nx)>=0)throw lu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Do(...e.split("."))._internalPath}catch{throw lu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function lu(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new F(D.INVALID_ARGUMENT,c+n+u)}function Mx(n,e){return n.some(t=>t.isEqual(e))}var du=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new st(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Sm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Jm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Sm=class extends du{data(){return super.data()}};function Jm(n,e){return typeof e=="string"?pw(n,e):e instanceof Do?e._internalPath:e._delegate._internalPath}function Ox(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new F(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var xo=class{},No=class extends xo{};function gw(n,e,...t){let r=[];e instanceof xo&&r.push(e),r=r.concat(t),function(s){let o=s.filter(u=>u instanceof Dm).length,c=s.filter(u=>u instanceof Rm).length;if(o>1||o>0&&c>0)throw new F(D.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Rm=class n extends No{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return bw(e._query,t),new jn(e.firestore,e.converter,wf(e._query,t))}_parse(e){let t=dw(e.firestore);return function(s,o,c,u,d,f,p){let w;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new F(D.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){lI(p,f);let C=[];for(let k of p)C.push(uI(u,s,k));w={arrayValue:{values:C}}}else w=uI(u,s,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||lI(p,f),w=kx(c,o,p,f==="in"||f==="not-in");return Ae.create(d,f,w)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};var Dm=class n extends xo{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:It.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i,c=s.getFlattenedFilters();for(let u of c)bw(o,u),o=wf(o,u)}(e._query,t),new jn(e.firestore,e.converter,wf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Pm=class n extends No{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,s,o){if(i.startAt!==null)throw new F(D.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new F(D.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new yr(s,o)}(e._query,this._field,this._direction);return new jn(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new Fn(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function vw(n,e="asc"){let t=e,r=Jm("orderBy",n);return Pm._create(r,t)}var km=class n extends No{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new jn(e.firestore,e.converter,qc(e._query,this._limit,this._limitType))}};function _w(n){return Sx("limit",n),km._create("limit",n,"F")}function uI(n,e,t){if(typeof(t=je(t))=="string"){if(t==="")throw new F(D.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!II(e)&&t.indexOf("/")!==-1)throw new F(D.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(ve.fromString(t));if(!$.isDocumentKey(r))throw new F(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ny(n,new $(r))}if(t instanceof st)return Ny(n,t._key);throw new F(D.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yu(t)}.`)}function lI(n,e){if(!Array.isArray(n)||n.length===0)throw new F(D.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bw(n,e){let t=function(i,s){for(let o of i)for(let c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new F(D.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new F(D.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var xm=class{convertValue(e,t="none"){switch(br(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Vn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw K()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Fi(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>pe(o.doubleValue));return new ko(s)}convertGeoPoint(e){return new Po(pe(e.latitude),pe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Vm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(wo(e));default:return null}}convertTimestamp(e){let t=on(e);return new Me(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ve.fromString(e);ue(BI(r));let i=new $c(r.get(1),r.get(3)),s=new $(r.popFirst(5));return i.isEqual(t)||sn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function Vx(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var pr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},hu=class extends du{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ei(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Jm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Ei=class extends hu{data(e={}){return super.data(e)}},Nm=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new pr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ei(this._firestore,this._userDataWriter,r.key,r,new pr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new F(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{let u=new Ei(i._firestore,i._userDataWriter,c.doc.key,c.doc,new pr(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let u=new Ei(i._firestore,i._userDataWriter,c.doc.key,c.doc,new pr(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:Fx(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function Fx(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K()}}var fu=class extends xm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ro(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new st(this.firestore,null,t)}};function yw(n,e){let t=yo(n.firestore,Oi),r=aw(n),i=Vx(n.converter,e);return Lx(t,[Px(dw(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,gr.exists(!1))]).then(()=>r)}function Xm(n,...e){var t,r,i;n=je(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||cI(e[o])||(s=e[o],o++);let c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(cI(e[o])){let p=e[o];e[o]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,d,f;if(n instanceof st)d=yo(n.firestore,Oi),f=jm(n._key.path),u={next:p=>{e[o]&&e[o](Ux(d,n,p))},error:e[o+1],complete:e[o+2]};else{let p=yo(n,jn);d=yo(p.firestore,Oi),f=p._query;let w=new fu(d);u={next:C=>{e[o]&&e[o](new Nm(d,w,p,C))},error:e[o+1],complete:e[o+2]},Ox(n._query)}return function(w,C,k,P){let R=new wm(P),j=new gm(C,R,k);return w.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return ox(yield iI(w),j)})),()=>{R.Za(),w.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return ax(yield iI(w),j)}))}}(uw(d),f,c,u)}function Lx(n,e){return function(r,i){let s=new rn;return r.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return px(yield Ax(r),i,s)})),s.promise}(uw(n),e)}function Ux(n,e,t){let r=t.docs.get(e._key),i=new fu(n);return new hu(n,i,e._key,r,new pr(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Vi=i})(Dn),Rn(new dt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),c=new Oi(new tf(r.getProvider("auth-internal")),new of(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new F(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $c(d.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),Se(Dy,"4.7.3",e),Se(Dy,"4.7.3","esm2017")})();var Iu=function(){return Iu=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Iu.apply(this,arguments)};var $x={includeMetadataChanges:!1};function Iw(n,e){return e===void 0&&(e=$x),new wt(function(t){var r=Xm(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function ww(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:Iu(Iu({},r),(t={},t[e.idField]=n.id,t))}function Ew(n){return Iw(n,{includeMetadataChanges:!0}).pipe(J(function(e){return e.docs}))}function Tw(n,e){return e===void 0&&(e={}),Ew(n).pipe(J(function(t){return t.map(function(r){return ww(r,e)})}))}var Lo=class{constructor(e){return e}},Aw="firestore",Zm=class{constructor(){return to(Aw)}};var ep=new q("angularfire2.firestore-instances");function zx(n,e){let t=dc(Aw,n,e);return t&&new Lo(t)}function qx(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Lo(r)}}var Gx={provide:Zm,deps:[[new We,ep]]},Wx={provide:Lo,useFactory:zx,deps:[[new We,ep],Xt]};function JL(n,...e){return Se("angularfire",ar.full,"fst"),ft([Wx,Gx,{provide:ep,useFactory:qx(n),multi:!0,deps:[oe,mt,mi,cr,[new We,ho],[new We,fi],...e]}])}var XL=Ye(Tw,!0);var ZL=Ye(yw,!0);var eU=Ye(ow,!0);var tU=Ye(cw,!0);var nU=Ye(_w,!0);var rU=Ye(vw,!0);var iU=Ye(gw,!0);export{mE as a,aN as b,Jg as c,kN as d,tT as e,bA as f,Qt as g,g1 as h,v1 as i,_1 as j,aV as k,cV as l,lo as m,tF as n,nF as o,rF as p,iF as q,Me as r,Lo as s,JL as t,XL as u,ZL as v,eU as w,tU as x,nU as y,rU as z,iU as A,Hr as B,gv as C,Cs as D,sv as E,Yn as F,QN as G,YN as H,ST as I,PT as J,XN as K,xT as L,MT as M,VT as N,Lv as O,ZN as P,eM as Q,zT as R,tM as S,nM as T,rM as U,et as V,dM as W,Qr as X,hM as Y,Wt as Z,zv as _,qv as $,WT as aa,jl as ba,pM as ca,Xn as da,vM as ea,Hv as fa,SM as ga,Kv as ha,ql as ia,Gl as ja,GM as ka,Xv as la,nO as ma,Wl as na,Jr as oa,e_ as pa,xO as qa,F0 as ra,l_ as sa,NO as ta,MO as ua,QO as va,YO as wa};
